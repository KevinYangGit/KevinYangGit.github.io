---
title: é˜Ÿåˆ—
date: 2020-11-06 16:13:04
tags: æ•°æ®ç»“æ„ä¸ç®—æ³•
---

[é˜Ÿåˆ—](https://baike.baidu.com/item/%E9%98%9F%E5%88%97/14580481?fr=aladdin)æ˜¯ä¸€ç§ç‰¹æ®Šçš„çº¿æ€§è¡¨ï¼Œç‰¹æ®Šä¹‹å¤„åœ¨äºå®ƒåªå…è®¸åœ¨è¡¨çš„å‰ç«¯ï¼ˆfrontï¼‰è¿›è¡Œåˆ é™¤æ“ä½œï¼Œè€Œåœ¨è¡¨çš„åç«¯ï¼ˆrearï¼‰è¿›è¡Œæ’å…¥æ“ä½œï¼Œå’Œæ ˆä¸€æ ·ï¼Œé˜Ÿåˆ—æ˜¯ä¸€ç§æ“ä½œå—é™åˆ¶çš„çº¿æ€§è¡¨ã€‚è¿›è¡Œæ’å…¥æ“ä½œçš„ç«¯ç§°ä¸ºé˜Ÿå°¾ï¼Œè¿›è¡Œåˆ é™¤æ“ä½œçš„ç«¯ç§°ä¸ºé˜Ÿå¤´ã€‚

<!-- more -->

# é˜Ÿåˆ—
![é˜Ÿåˆ—02](é˜Ÿåˆ—/é˜Ÿåˆ—02.png)
é˜Ÿåˆ—æ˜¯ä¸€ç§ç‰¹æ®Šçš„çº¿æ€§è¡¨ï¼Œåªèƒ½åœ¨å¤´å°¾ä¸¤ç«¯è¿›è¡Œæ“ä½œï¼š  
é˜Ÿå°¾ï¼ˆrearï¼‰ï¼šåªèƒ½ä»é˜Ÿå°¾æ·»åŠ å…ƒç´ ï¼Œä¸€èˆ¬å«åš enQueueï¼Œå…¥é˜Ÿï¼›  
é˜Ÿå¤´ï¼ˆfrontï¼‰ï¼šåªèƒ½ä»é˜Ÿå¤´ç§»é™¤å…ƒç´ ï¼Œä¸€èˆ¬å«åš deQueueï¼Œå‡ºé˜Ÿï¼›  
å…ˆè¿›å…ˆå‡ºçš„åŸåˆ™ï¼ŒFirst In First Outï¼ŒFIFO  

å…¥é˜Ÿï¼š
![é˜Ÿåˆ—01](é˜Ÿåˆ—/é˜Ÿåˆ—01.png)
å‡ºé˜Ÿï¼š
![é˜Ÿåˆ—03](é˜Ÿåˆ—/é˜Ÿåˆ—03.png)

## é€šè¿‡åŒå‘é“¾è¡¨å®ç°
åŠ¨æ€æ•°ç»„å’Œé“¾è¡¨éƒ½å¯ä»¥ç”¨æ¥å®ç°é˜Ÿåˆ—ã€‚å› ä¸ºé˜Ÿåˆ—ä¸»è¦æ˜¯åœ¨å¤´å°¾æ“ä½œå…ƒç´ ï¼Œæ‰€ä»¥ä¼˜å…ˆä½¿ç”¨åŒå‘é“¾è¡¨å®ç°é˜Ÿåˆ—ã€‚
```
public class Queue<E> {
	LinkedList<E> list = new LinkedList<>();
	
	public int size() {
		return list.size();
	}

	public boolean isEmpty() {
		return list.isEmpty();
	}
	
	public void clear() {
		list.clear();
	}

	public void enQueue(E element) {
		list.add(element);
	}

	public E deQueue() {
		return list.remove(0);
	}

	public E front() {
		return list.get(0);
	}
}
```

æµ‹è¯•ï¼š
```
public static void main(String[] args) {
	Queue<Integer> queue = new Queue<>();
	queue.enQueue(11);
	queue.enQueue(22);
	queue.enQueue(33);
	queue.enQueue(44);
	
	while (!queue.isEmpty()) {
		System.out.println(queue.deQueue());
	}
}
```

æ‰“å°ç»“æœï¼š
```
11
22
33
44
```

## é€šè¿‡æ ˆå®ç°
[232. ç”¨æ ˆå®ç°é˜Ÿåˆ—](https://leetcode-cn.com/problems/implement-queue-using-stacks/submissions/)
å…¥é˜Ÿï¼š
![é˜Ÿåˆ—04](é˜Ÿåˆ—/é˜Ÿåˆ—04.png)
å‡ºé˜Ÿï¼š
![é˜Ÿåˆ—05](é˜Ÿåˆ—/é˜Ÿåˆ—05.png)
```
Stack<Integer> inStack;
Stack<Integer> outStack;

public _232_ç”¨æ ˆå®ç°é˜Ÿåˆ—() {
	inStack = new Stack<>();
	outStack = new Stack<>();
}

/** å…¥æ ˆ */
public void push(int x) {
	inStack.push(x);
}

/** å‡ºæ ˆ */
public int pop() {
	checkOutStack();
	return outStack.pop();
}

/** é¦–å…ƒç´  */
public int peek() {
	checkOutStack();
	return outStack.peek();
}

/** åˆ¤ç©º */
public boolean empty() {
	return inStack.isEmpty() && outStack.isEmpty();
}

private void checkOutStack() {
	if (outStack.isEmpty()) {
		while (!inStack.isEmpty()) {
			outStack.push(inStack.pop());
		}
	}
}
```

## æºç åˆ†æ
Queue.class æ–‡ä»¶é‡Œåªæœ‰å®šä¹‰æ²¡æœ‰å®ç°ï¼š
```
public interface Queue<E> extends Collection<E> {
    boolean add(E e);
    
    // å…¥é˜Ÿ
    boolean offer(E e);
    
    E remove();
    
    // å‡ºé˜Ÿ
    E poll();

    E element();
    
    // é¦–å…ƒç´ 
    E peek();
}
```

åœ¨ Queue.class æ–‡ä»¶é‡Œçš„æ³¨é‡Šå¯ä»¥çœ‹åˆ°ï¼ŒQueue æ˜¯åœ¨ LinkedList.class é‡Œå®ç°çš„ï¼š
```
/**
 * Retrieves, but does not remove, the head (first element) of this list.
 *
 * @return the head of this list, or {@code null} if this list is empty
 * @since 1.5
 */
public E peek() {
    final Node<E> f = first;
    return (f == null) ? null : f.item;
}

/**
 * Retrieves, but does not remove, the head (first element) of this list.
 *
 * @return the head of this list
 * @throws NoSuchElementException if this list is empty
 * @since 1.5
 */
public E element() {
    return getFirst();
}

/**
 * Retrieves and removes the head (first element) of this list.
 *
 * @return the head of this list, or {@code null} if this list is empty
 * @since 1.5
 */
public E poll() {
    final Node<E> f = first;
    return (f == null) ? null : unlinkFirst(f);
}

/**
 * Retrieves and removes the head (first element) of this list.
 *
 * @return the head of this list
 * @throws NoSuchElementException if this list is empty
 * @since 1.5
 */
public E remove() {
    return removeFirst();
}

/**
 * Adds the specified element as the tail (last element) of this list.
 *
 * @param e the element to add
 * @return {@code true} (as specified by {@link Queue#offer})
 * @since 1.5
 */
public boolean offer(E e) {
    return add(e);
}
```

# åŒç«¯é˜Ÿåˆ—
[åŒç«¯é˜Ÿåˆ—](https://baike.baidu.com/item/deque/849385?fromtitle=%E5%8F%8C%E7%AB%AF%E9%98%9F%E5%88%97&fromid=2968804&fr=aladdin)æ˜¯èƒ½åœ¨å¤´å°¾ä¸¤ç«¯è¿›è¡Œæ·»åŠ ã€åˆ é™¤æ“ä½œçš„é˜Ÿåˆ—ã€‚
```
public class Deque<E> {
	
	LinkedList<E> list = new LinkedList<>();
	
	public int size() {
		return list.size();
	}

	public boolean isEmpty() {
		return list.isEmpty();
	}
	
	public void clear() {
		list.clear();
	}

	public void enQueueRear(E element) {
		list.add(element);
	}

	public E deQueueFront() {
		return list.remove(0);
	}

	public void enQueueFront(E element) {
		list.add(0, element);
	}

	public E deQueueRear() {
		return list.remove(list.size()-1);
	}

	public E front() {
		return list.get(0);
	}

	public E rear() {
		return list.get(list.size()-1);
	}
}
```

æµ‹è¯•ï¼š
```
static void test1() {
	Deque<Integer> queue = new Deque<>();
	queue.enQueueFront(11);
	queue.enQueueFront(22);
	queue.enQueueRear(33);
	queue.enQueueRear(44);
	
	while (!queue.isEmpty()) {
		System.out.println(queue.deQueueFront());
	}
}

public static void main(String[] args) {
	test1();
}
```

æ‰“å°ç»“æœï¼š
```
22
11
33
44
```

## æºç åˆ†æ
åŒ Queue çš„æºç åˆ†æğŸ‘†ã€‚

# å¾ªç¯é˜Ÿåˆ—
[å¾ªç¯é˜Ÿåˆ—](https://baike.baidu.com/item/%E5%BE%AA%E7%8E%AF%E9%98%9F%E5%88%97/3685773?fr=aladdin)åº•å±‚ä½¿ç”¨æ•°ç»„å®ç°çš„ï¼Œå®ç°æ€è·¯å¯ä»¥å‚è€ƒ[é“¾è¡¨](http://kevinyanggit.github.io/2020/10/20/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E9%93%BE%E8%A1%A8/)ä¸­çš„åŠ¨æ€æ•°ç»„ä¼˜åŒ–ã€‚

å¯¹äºä¸€ä¸ªé˜Ÿåˆ—ï¼š
![é˜Ÿåˆ—06](é˜Ÿåˆ—/é˜Ÿåˆ—06.png)
é˜Ÿå¤´çš„ä¸¤ä¸ªå…ƒç´ ä¾æ¬¡å‡ºæ ˆï¼Œ`front` æŒ‡å‘ `2`ï¼š
![é˜Ÿåˆ—07](é˜Ÿåˆ—/é˜Ÿåˆ—07.png)
é˜Ÿå°¾ä¾æ¬¡å…¥æ ˆ66ã€77ã€88ã€99ï¼Œå…¶ä¸­88ã€99è¶…å‡ºæ•°ç»„å¤§å°ï¼Œæ”¾åˆ°æ•°ç»„çš„ `0` å’Œ `1` å¤„ï¼ˆ`(front + index) % elements.length`ï¼‰ï¼š
![é˜Ÿåˆ—08](é˜Ÿåˆ—/é˜Ÿåˆ—08.png)

psï¼š`%` è¿ç®—ç¬¦çš„ä¼˜åŒ– - å·²çŸ¥ n>=0ï¼Œm>=0ï¼Œn < 2mï¼Œåˆ™ n%m ç­‰ä»·äº `n - (m > n ? 0 : m)`ã€‚

ä»£ç å®ç°ï¼š
```
public class CircleQueue<E> {
	/*
	 * é¦–å…ƒç´ 
	 */
	private int front;
	/*
	 * æ•°æ®å¤§å°
	 */
	private int size;
	/*
	 * å®¹å™¨
	 */
	private E[] elements;
	/*
	 * é»˜è®¤å®¹é‡
	 */
	private static final int DEFAULT_CAPICATY = 10;
	
	public CircleQueue() {
		elements = (E[]) new Object[DEFAULT_CAPICATY];
	}
	
	public int size() {
		return size;
	}

	public boolean isEmpty() {
		return size == 0;
	}
	
	public void clear() {
		for (int i = 0; i < elements.length; i++) {
			elements[Index(i)] = null;
		}
		size = 0;
		front = 0;
	}

	public void enQueue(E element) {
		ensureCapicity(size + 1);
		elements[Index(size)] = element;
		size++;
	}

	public E deQueue() {
		E element = elements[front];
		elements[front] = null;
		front = Index(1);
		size--;
		return element;
	}

	public E front() {
		return elements[front];
	}
	
	/*
	 * å·²çŸ¥ n>=0ï¼Œm>=0ï¼Œn < 2mï¼Œåˆ™ n%m ç­‰ä»·äº
	 * n - (m > n ? 0 : m)
	 */
	private int Index(int index) {
		index += front;
		return index - (elements.length > index ? 0 : elements.length);
	}
	
	private void ensureCapicity(int capicaty) {
		int oldCapicaty = elements.length;
		if (oldCapicaty >= capicaty) return;
		int newCapicaty = oldCapicaty + (oldCapicaty >> 1);
		E[] newElements = (E[]) new Object[newCapicaty];
		for (int i = 0; i < elements.length; i++) {
			newElements[i] = elements[Index(i)];
		}
		elements = newElements;
		front = 0;
	}
	
	public String toString() {
		StringBuilder string = new StringBuilder();
		string.append("capicaty=").append(elements.length)
		.append(" size=").append(size)
		.append(" front=").append(front)
		.append(", [");
		for (int i = 0; i < elements.length; i++) {
			if (i != 0) {
				string.append(", ");
			}
			string.append(elements[i]);
		}
		string.append("]");
		return string.toString();
	}
}
```

æµ‹è¯•ï¼š
```
static void test2() {
	CircleQueue<Integer> queue = new CircleQueue<>();
	// capicaty=10 size=10 front=0, [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
	for (int i = 0; i < 10; i++) {
		queue.enQueue(i);
	}
	// capicaty=10 size=5 front=5, [null, null, null, null, null, 5, 6, 7, 8, 9]
	for (int i = 0; i < 5; i++) {
		queue.deQueue();
	}
	// capicaty=10 size=10 front=5, [10, 11, 12, 13, 14, 5, 6, 7, 8, 9]
	for (int i = 0; i < 5; i++) {
		queue.enQueue(i+10);
	}
	// capicaty=22 size=20 front=0, [5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, null, null]
	for (int i = 0; i < 10; i++) {
		queue.enQueue(i);
	}
	System.out.println(queue);
	while (!queue.isEmpty()) {
		System.out.println(queue.deQueue());
	}
}
```

# å¾ªç¯åŒç«¯é˜Ÿåˆ—
[å¾ªç¯åŒç«¯é˜Ÿåˆ—]()å¯ä»¥è¿›è¡Œä¸¤ç«¯æ·»åŠ ã€åˆ é™¤æ“ä½œçš„å¾ªç¯é˜Ÿåˆ—ï¼Œå®ç°æ€è·¯å¯ä»¥å¾ªç¯é˜Ÿåˆ—å’Œ[é“¾è¡¨](http://kevinyanggit.github.io/2020/10/20/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E9%93%BE%E8%A1%A8/)ä¸­çš„åŠ¨æ€æ•°ç»„ä¼˜åŒ–ã€‚

å¯¹äºä¸€ä¸ªé˜Ÿåˆ—ï¼š
![é˜Ÿåˆ—07](é˜Ÿåˆ—/é˜Ÿåˆ—07.png)
é˜Ÿå¤´å…¥æ ˆ22ï¼Œå› ä¸º `front` æŒ‡å‘çš„ä½ç½®æ˜¯é˜Ÿåˆ— `0` çš„ä½ç½®ï¼Œåœ¨ `front` çš„å·¦è¾¹å…¥æ ˆï¼Œä¹Ÿå°±ç›¸å½“äºåœ¨é˜Ÿåˆ— `-1` çš„ä½ç½®å…¥æ ˆ(`(front - 1) % elements.length`)ï¼š
![é˜Ÿåˆ—09](é˜Ÿåˆ—/é˜Ÿåˆ—09.png)

ä»£ç å®ç°ï¼š
```
public class CircleDeque<E> {
	private int front;
	private int size;
	private E[] elements;
	private static final int DEFAULT_CAPICITY = 10;
	
	public CircleDeque() {
		elements = (E[]) new Object[DEFAULT_CAPICITY];
	}
	
	public int size() {
		return size;
	}

	public boolean isEmpty() {
		return size == 0;
	}
	
	public void clear() {
		for (int i = 0; i < size; i++) {
			elements[Index(i)] = null;
		}
		size = 0;
		front = 0;
	}

	public void enQueueRear(E element) {
		ensureCapicity(size+1);
		elements[Index(size)] = element;
		size++;
	}

	public E deQueueFront() {
		E element = elements[front];
		elements[front] = null;
		front = Index(1);
		size--;
		return element;
	}

	public void enQueueFront(E element) {
		ensureCapicity(size+1);
		front = Index(-1);
		elements[front] = element;
		size++;
	}

	public E deQueueRear() {
		E element = elements[Index(size - 1)];
		elements[Index(size - 1)] = null;
		size--;
		return element;
	}

	public E front() {
		return elements[front];
	}

	public E rear() {
		return elements[Index(size - 1)];
	}
	
	private int Index(int index) {
		index += front;
		if (index < 0) {
			return index + elements.length;
		}
		return index - (elements.length > index ? 0 : elements.length);
	}
	
	private void ensureCapicity(int capicity) {
		int oldCapicity = elements.length;
		if (oldCapicity >= capicity) return;
		oldCapicity = oldCapicity + (oldCapicity >> 1);
		E[] newElements = (E[]) new Object[oldCapicity];
		for (int i = 0; i < elements.length; i++) {
			newElements[i] = elements[Index(i)];
		}
		elements = newElements;
		front = 0;
	}
	
	@Override
	public String toString() {
		StringBuilder string = new StringBuilder();
		string.append("capicity=").append(elements.length)
		.append(" size=").append(size)
		.append(" front=").append(front)
		.append(", [");
		for (int i = 0; i < elements.length; i++) {
			if (i != 0) {
				string.append(", ");
			}
			string.append(elements[i]);
		}
		string.append("]");
		return string.toString();
	}
}
```

æµ‹è¯•ï¼š
```
static void test3() {
	CircleDeque<Integer> queue = new CircleDeque<>();
	// capicity=22 size=20 front=20, [8, 7, 6, 5, 4, 3, 2, 1, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, null, null, 10, 9]
	for (int i = 0; i < 10; i++) {
		queue.enQueueFront(i + 1);
		queue.enQueueRear(i + 100);
	}
	// capicity=22 size=14 front=1, [null, 7, 6, 5, 4, 3, 2, 1, 100, 101, 102, 103, 104, 105, 106, null, null, null, null, null, null, null]
	for (int i = 0; i < 3; i++) {
		queue.deQueueFront();
		queue.deQueueRear();
	}
	
	// capicity=22 size=16 front=0, [11, 7, 6, 5, 4, 3, 2, 1, 100, 101, 102, 103, 104, 105, 106, 12, null, null, null, null, null, null]
	queue.enQueueFront(11);
	queue.enQueueRear(12);
	
	System.out.println(queue);
	while (!queue.isEmpty()) {
		System.out.println(queue.deQueueFront());
	}
}
```

# ç»ƒä¹ 
[225. ç”¨é˜Ÿåˆ—å®ç°æ ˆ](https://leetcode-cn.com/problems/implement-stack-using-queues/)

```
public class _225_ç”¨é˜Ÿåˆ—å®ç°æ ˆ {

    Queue<Integer> queue1;
    Queue<Integer> queue2;
    
    public _225_ç”¨é˜Ÿåˆ—å®ç°æ ˆ() {
        queue1 = new LinkedList<>();
        queue2 = new LinkedList<>();
    }
    
    /** å…ƒç´  x å…¥æ ˆ */
    public void push(int x) {
        queue2.add(x);
        while (!queue1.isEmpty()) {
            queue2.offer(queue1.poll());
        }
        Queue<Integer> temp = queue1;
        queue1 = queue2;
        queue2 = temp;
    }
    
    /** ç§»é™¤æ ˆé¡¶å…ƒç´  */
    public int pop() {
        return queue1.poll();
    }
    
    /** è·å–æ ˆé¡¶å…ƒç´  */
    public int top() {
        return queue1.peek();
    }
    
    /** è¿”å›æ ˆæ˜¯å¦ä¸ºç©º */
    public boolean empty() {
        return queue1.isEmpty();
    }
}
```

.
