---
title: åŠ¨æ€æ•°ç»„
date: 2020-10-15 14:41:12
tags: æ•°æ®ç»“æ„ä¸ç®—æ³•
---

[åŠ¨æ€æ•°ç»„](https://baike.baidu.com/item/%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84/10997983?fr=aladdin)æ˜¯æŒ‡åœ¨å£°æ˜æ—¶æ²¡æœ‰ç¡®å®šæ•°ç»„å¤§å°çš„æ•°ç»„ï¼Œå³å¿½ç•¥åœ†æ‹¬å·ä¸­çš„ä¸‹æ ‡ï¼›å½“è¦ç”¨å®ƒæ—¶ï¼Œå¯éšæ—¶ç”¨ReDimè¯­å¥é‡æ–°æŒ‡å‡ºæ•°ç»„çš„å¤§å°ã€‚ä½¿ç”¨åŠ¨æ€æ•°ç»„çš„ä¼˜ç‚¹æ˜¯å¯ä»¥æ ¹æ®ç”¨æˆ·éœ€è¦ï¼Œæœ‰æ•ˆåˆ©ç”¨å­˜å‚¨ç©ºé—´ã€‚

<!-- more -->

# æ•°æ®ç»“æ„

[æ•°æ®ç»“æ„](https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/1450?fr=aladdin)æ˜¯è®¡ç®—æœºå­˜å‚¨ã€ç»„ç»‡æ•°æ®çš„æ–¹å¼ã€‚æ•°æ®ç»“æ„æ˜¯æŒ‡ç›¸äº’ä¹‹é—´å­˜åœ¨ä¸€ç§æˆ–å¤šç§ç‰¹å®šå…³ç³»çš„æ•°æ®å…ƒç´ çš„é›†åˆã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œç²¾å¿ƒé€‰æ‹©çš„æ•°æ®ç»“æ„å¯ä»¥å¸¦æ¥æ›´é«˜çš„è¿è¡Œæˆ–è€…å­˜å‚¨æ•ˆç‡ã€‚æ•°æ®ç»“æ„å¾€å¾€åŒé«˜æ•ˆçš„æ£€ç´¢ç®—æ³•å’Œç´¢å¼•æŠ€æœ¯æœ‰å…³ã€‚

## æ•°æ®çš„é€»è¾‘ç»“æ„
æŒ‡åæ˜ æ•°æ®å…ƒç´ ä¹‹é—´çš„é€»è¾‘å…³ç³»çš„æ•°æ®ç»“æ„ï¼Œå…¶ä¸­çš„é€»è¾‘å…³ç³»æ˜¯æŒ‡æ•°æ®å…ƒç´ ä¹‹é—´çš„å‰åé—´å…³ç³»ï¼Œè€Œä¸ä»–ä»¬åœ¨è®¡ç®—æœºä¸­çš„å­˜å‚¨ä½ç½®æ— å…³ã€‚é€»è¾‘ç»“æ„åŒ…æ‹¬ï¼š
1. é›†åˆï¼šæ•°æ®ç»“æ„ä¸­çš„å…ƒç´ ä¹‹é—´é™¤äº†â€œåŒå±ä¸€ä¸ªé›†åˆâ€ çš„ç›¸äº’å…³ç³»å¤–ï¼Œåˆ«æ— å…¶ä»–å…³ç³»ï¼›
2. çº¿æ€§ç»“æ„ï¼šæ•°æ®ç»“æ„ä¸­çš„å…ƒç´ å­˜åœ¨ä¸€å¯¹ä¸€çš„ç›¸äº’å…³ç³»ï¼›  
3. æ ‘å½¢ç»“æ„ï¼šæ•°æ®ç»“æ„ä¸­çš„å…ƒç´ å­˜åœ¨ä¸€å¯¹å¤šçš„ç›¸äº’å…³ç³»ï¼› 
4. å›¾å½¢ç»“æ„ï¼šæ•°æ®ç»“æ„ä¸­çš„å…ƒç´ å­˜åœ¨å¤šå¯¹å¤šçš„ç›¸äº’å…³ç³»ã€‚
![åŠ¨æ€æ•°ç»„02](åŠ¨æ€æ•°ç»„/åŠ¨æ€æ•°ç»„02.png)
çº¿æ€§ç»“æ„åŒ…æ‹¬ï¼šçº¿æ€§è¡¨ã€æ•°ç»„ã€é“¾è¡¨ã€æ ˆã€é˜Ÿåˆ—å’Œå“ˆå¸Œè¡¨ã€‚  
æ ‘å½¢ç»“æ„åŒ…æ‹¬ï¼šäºŒå‰æ ‘ã€AVLæ ‘ã€çº¢é»‘æ ‘ã€Bæ ‘ã€å †ã€Trieã€å“ˆå¤«æ›¼æ ‘å’Œå¹¶æŸ¥é›†ã€‚  
å›¾å½¢ç»“æ„åŒ…æ‹¬ï¼šé‚»æ¥çŸ©é˜µå’Œé‚»æ¥è¡¨ã€‚

## å¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼š
![åŠ¨æ€æ•°ç»„01](åŠ¨æ€æ•°ç»„/åŠ¨æ€æ•°ç»„01.png)

## çº¿æ€§è¡¨
[çº¿æ€§è¡¨](https://baike.baidu.com/item/%E7%BA%BF%E6%80%A7%E8%A1%A8/3228081?fr=aladdin)æ˜¯æœ€åŸºæœ¬ã€æœ€ç®€å•ã€ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„ä¸€ç§æ•°æ®ç»“æ„ã€‚çº¿æ€§è¡¨ï¼ˆlinear listï¼‰æ˜¯æ•°æ®ç»“æ„çš„ä¸€ç§ï¼Œä¸€ä¸ªçº¿æ€§è¡¨æ˜¯nä¸ªå…·æœ‰ç›¸åŒç‰¹æ€§çš„æ•°æ®å…ƒç´ çš„æœ‰é™åºåˆ—ã€‚

![åŠ¨æ€æ•°ç»„03](åŠ¨æ€æ•°ç»„/åŠ¨æ€æ•°ç»„03.png)
a1 æ˜¯é¦–èŠ‚ç‚¹ï¼ˆé¦–å…ƒç´ ï¼‰ï¼Œan æ˜¯ä¸ºèŠ‚ç‚¹ï¼ˆå°¾å…ƒç´ ï¼‰ã€‚  
a1 æ˜¯ a2 çš„å‰é©±ï¼Œa2 æ˜¯ a1 çš„åç»§ã€‚

psï¼š[ä»€ä¹ˆæ˜¯çº¿æ€§è¡¨](http://data.biancheng.net/view/157.html)

## æ•°ç»„
[æ•°ç»„](https://baike.baidu.com/item/%E6%95%B0%E7%BB%84/3794097?fr=aladdin)æ˜¯ä¸€ç§é¡ºåºå­˜å‚¨çš„çº¿æ€§è¡¨ï¼Œæ‰€æœ‰å…ƒç´ çš„å†…å­˜åœ°å€æ˜¯è¿ç»­çš„ã€‚ä¸€ç»´æ•°ç»„æ˜¯æœ€ç®€å•çš„æ•°ç»„ï¼Œå…¶é€»è¾‘ç»“æ„æ˜¯çº¿æ€§è¡¨ã€‚
```
int[] array = new int[]{11, 22, 33};
```
![åŠ¨æ€æ•°ç»„04](åŠ¨æ€æ•°ç»„/åŠ¨æ€æ•°ç»„04.png)

åœ¨å¾ˆå¤šç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæ•°ç»„éƒ½æœ‰ä¸ªè‡´å‘½çš„ç¼ºç‚¹ï¼Œæ— æ³•åŠ¨æ€ä¿®æ”¹å®¹é‡ã€‚æ€ä¹ˆå®ç°ä¸€ä¸ªå®¹é‡å¯ä»¥åŠ¨æ€ä¿®æ”¹çš„æ•°ç»„å‘¢ï¼ŸğŸ‘‡

psï¼š[ä»€ä¹ˆæ˜¯æ•°ç»„](http://data.biancheng.net/view/181.html)

# åŠ¨æ€æ•°ç»„

## æ¥å£è®¾è®¡
```
public class ArrayList<E> {
	
	/**
	 * æ¸…é™¤æ‰€æœ‰å…ƒç´ 
	 */
	public void clear() {}

	/**
	 * å…ƒç´ çš„æ•°é‡
	 * @return
	 */
	public int size() {}

	/**
	 * æ˜¯å¦ä¸ºç©º
	 * @return
	 */
	public boolean isEmpty() {}

	/**
	 * æ˜¯å¦åŒ…å«æŸä¸ªå…ƒç´ 
	 * @param element
	 * @return
	 */
	public boolean contains(E element) {}

	/**
	 * æ·»åŠ å…ƒç´ åˆ°å°¾éƒ¨
	 * @param element
	 */
	public void add(E element) {} 

	/**
	 * è·å–indexä½ç½®çš„å…ƒç´ 
	 * @param index
	 * @return
	 */
	public E get(int index) {}

	/**
	 * è®¾ç½®indexä½ç½®çš„å…ƒç´ 
	 * @param index
	 * @param element
	 * @return åŸæ¥çš„å…ƒç´ Öµ
	 */
	public E set(int index, E element) {}

	/**
	 * åœ¨indexä½ç½®æ’å…¥ä¸€ä¸ªå…ƒç´ 
	 * @param index
	 * @param element
	 */
	public void add(int index, E element) {}

	/**
	 * åˆ é™¤indexä½ç½®çš„å…ƒç´ 
	 * @param index
	 * @return
	 */
	public E remove(int index) {}

	/**
	 * æŸ¥çœ‹å…ƒç´ çš„ç´¢å¼•
	 * @param element
	 * @return
	 */
	public int indexOf(E element) {}
}
```

## å®ç°æ–¹æ¡ˆ
![åŠ¨æ€æ•°ç»„05](åŠ¨æ€æ•°ç»„/åŠ¨æ€æ•°ç»„05.png)

å®šä¹‰ size è®°å½•æ•°ç»„çš„å¤§å°ï¼Œå®šä¹‰ elements å­˜å‚¨å…ƒç´ ã€‚
```
public class ArrayList<E> {

	/*
	 * å…ƒç´ çš„æ•°é‡
	 */
	private int size;
	
    /*
	 * æ‰€æœ‰çš„å…ƒç´ 
	 */
	private E[] elements;
	
    /*
	 * é»˜è®¤å®¹é‡
	 */
	private static final int DEFAULT_CAPACITY = 10;
	
    /*
	 * æ„é€ æ–¹æ³•
	 */
	public ArrayList(int capacity) {
		capacity = (capacity < DEFAULT_CAPACITY) ? DEFAULT_CAPACITY : capacity;
		elements = (E[]) new Object[capacity];
	}
	
    /*
	 * æ„é€ æ–¹æ³•
	 */
	public ArrayList() {
		this(DEFAULT_CAPACITY);
	}
}
```

## æ·»åŠ å…ƒç´ 
![åŠ¨æ€æ•°ç»„06](åŠ¨æ€æ•°ç»„/åŠ¨æ€æ•°ç»„06.png)
æ·»åŠ æ–°å…ƒç´ ï¼Œå°±æ˜¯åœ¨ size å¤„æ·»åŠ æ–°å…ƒç´ ï¼Œä»£ç å®ç°ï¼š
```
public void add(int element) {
    elements[size++] = element;
}
```

## åˆ é™¤å…ƒç´ 
size ç­‰äº 7ï¼Œindex ç­‰äº 3ï¼š
![åŠ¨æ€æ•°ç»„07](åŠ¨æ€æ•°ç»„/åŠ¨æ€æ•°ç»„07.png)
ä» `index + 1` å¤„å¼€å§‹ä¾æ¬¡å‘å‰ç§»åŠ¨ï¼Œæœ€åä¸€ä¸ªå…ƒç´ ä¸åšå¤„ç†ï¼ˆå› ä¸ºæ‰§è¡Œäº† `size--`ï¼Œæ‰€ä»¥æœ€åä¸€ä¸ªå…ƒç´ ä¸ä¼šè¢«å¤–ç•Œè®¿é—®åˆ°ï¼‰ï¼š
```
public E remove(int index) {
	int old = elements[index];
	for (int i = index + 1; i < size; i++) {
		elements[i - 1] = elements[i];
	} 
	elements[--size] = null;
	return old;
}
```

## æ’å…¥å…ƒç´ 
size ç­‰äº 5ï¼Œindex ç­‰äº 2ï¼š
![åŠ¨æ€æ•°ç»„08](åŠ¨æ€æ•°ç»„/åŠ¨æ€æ•°ç»„08.png)
ä» `size - 1` å¤„å¼€å§‹ä¾æ¬¡å‘åç§»åŠ¨ï¼Œæœ€åè¦†ç›– index å¤„çš„å…ƒç´ ï¼š
```
public void add(int index, int element) {
	for (int i = size; i > index; i--) {
		elements[i] = elements[i - 1];
	}
	elements[index] = element;
	size++;
}
```

## æ‰©å®¹
![åŠ¨æ€æ•°ç»„09](åŠ¨æ€æ•°ç»„/åŠ¨æ€æ•°ç»„09.png)
åˆ›å»ºæ–°çš„æ•°ç»„ï¼Œæ–°æ•°ç»„çš„å®¹é‡ä¸ºæ—§æ•°ç»„å®¹é‡çš„1.5å€ï¼ˆiOS 1.6å€, java 1.5å€ï¼‰ã€‚
```
private void ensureCapacity(int capacity) {
    int oldCapacity = elements.length;
    if (oldCapacity >= capacity) return;
    
    int newCapacity = oldCapacity + (oldCapacity >> 1); // >> è¡¨ç¤ºé™¤ä»¥2
    int[] newElements = new int[newCapacity];
    for (int i = 0; i < size; i++) {
        newElements[i] = elements[i];
    }
    elements = newElements;
}
```

## æ³›å‹
ä½¿ç”¨æ³›å‹æŠ€æœ¯å¯ä»¥è®©åŠ¨æ€æ•°ç»„æ›´åŠ é€šç”¨ï¼Œå¯ä»¥å­˜æ”¾ä»»ä½•æ•°æ®ç±»å‹ã€‚  
E è¡¨ç¤ºæ³›å‹ï¼š
```
public class ArrayList<E> {
	/*
	 * å…ƒç´ çš„æ•°é‡
	 */
	private int size;
	/*
	 * æ‰€æœ‰çš„å…ƒç´ 
	 */
	private E[] elements;
}
```

ä½¿ç”¨ Object åˆ›å»ºçš„æ•°ç»„å¯ä»¥å­˜æ”¾æ‰€æœ‰å¯¹è±¡ç±»å‹ï¼Œå› ä¸ºæ‰€æœ‰çš„ç±»éƒ½ç»§æ‰¿è‡ªObjectã€‚
```
elements = (E[]) new Object[capacity];
```

ç¤ºä¾‹ï¼š
```
ArrayList<Integer> ints = new ArrayList<>();
ints.add(10);

ArrayList<Object> objs = new ArrayList<>();
objs.add(10);
objs.add(new Person(10, "Tom"));
```

# å¯¹è±¡æ•°ç»„
æ•°ç»„ä¸­å­˜æ”¾çš„æ˜¯å¯¹è±¡åœ°å€ã€‚
![åŠ¨æ€æ•°ç»„10](åŠ¨æ€æ•°ç»„/åŠ¨æ€æ•°ç»„10.png)

åˆ é™¤å…ƒç´ æ—¶ï¼Œéœ€è¦å°†æ•°ç»„å¯¹åº”çš„ä½ç½®è®¾ä¸º nullï¼š
```
/**
* æ¸…é™¤æ‰€æœ‰å…ƒç´ 
*/
public void clear() {
	for (int i = 0; i < size; i++) {
		elements[i] = null;
	}
	size = 0;
}
/**
* åˆ é™¤indexä½ç½®çš„å…ƒç´ 
* @param index
* @return
*/
public E remove(int index) {
	rangeCheck(index);
	E old = elements[index];
	for (int i = index + 1; i < size; i++) {
		elements[i - 1] = elements[i];
	} 
	elements[--size] = null;
	return old;
}
```

å¦‚æœæ•°ç»„æ”¯æŒ nullï¼Œéœ€è¦ä¿®æ”¹ `indexOf()` æ–¹æ³•ï¼š
```
public int indexOf(E element) {
	if (element == null) {
		for (int i = 0; i < size; i++) {
			if (elements[i] == null) return i;
		}
	} else {
		for (int i = 0; i < size; i++) {
			//if (elements[i] == element) return i; // == æ¯”è¾ƒå†…å­˜åœ°å€
			if (elements[i].equals(element)) return i; // é‡å†™ equals()ã€‚Integer è°ƒç”¨ equals()ï¼Œå†…éƒ¨æ¯”è¾ƒçš„æ˜¯æ•°å€¼
		}	
	}
	return ELEMENT_NOT_FOUND;
}
```


