---
title: æ ˆ
date: 2020-10-30 11:53:52
tags: æ•°æ®ç»“æ„ä¸ç®—æ³•
---

[æ ˆï¼ˆstackï¼‰](https://baike.baidu.com/item/%E6%A0%88/12808149?fr=aladdin)åˆåå †æ ˆï¼Œå®ƒæ˜¯ä¸€ç§è¿ç®—å—é™çš„çº¿æ€§è¡¨ã€‚é™å®šä»…åœ¨è¡¨å°¾è¿›è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œçš„çº¿æ€§è¡¨ã€‚è¿™ä¸€ç«¯è¢«ç§°ä¸ºæ ˆé¡¶ï¼Œç›¸å¯¹åœ°ï¼ŒæŠŠå¦ä¸€ç«¯ç§°ä¸ºæ ˆåº•ã€‚å‘ä¸€ä¸ªæ ˆæ’å…¥æ–°å…ƒç´ åˆç§°ä½œè¿›æ ˆã€å…¥æ ˆæˆ–å‹æ ˆï¼Œå®ƒæ˜¯æŠŠæ–°å…ƒç´ æ”¾åˆ°æ ˆé¡¶å…ƒç´ çš„ä¸Šé¢ï¼Œä½¿ä¹‹æˆä¸ºæ–°çš„æ ˆé¡¶å…ƒç´ ï¼›ä»ä¸€ä¸ªæ ˆåˆ é™¤å…ƒç´ åˆç§°ä½œå‡ºæ ˆæˆ–é€€æ ˆï¼Œå®ƒæ˜¯æŠŠæ ˆé¡¶å…ƒç´ åˆ é™¤æ‰ï¼Œä½¿å…¶ç›¸é‚»çš„å…ƒç´ æˆä¸ºæ–°çš„æ ˆé¡¶å…ƒç´ ã€‚

<!-- more -->

# æ ˆ
æ ˆæ˜¯ä¸€ç§ç‰¹æ®Šçš„çº¿æ€§è¡¨ï¼Œæ™ºèƒ½åœ¨ä¸€ç«¯è¿›è¡Œæ“ä½œï¼š  
å¾€æ ˆä¸­æ·»åŠ å…ƒç´ çš„æ“ä½œï¼Œä¸€èˆ¬å«åš pushï¼Œå…¥æ ˆï¼›  
ä»æ ˆä¸­ç§»é™¤å…ƒç´ çš„æ“ä½œï¼Œä¸€èˆ¬å«åš popï¼Œå‡ºæ ˆï¼ˆåªèƒ½ç§»é™¤ç«™å®šå…ƒç´ ï¼Œä¹Ÿå«åšï¼šå¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼‰ï¼›  
åè¿›å…ˆå‡ºçš„åŸåˆ™ï¼ŒLast In First Out ~ LIFOã€‚  

![æ ˆ01](æ ˆ/æ ˆ01.png)

## æ¥å£è®¾è®¡
```
public class Stack<E> {
	/*
	 * æ¸…ç©º
	 */
	public void clear() {
		
	}
	/*
	 * å¤§å°
	 */
	public int size() {
		return 0;
	}
	/*
	 * åˆ¤ç©º
	 */
	public boolean isEmpty() {
		return false;
	}
	/*
	 * å…¥æ ˆ
	 */
	public void push(E element) {
		
	}
	/*
	 * å‡ºæ ˆ
	 */
	public E pop() {
		return null;
	}
	/*
	 * è·å–é¡¶éƒ¨å…ƒç´ 
	 */
	public E top() {
		return null;
	}
}
```

å› ä¸ºåŠ¨æ€æ•°ç»„å’ŒåŒå‘é“¾è¡¨åœ¨æ·»åŠ åˆ é™¤éšåä¸€ä¸ªå…ƒç´ çš„å¤æ‚åº¦éƒ½æ˜¯ O(1) çº§åˆ«ï¼Œæ‰€ä»¥è¿™ä¸¤ç§æ•°æ®ç»“æ„éƒ½å¯ä»¥ç”¨æ¥å®ç°æ ˆã€‚ä¸‹é¢æ˜¯é‡‡ç”¨åŠ¨æ€æ•°ç»„å®ç°çš„æ ˆã€‚
![æ ˆ02](æ ˆ/æ ˆ02.png)

## å®ç°-ç»§æ‰¿
é‡‡ç”¨ç»§æ‰¿çš„æ–¹å¼å®ç°æ ˆï¼Œç»§æ‰¿ ArrayList å®ç°ï¼š
```
import com.yq.list.ArrayList;

public class Stack<E> extends ArrayList<E>{
	/*
	 * å…¥æ ˆ
	 */
	public void push(E element) {
		add(element);
	}
	/*
	 * å‡ºæ ˆ
	 */
	public E pop() {
		return remove(size-1);
	}
	/*
	 * è·å–é¡¶éƒ¨å…ƒç´ 
	 */
	public E top() {
		return get(size-1);
	}
}
```

`clear()`ã€`size()`å’Œ`isEmpty()` çˆ¶ç±»å·²ç»å®ç°äº†ã€‚

æµ‹è¯•ï¼š
```
public static void main(String[] args) {
	Stack<Integer> stack = new Stack<>();
	stack.push(1);
	stack.push(2);
	stack.push(3);
	stack.push(4);
	
	while (!stack.isEmpty()) {
		System.out.println(stack.pop());
	}
}
```

æ‰“å°ç»“æœï¼š
```
4
3
2
1
```

ç»§æ‰¿å¯ä»¥å®ç°æ ˆçš„æ•ˆæœï¼Œä½†æ˜¯å´å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼šstack å¯ä»¥è®¿é—®åˆ° ArrayList æ‰€æœ‰çš„å¼€æ”¾æ¥å£ï¼Œ`stack.add()`ã€`stack.remove()` ç­‰ã€‚è§£å†³æ–¹æ¡ˆğŸ‘‡ã€‚

## å®ç°-ç»„åˆ
é‡‡ç”¨ç»„åˆçš„æ–¹å¼å®ç°æ ˆï¼Œå®ç°ï¼š
```
public class Stack2<E> {
	ArrayList<E> list = new ArrayList<>();
	/*
	 * æ¸…ç©º
	 */
	public void clear() {
		list.clear();
	}
	/*
	 * å¤§å°
	 */
	public int size() {
		return list.size();
	}
	/*
	 * åˆ¤ç©º
	 */
	public boolean isEmpty() {
		return list.isEmpty();
	}
	/*
	 * å…¥æ ˆ
	 */
	public void push(E element) {
		list.add(element);
	}
	/*
	 * å‡ºæ ˆ
	 */
	public E pop() {
		return list.remove(list.size()-1);
	}
	/*
	 * è·å–é¡¶éƒ¨å…ƒç´ 
	 */
	public E top() {
		return list.get(list.size()-1);
	}
}
```

æµ‹è¯•ï¼š
```
static void testStack2() {
	Stack<Integer> stack = new Stack<>();
	stack.push(1);
	stack.push(2);
	stack.push(3);
	stack.push(4);
	
	while (!stack.isEmpty()) {
		System.out.println(stack.pop());
	}
}

public static void main(String[] args) {
	testStack2();
}
```

æ‰“å°ç»“æœï¼š
```
4
3
2
1
```

## åº”ç”¨
æ¸¸è§ˆå™¨çš„å‰è¿›å’Œåé€€å°±æ˜¯é€šè¿‡æ ˆæ¥å®ç°çš„ï¼š

ä¾æ¬¡è®¿é—® jd.comã€qq.com å’Œ baidu.comï¼š
![æ ˆ03](æ ˆ/æ ˆ03.png)
åé€€
![æ ˆ04](æ ˆ/æ ˆ04.png)
åé€€
![æ ˆ05](æ ˆ/æ ˆ05.png)
å‰è¿›
![æ ˆ06](æ ˆ/æ ˆ06.png)
è®¿é—® taobao.com
![æ ˆ07](æ ˆ/æ ˆ07.png)

ç±»ä¼¼åœºæ™¯ï¼šè½¯ä»¶çš„æ’¤é”€ã€æ¢å¤åŠŸèƒ½ã€‚

## æºç åˆ†æ
Stack ç»§æ‰¿è‡ª Vectorï¼ŒVector ä¹Ÿæ˜¯åŠ¨æ€æ•°ç»„ï¼Œç›¸è¾ƒäº ArrayListï¼ŒVector æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚
```
public class Stack<E> extends Vector<E> {
	/**
     * Creates an empty Stack.
     */
    public Stack() {
    }

    /**
     * Pushes an item onto the top of this stack. This has exactly
     * the same effect as:
     * <blockquote><pre>
     * addElement(item)</pre></blockquote>
     *
     * @param   item   the item to be pushed onto this stack.
     * @return  the {@code item} argument.
     * @see     java.util.Vector#addElement
     */
    public E push(E item) {
        addElement(item);

        return item;
    }

    /**
     * Removes the object at the top of this stack and returns that
     * object as the value of this function.
     *
     * @return  The object at the top of this stack (the last item
     *          of the {@code Vector} object).
     * @throws  EmptyStackException  if this stack is empty.
     */
    public synchronized E pop() {
        E       obj;
        int     len = size();

        obj = peek();
        removeElementAt(len - 1);

        return obj;
    }

    /**
     * Looks at the object at the top of this stack without removing it
     * from the stack.
     *
     * @return  the object at the top of this stack (the last item
     *          of the {@code Vector} object).
     * @throws  EmptyStackException  if this stack is empty.
     */
    public synchronized E peek() {
        int     len = size();

        if (len == 0)
            throw new EmptyStackException();
        return elementAt(len - 1);
    }

    /**
     * Tests if this stack is empty.
     *
     * @return  {@code true} if and only if this stack contains
     *          no items; {@code false} otherwise.
     */
    public boolean empty() {
        return size() == 0;
    }

	...
}
```

# ç»ƒä¹ 
## æœ‰æ•ˆçš„æ‹¬å·
[20. æœ‰æ•ˆçš„æ‹¬å·](https://leetcode-cn.com/problems/valid-parentheses/)

1. é‡è§å·¦å­—ç¬¦ï¼Œå°†å·¦å­—ç¬¦å…¥æ ˆï¼›
2. é‡è§å³å­—ç¬¦ï¼š  
   å¦‚æœå±•ç¤ºç©ºçš„ï¼Œè¯´æ˜æ‹¬å·æ— æ•ˆï¼›  
   å¦‚æœç«™ä¸ä¸ºç©ºï¼Œå°†æ ˆé¡¶å­—ç¬¦å‡ºå‡ºæ ˆï¼Œä¸å³å­—ç¬¦åŒ¹é…ï¼š  
   -> å¦‚æœå·¦å³å­—ç¬¦ä¸åŒ¹é… -> æ‹¬å·æ— æ•ˆï¼›  
   -> å¦‚æœå·¦å³å­—ç¬¦åŒ¹é… -> ç»§ç»­æ‰«æä¸‹ä¸€ä¸ªå­—ç¬¦ï¼›
3. æ‰€æœ‰å­—ç¬¦æ‰«æå®Œæ¯•åï¼š  
   æ ˆä¸ºç©º -> æ‹¬å·æœ‰æ•ˆï¼›  
   æ ˆä¸ä¸ºç©º -> æ‹¬å·æ— æ•ˆï¼›
```
public boolean isValid(String s) {
	Stack<Character> stack = new Stack<>();
	
	for (int i = 0; i < s.length(); i++) {
		char c = s.charAt(i);
		if (c == '(' || c == '[' || c == '{') {
			stack.push(c);
		} else {
			if (stack.isEmpty()) return false;
			
			char left = stack.pop();
			if (left == '(' && c != ')') return false;
			if (left == '[' && c != ']') return false;
			if (left == '{' && c != '}') return false;
		}	
	}
	
	return stack.isEmpty();
}
```

## æ‹¬å·çš„åˆ†æ•°
[856. æ‹¬å·çš„åˆ†æ•°](https://leetcode-cn.com/problems/score-of-parentheses/)  
[æ‹¬å·çš„åˆ†æ•° - æ–¹æ³•äºŒï¼šæ ˆ](https://leetcode-cn.com/problems/score-of-parentheses/solution/gua-hao-de-fen-shu-fang-fa-er-zhan-by-yang-h6/)
```
/*
 * ()ã€(()(ã€()( å¯¹äºåªæœ‰ä¸€å±‚æ‹¬å·çš„æƒ…å†µï¼Œtop == 0ï¼š
 * 1. å–å‡º top = pop();
 * 2. ä¿®æ”¹ top = 1ï¼Œå¹¶ push(top);
 * 3. åˆ¤æ–­å‰ä¸€é¡¹æ˜¯å¦å¯åŠ 
 *  
 * ç¤ºä¾‹ï¼š
 * ( : [0] ~> () : [1] 
 * (()( : [0, 1, 0] ~> (()() : [0, 2]
 * ()(ï¼š[1, 0] ~> ()()ï¼š[2]
 */
 /* 
 * (())ã€(()()) å¯¹äºå¤–å±‚æœ‰æ‹¬å·çš„æƒ…å†µï¼Œtop != 0ï¼š
 * 1. å–å‡º top = pop();
 * 2. ä¿®æ”¹ top *=2ï¼Œå¹¶ push(top);
 * 3. åˆ¤æ–­å‰ä¸€é¡¹æ˜¯å¦å¯åŠ ï¼›
 * 
 * ç¤ºä¾‹ï¼š
 * (() : [0, 1] ~> (()) : [2]
 * (()() : [0, 1, 1] ~> (()()) : [4]
 * (()(( : [0, 1, 0, 0] ~> (()(() : [0, 1, 1]
 */
static int scoreOfParentheses6(String S) {
	Stack<Integer> stack = new Stack<>();
	stack.push(0);
	for (char c : S.toCharArray()) {
		if (c == '(') {
			stack.push(0);
		} else {
			int top = stack.pop();
			int left = stack.pop();
			stack.push(left + Math.max(2 * top, 1));
		}
	}
	return stack.pop();
}
```

## é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼
[é€†æ³¢å…°è¡¨è¾¾å¼](https://baike.baidu.com/item/%E9%80%86%E6%B3%A2%E5%85%B0%E8%A1%A8%E8%BE%BE%E5%BC%8F/9841727?fr=aladdin)
![æ ˆ08](æ ˆ/æ ˆ08.png)
[150. é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼](https://leetcode-cn.com/problems/evaluate-reverse-polish-notation/)
```
static int evalRPN(String[] tokens) {
	Stack<Integer> stack = new Stack<>(); 
	for (String s : tokens) {
		if (s == "+") {
			stack.push(stack.pop() + stack.pop());
		} else if (s == "-") {
			stack.push(-(stack.pop() - stack.pop()));
		} else if (s == "*") {
			stack.push(stack.pop() * stack.pop());
		} else if (s == "/") {
			Integer s1 = stack.pop();
			stack.push(stack.pop() / s1);
		} else {
			stack.push(Integer.valueOf(s));
		}
	}
	return stack.pop();
}
```

psï¼š  
[å‰ç¼€è¡¨è¾¾å¼](https://baike.baidu.com/item/%E5%89%8D%E7%BC%80%E8%A1%A8%E8%BE%BE%E5%BC%8F)  
[ä¸­ç¼€è¡¨è¾¾å¼](https://baike.baidu.com/item/%E4%B8%AD%E7%BC%80%E8%A1%A8%E8%BE%BE%E5%BC%8F)  
[åç¼€è¡¨è¾¾å¼](https://baike.baidu.com/item/%E9%80%86%E6%B3%A2%E5%85%B0%E5%BC%8F/128437?fromtitle=%E5%90%8E%E7%BC%80%E8%A1%A8%E8%BE%BE%E5%BC%8F&fromid=6160580)
## åŸºæœ¬è®¡ç®—å™¨
[224. åŸºæœ¬è®¡ç®—å™¨](https://leetcode-cn.com/problems/basic-calculator/)
```
static int calculate(String s) {
	Stack<Integer> stack = new Stack<>();
	int res = 0;
	int operand = 0; //ä½æ•°
	int sign = 1; //+ï¼š1ï¼Œ-ï¼š-1
	
	for (char c : s.toCharArray()) {
		if (c == ' ')
			continue;
		
		if (c >= '0' && c <= '9') {
			operand = operand*10 + (c - '0');
		} else if (c == '+' || c == '-') {
			res += operand*sign;
			operand = 0; // é‡ç½®ä½æ•°
			sign = c == '+' ? 1 : -1; // é‡ç½®ç¬¦å·
			
		} else if (c == '(') {
			stack.push(res);
			stack.push(sign);
			res = 0;
			sign = 1;
		} else { // c == ')'
			res += operand*sign;
			operand = 0;
			
			int a = stack.pop(); //ä¸Šä¸€æ¬¡çš„ sign
			int b = stack.pop(); //ä¸Šä¸€æ¬¡çš„ sum
			
			res += b*a;
		}
	}
	return res + sign * operand;
}
```

