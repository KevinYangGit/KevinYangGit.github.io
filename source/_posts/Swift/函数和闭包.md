---
title: å‡½æ•°å’Œé—­åŒ…
date: 2023-03-15 15:04:35
tags: Swift
---

* [å‡½æ•°çš„å®šä¹‰](#å‡½æ•°çš„å®šä¹‰)
* [å‡½æ•°å®é™…å‚æ•°æ ‡ç­¾å’Œå½¢å¼å‚æ•°å](#å‡½æ•°å®é™…å‚æ•°æ ‡ç­¾å’Œå½¢å¼å‚æ•°å)
* [å‡½æ•°ç±»å‹å’Œå†…åµŒå‡½æ•°](#å‡½æ•°ç±»å‹å’Œå†…åµŒå‡½æ•°)
* [é—­åŒ…](#é—­åŒ…)
* [é«˜é˜¶å‡½æ•°](#é«˜é˜¶å‡½æ•°)
* [å‡½æ•°å¼ç¼–ç¨‹](#å‡½æ•°å¼ç¼–ç¨‹)
* [å¹¶è¡Œ](#å¹¶è¡Œ)

<!-- more -->

## å‡½æ•°çš„å®šä¹‰

å‡½æ•°æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ä»£ç å—ï¼Œç”¨æ¥æ‰§è¡Œç‰¹å®šçš„ä»»åŠ¡ã€‚é€šè¿‡ç»™å‡½æ•°ä¸€ä¸ªåå­—æ¥å®šä¹‰å®ƒçš„åŠŸèƒ½ï¼Œå¹¶ä¸”åœ¨éœ€è¦çš„æ—¶å€™ï¼Œé€šè¿‡è¿™ä¸ªåå­—æ¥â€œè°ƒç”¨â€å‡½æ•°æ‰§è¡Œå®ƒçš„ä»»åŠ¡ã€‚

### å®šä¹‰å’Œè°ƒç”¨å‡½æ•°

åœ¨å®šä¹‰ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªè¢«å‘½åçš„åˆ†ç±»çš„å€¼ï¼Œä½œä¸ºå‡½æ•°çš„è¾“å…¥ï¼ˆå½¢å¼å‚æ•°ï¼‰ã€‚åœ¨å‡½æ•°å®Œæˆåï¼Œä¹Ÿå¯ä»¥å®šä¹‰å°†è¦ä¼ å›çš„å€¼ä½œä¸ºè¾“å‡ºçš„ç±»å‹ï¼ˆè¿”å›ç±»å‹ï¼‰ã€‚

æ¯ä¸€ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªå‡½æ•°åï¼Œå®ƒæè¿°äº†å‡½æ•°æ‰§è¡Œçš„ä»»åŠ¡ã€‚è¦ä½¿ç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥é€šè¿‡â€œè°ƒç”¨â€å‡½æ•°çš„åå­—å¹¶ä¸”ä¼ å…¥ç¬¦åˆå‡½æ•°å½¢å¼å‚æ•°ç±»å‹çš„è¾“å…¥å€¼ï¼ˆå®é™…å‚æ•°ï¼‰æ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚ç»™å‡½æ•°æä¾›çš„å®é™…å‚æ•°çš„é¡ºåºå¿…é¡»ç¬¦åˆå‡½æ•°çš„å½¢å¼å‚æ•°åˆ—è¡¨é¡ºåºã€‚

```swift
import Foundation

func greet(person: String) -> String {
    let greeting = "Hello, " + person + "!"
    return greeting
}

greet(person: "zhangsan")
// Prints 'Hello, zhangsan!'
```

### æ— å½¢å¼å‚æ•°çš„å‡½æ•°

å‡½æ•°æ²¡æœ‰è¦æ±‚å¿…é¡»è¾“å…¥ä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥æ²¡æœ‰å½¢å¼å‚æ•°ã€‚å‡½æ•°çš„å®šä¹‰éœ€è¦åœ¨åå­—åè¾¹åŠ ä¸€ä¸ªåœ†æ‹¬å·`()`ï¼Œå³ä½¿åœ¨ä¸æ¥å—å½¢å¼å‚æ•°æ—¶ä¹Ÿå¾—è¿™æ ·åšã€‚å½“å‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™åŒæ ·è¦åœ¨å‡½æ•°çš„åå­—åè¾¹åŠ ä¸€ä¸ªç©ºçš„åœ†æ‹¬å·`()`ã€‚

```swift
func sayHello() -> String {
    return "hello"
}
print(sayHello())
// Prints 'hello'
```

### å¤šå½¢å¼å‚æ•°çš„å‡½æ•°

å‡½æ•°å¯ä»¥è¾“å…¥å¤šä¸ªå½¢å¼å‚æ•°ï¼Œå†™åœ¨å‡½æ•°åè¾¹çš„åœ†æ‹¬å·å†…ï¼Œç”¨é€—å·åˆ†éš”ã€‚

```swift
func greetAgain(person: String) -> String {
    return "Hello again, \(person)"
}

func greet(person: String) -> String {
    return "Hello, \(person)"
}

func greet(person: String, alreadyGreeted: Bool) -> String {
    if alreadyGreeted {
        return greetAgain(person: person)
    } else {
        return greet(person: person)
    }
}

print(greet(person: "Kevin", alreadyGreeted: true))
// Prints 'Hello again, Kevin'
```

### æ— è¿”å›å€¼çš„å‡½æ•°

å‡½æ•°å®šä¹‰ä¸­æ²¡æœ‰è¦æ±‚å¿…é¡»æœ‰ä¸€ä¸ªè¿”å›ç±»å‹ã€‚ä¸éœ€è¦è¿”å›å€¼ï¼Œå‡½æ•°åœ¨å®šä¹‰çš„æ—¶å€™å°±æ²¡æœ‰åŒ…å«è¿”å›ç®­å¤´`->`æˆ–è€…è¿”å›ç±»å‹ã€‚

ä¸¥æ ¼æ¥è®²ï¼Œå°½ç®¡å‡½æ•° `greet(person:)`æ²¡æœ‰å®šä¹‰è¿”å›å€¼ï¼Œä½†æ˜¯å®ƒè¿˜æ˜¯æœ‰ä¸€ä¸ªè¿”å›å€¼çš„ã€‚æ²¡æœ‰å®šä¹‰è¿”å›ç±»å‹çš„å‡½æ•°å®é™…ä¸Šä¼šè¿”å›ä¸€ä¸ªç‰¹æ®Šçš„ç±»å‹ `Void`ï¼Œå®ƒæ˜¯ä¸€ä¸ªç©ºçš„å…ƒç»„ï¼Œä½œç”¨ç›¸å½“äºæ²¡æœ‰å…ƒç´ çš„å…ƒç»„ï¼Œå¯ä»¥å†™ä½œ `()`ã€‚

```swift
func greet(person: String) {
    print("Hello, \(person)")
}

print(greet(person: "kevin"))
```

æ‰“å°ç»“æœï¼š

```js
Hello, kevin
()
```

### å¤šè¿”å›å€¼çš„å‡½æ•°

ä¸ºäº†è®©å‡½æ•°è¿”å›å¤šä¸ªå€¼ä½œä¸ºä¸€ä¸ªå¤åˆçš„è¿”å›å€¼ï¼Œå¯ä»¥ä½¿ç”¨å…ƒç»„ç±»å‹ä½œä¸ºè¿”å›ç±»å‹ã€‚

```swift
func minMax(array: [Int]) -> (min: Int, max: Int)? {
    var currentMin = array[0]
    var currentMax = array[0]
    for value in array[1..<array.count] {
        if value < currentMin {
            currentMin = value
        } else if value > currentMax {
            currentMax = value
        }
    }
    return (currentMin, currentMax)
}

if let bounds = minMax(array: [8, -6, 2, 109, 3, 711]) {
    print("min is \(bounds.min) and max is \(bounds.max)")
}
// Prints 'min is -6 and max is 711'
```

### å¯é€‰å…ƒç»„è¿”å›ç±»å‹

å¦‚æœå‡½æ•°è¿”å›çš„å…ƒç»„å¯èƒ½â€œæ²¡æœ‰å€¼â€ï¼Œå¯ä»¥ç”¨ä¸€ä¸ª**å¯é€‰å…ƒç»„è¿”å›ç±»å‹**æ¥è¡¨ç¤ºæ•´ä¸ªå…ƒç»„å¯èƒ½æ˜¯ `nil`ã€‚å†™æ³•æ˜¯åœ¨å¯é€‰å…ƒç»„ç±»å‹çš„åœ†æ‹¬å·åè¾¹æ·»åŠ ä¸€ä¸ªé—®å·`?`ï¼Œä¾‹å¦‚ï¼š`(Int, Int)?` æˆ–è€… `(String, Int, Bool)?`ã€‚

```swift
func minMax(array: [Int]) -> (min: Int, max: Int)? {
    if array.count == 0 {
        return nil
    }
    var currentMin = array[0]
    var currentMax = array[0]
    for value in array[1..<array.count] {
        if value < currentMin {
            currentMin = value
        } else if value > currentMax {
            currentMax = value
        }
    }
    return (currentMin, currentMax)
}

print(minMax(array: []))
// Prints 'nil'
```

### éšå¼è¿”å›çš„å‡½æ•°

å¦‚æœæ•´ä¸ªå‡½æ•°ä½“æ˜¯ä¸€ä¸ªå•ä¸€è¡¨è¾¾å¼ï¼Œé‚£ä¹ˆå‡½æ•°éšå¼è¿”å›è¿™ä¸ªè¡¨è¾¾å¼ï¼Œä¸éœ€è¦ return å…³é”®å­—ã€‚

```swift
func greeting(for person: String) -> String {
    "Hello, " + person + "!"
}
print(greeting(for: "Kevin"))
// Prints 'Hello, Kevin!'
```

ä¸Šé¢çš„å†™æ³•ç­‰ä»·äºğŸ‘‡

```swift
func anotherGreeting(for person: String) -> String {
    return "Hello, " + person + "!"
}
print(anotherGreeting(for: "Kevin"))
// Prints 'Hello, Kevin!'
```

## å‡½æ•°å®é™…å‚æ•°æ ‡ç­¾å’Œå½¢å¼å‚æ•°å

å½¢å¼å‚æ•°ï¼šå€¼å½¢å¼å‚æ•°ã€å˜é‡å½¢å¼å‚æ•°ã€‚å‡½æ•°æˆ–è¿‡ç¨‹**å®šä¹‰æ—¶çš„å‚æ•°**ä¸ºå½¢å¼å‚æ•°ã€‚
å®é™…å‚æ•°ï¼šå‡½æ•°æˆ–è¿‡ç¨‹**è°ƒç”¨æ—¶çš„å‚æ•°**ä¸ºå®é™…å‚æ•°ã€‚

### å®å‚æ ‡ç­¾å’Œå½¢å‚å

æ¯ä¸€ä¸ªå‡½æ•°çš„**å½¢å¼å‚æ•°**éƒ½åŒ…å«**å®é™…å‚æ•°æ ‡ç­¾**å’Œ**å½¢å¼å‚æ•°å**ã€‚å®é™…å‚æ•°æ ‡ç­¾ç”¨åœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼Œåœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™æ¯ä¸€ä¸ª**å®é™…å‚æ•°**å‰è¾¹éƒ½è¦å†™**å®é™…å‚æ•°æ ‡ç­¾**ã€‚å½¢å¼å‚æ•°åç”¨åœ¨å‡½æ•°çš„å®ç°å½“ä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå½¢å¼å‚æ•°ä½¿ç”¨**å½¢å¼å‚æ•°å**ä½œä¸º**å®é™…å‚æ•°æ ‡ç­¾**ã€‚æ‰€æœ‰çš„å½¢å¼å‚æ•°å¿…é¡»æœ‰å”¯ä¸€çš„åå­—ã€‚å°½ç®¡å¤šä¸ªå½¢å¼å‚æ•°æ‹¥æœ‰ç›¸åŒçš„å®é™…å‚æ•°æ ‡ç­¾ä¹Ÿæ˜¯æœ‰å¯èƒ½çš„ï¼Œä½†æ˜¯å”¯ä¸€çš„å®é™…å‚æ•°æ ‡ç­¾æœ‰åŠ©äºè®©ä»£ç æ›´åŠ æ˜“è¯»ã€‚

å‚æ•°ç”±å½¢å¼å‚æ•°åä»£æ›¿å®é™…å‚æ•°æ ‡ç­¾ğŸ‘‡

![01](../Swift/å‡½æ•°å’Œé—­åŒ…/01.png)

```swift
func someFunction(ã€å½¢å¼å‚æ•°åã€‘: Int, ã€å½¢å¼å‚æ•°åã€‘: Int) {
    print("\(ã€å½¢å¼å‚æ•°åã€‘), \(ã€å½¢å¼å‚æ•°åã€‘)")
}

someFunction(ã€å½¢å¼å‚æ•°åã€‘ï¼šã€å®é™…å‚æ•°ã€‘, ã€å½¢å¼å‚æ•°åã€‘ï¼šã€å®é™…å‚æ•°ã€‘)
```

### æŒ‡å®šå®é™…å‚æ•°æ ‡ç­¾

åœ¨æä¾›å½¢å¼å‚æ•°åä¹‹å‰å†™å®é™…å‚æ•°æ ‡ç­¾ï¼Œç”¨ç©ºæ ¼åˆ†éš”ã€‚å¦‚æœä¸ºä¸€ä¸ªå½¢å¼å‚æ•°æä¾›äº†å®é™…å‚æ•°æ ‡ç­¾ï¼Œé‚£ä¹ˆè¿™ä¸ªå®é™…å‚æ•°å°±å¿…é¡»åœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™ä½¿ç”¨æ ‡ç­¾ã€‚å®é™…å‚æ•°æ ‡ç­¾çš„ä½¿ç”¨èƒ½å¤Ÿè®©å‡½æ•°çš„è°ƒç”¨æ›´åŠ æ˜ç¡®ï¼Œæ›´åƒæ˜¯è‡ªç„¶è¯­å¥ï¼ŒåŒæ—¶è¿˜èƒ½æä¾›æ›´å¯è¯»çš„å‡½æ•°ä½“å¹¶æ›´æ¸…æ™°çš„è¡¨è¾¾å‡½æ•°çš„æ„å›¾ã€‚

```swift
func greet(person: String, from hometown: String) -> String {
    return "Hello \(person)! Glad you could visit from \(hometown)."
}

print(greet(person: "Kevin", from: "Cupertion"))
// Prints 'Hello Kevin! Glad you could visit from Cupertion.'
```

```swift
func greet(ã€å½¢å¼å‚æ•°åã€‘: String, ã€å®é™…å‚æ•°æ ‡ç­¾ã€‘ã€å½¢å¼å‚æ•°åã€‘: String) -> String {
    return "Hello \(ã€å½¢å¼å‚æ•°åã€‘)! Glad you could visit from \(ã€å½¢å¼å‚æ•°åã€‘)."
}

someFunction(ã€å½¢å¼å‚æ•°åã€‘ï¼šã€å®é™…å‚æ•°ã€‘, ã€å®é™…å‚æ•°æ ‡ç­¾ã€‘ï¼šã€å®é™…å‚æ•°ã€‘)
```

### çœç•¥å®é™…å‚æ•°æ ‡ç­¾

å¦‚æœå¯¹äºå‡½æ•°çš„å½¢å¼å‚æ•°ä¸æƒ³ä½¿ç”¨å®é™…å‚æ•°æ ‡ç­¾çš„è¯ï¼Œå¯ä»¥**åˆ©ç”¨ä¸‹åˆ’çº¿ `_` æ¥ä»£æ›¿æ˜¾ç¤ºçš„å®é™…å‚æ•°æ ‡ç­¾**ã€‚

ç¬¬ä¸€ä¸ªå‚æ•°ä¸ä½¿ç”¨å®é™…å‚æ•°æ ‡ç­¾ï¼Œç¬¬äºŒä¸ªå‚æ•°ç”±å½¢å¼å‚æ•°åä»£æ›¿å®é™…å‚æ•°æ ‡ç­¾ğŸ‘‡

![02](../Swift/å‡½æ•°å’Œé—­åŒ…/02.png)

```swift
func someFunction(_ firstParameterName: Int, secondParameterName: Int) {
    print(firstParameterName, secondParameterName)
}

someFunction(1, secondParameterName: 2)
// Prints '1 2'
```

### é»˜è®¤å½¢å¼å‚æ•°å€¼

ç»™å½¢å¼å‚æ•°å®šä¹‰é»˜è®¤å€¼ï¼šåœ¨å½¢å¼å‚æ•°ç±»å‹åèµ‹ä¸€ä¸ªå€¼ä½œä¸ºé»˜è®¤å€¼ã€‚å¦‚æœå®šä¹‰äº†é»˜è®¤å€¼ï¼Œåœ¨è°ƒç”¨å‡½æ•°æ—¶å¯ä»¥çœç•¥è¿™ä¸ªå½¢å¼å‚æ•°ã€‚

![03](../Swift/å‡½æ•°å’Œé—­åŒ…/03.png)

```swift
func someFunction(parameterWithDefault: Int = 12) {
    print(parameterWithDefault)
}

someFunction(parameterWithDefault: 6) // Prints '6'
someFunction() // Prints '12'
```

### å¯å˜å½¢å¼å‚æ•°

åœ¨å½¢å¼å‚æ•°çš„**ç±»å‹åç§°åè¾¹**æ’å…¥ä¸‰ä¸ªç‚¹ç¬¦å·`...`æ¥ä¹¦å†™å¯å˜å½¢å¼å‚æ•°ã€‚`...`ï¼ˆå¯å˜å½¢å¼å‚æ•°ï¼‰å£°æ˜å½¢å¼å‚æ•°å¯ä»¥è¢«ä¼ å…¥å€¼çš„æ•°é‡æ˜¯å¯å˜çš„ã€‚ä¸€ä¸ªå¯å˜å½¢å¼å‚æ•°å¯ä»¥æ¥å—é›¶æˆ–è€…å¤šä¸ªç‰¹å®šç±»å‹çš„å€¼ï¼Œä¼ å…¥åˆ°å¯å˜å‚æ•°ä¸­çš„å€¼åœ¨å‡½æ•°ä½“å†…è¢«å½“ä½œæ˜¯å¯¹åº”ç±»å‹çš„æ•°ç»„ã€‚

![04](../Swift/å‡½æ•°å’Œé—­åŒ…/04.png)

```swift
func arithmeticMean(_ numbers: Double...) -> Double {
    var total: Double = 0
    for number in numbers {
        total += number
    }
    return total / Double(numbers.count)
}

print(arithmeticMean(1, 2, 3, 4, 5)) //Prints '3.0'
print(arithmeticMean(3, 8.25, 18.75)) //Prints '10.0'
```

### è¾“å…¥è¾“å‡ºå½¢å¼å‚æ•°

åœ¨å®šä¹‰å½¢å¼å‚æ•°æ—¶ï¼Œ**åœ¨å‰è¾¹æ·»åŠ ä¸€ä¸ª `inout`** å…³é”®å­—å¯ä»¥å®šä¹‰ä¸€ä¸ªè¾“å…¥è¾“å‡ºå½¢å¼å‚æ•°ã€‚è¾“å…¥è¾“å‡ºå½¢å¼å‚æ•°æœ‰ä¸€ä¸ªèƒ½è¾“å…¥ç»™å‡½æ•°çš„å€¼ï¼Œå‡½æ•°èƒ½å¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼Œè¿˜èƒ½è¾“å‡ºåˆ°å‡½æ•°å¤–è¾¹æ›¿æ¢åŸæ¥çš„å€¼ã€‚**åªèƒ½æŠŠå˜é‡ä½œä¸ºè¾“å…¥è¾“å‡ºå½¢å¼å‚æ•°çš„å®é™…å‚æ•°**ã€‚åœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œå°†å˜é‡ä½œä¸ºå®é™…å‚æ•°ä¼ é€’ç»™è¾“å…¥è¾“å‡ºå½¢å¼å‚æ•°ï¼Œç›´æ¥åœ¨å®ƒå‰è¾¹æ·»åŠ ä¸€ä¸ªå’Œç¬¦å·`&`æ¥æ˜ç¡®å¯ä»¥è¢«å‡½æ•°ä¿®æ”¹ã€‚**è¾“å…¥è¾“å‡ºå½¢å¼å‚æ•°ä¸èƒ½æœ‰é»˜è®¤å€¼ï¼Œå¯å˜å½¢å¼å‚æ•°ä¸èƒ½æ ‡è®° inout**ã€‚

```swift
func swapTowInts(_ a: inout Int, _ b: inout Int) {
    let temp = a
    a = b
    b = temp
}

var someInt = 3
var anotherInt = 107
swapTowInts(&someInt, &anotherInt)
print("someInt is \(someInt), anotherInt is \(anotherInt)")
//Prints 'someInt is 107, anotherInt is 3'
```

### å€¼å½¢å¼å‚æ•°

å€¼å½¢å¼å‚æ•°ä¹Ÿå¯ä»¥å«åšå¸¸é‡å½¢å¼å‚æ•°ã€‚

å€¼å½¢å¼å‚æ•°çš„ä½œç”¨ï¼šå€¼å½¢å‚ä»ä¸å®ƒä½ç½®å¯¹åº”çš„å®å‚ä¸­æ¥æ”¶æ•°æ®ï¼Œå¹¶æŠŠæ•°æ®ä¼ é€åˆ°æ‰€åœ¨çš„å‡½æ•°ä¸­ã€‚

ğŸ“¢æ³¨æ„ï¼šå½“å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œç³»ç»Ÿä¸ºæ¯ä¸ªå€¼å½¢å‚å¼€è¾Ÿä¸´æ—¶çš„å­˜å‚¨å•å…ƒï¼Œå¹¶æŒ‰ä»å·¦åˆ°å³çš„é¡ºåºï¼ŒæŠŠå®åœ¨å‚æ•°çš„å€¼â€”â€”èµ‹ç»™å¯¹åº”ä½ç½®ä¸Šçš„å½¢å¼å‚æ•°ã€‚å€¼å½¢å‚ä½œä¸ºå­ç¨‹åºçš„å±€éƒ¨å˜é‡ï¼Œå½“å‡½æ•°è¿”å›ç¨‹åºåï¼Œå€¼å½¢å‚çš„å­˜å‚¨å•å…ƒé‡Šæ”¾ã€‚

### å˜é‡å½¢å¼å‚æ•°

å¿…é¡»åœ¨å½¢å‚åçš„å‰é¢åŠ ä¸Š `var`ã€‚

å˜é‡å½¢å‚çš„ä½œç”¨ï¼šå˜é‡å½¢å‚å¯ä»¥å°†å­ç¨‹åºè°ƒç”¨è¿‡ç¨‹ä¸­äº§ç”Ÿçš„å€¼è¿”å›è°ƒç”¨å®ƒçš„ç¨‹åºã€‚

ğŸ“¢æ³¨æ„ï¼šå½“å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œç³»ç»Ÿå¹¶ä¸ä¼šä¸ºå˜é‡å½¢å‚å¼€è¾Ÿä¸´æ—¶çš„å­˜å‚¨å•å…ƒï¼Œè€Œæ˜¯è®©å®ƒä»¬å’Œå¯¹åº”çš„å®å‚å…±ç”¨å­˜å‚¨å•å…ƒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè°ƒç”¨å‡½æ•°æ—¶æ˜¯å°†å®å‚çš„åœ°å€ä¼ é€’ç»™å¯¹åº”çš„å˜é‡å½¢å‚ã€‚

### å€¼å½¢å¼å‚æ•°å’Œå˜é‡å½¢å¼å‚æ•°çš„åŒºåˆ«

1. åœ¨å‡½æ•°è°ƒç”¨æ—¶ï¼Œå€¼å½¢å¼å‚æ•°æ‰€å¯¹åº”çš„å®å‚å¿…é¡»æœ‰ç¡®å®šçš„å€¼ï¼Œè€Œå˜é‡å½¢å‚æ‰€å¯¹åº”çš„å®å‚çš„å€¼æ˜¯å¦ç¡®å®šå¹¶ä¸ä¼šå½±å“è°ƒç”¨çš„æ‰§è¡Œã€‚
2. å­å•Šå‡½æ•°è¢«è°ƒç”¨åï¼Œå€¼å½¢å‚æ‰€å¯¹åº”çš„å®å‚çš„å€¼ä¿æŒä¸å˜ï¼Œè€Œå˜é‡å½¢å‚æ‰€å¯¹åº”çš„å®å‚çš„å€¼ä¼šå‘ç”Ÿæ”¹å˜ã€‚

## å‡½æ•°ç±»å‹å’Œå†…åµŒå‡½æ•°

### å‡½æ•°ç±»å‹

æ¯ä¸€ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªç‰¹å®šçš„å‡½æ•°ç±»å‹ï¼Œå®ƒç”±**å½¢å¼å‚æ•°ç±»å‹**å’Œ**è¿”å›ç±»å‹**ç»„æˆã€‚

![05](../Swift/å‡½æ•°å’Œé—­åŒ…/05.png)

### ä½¿ç”¨å‡½æ•°ç±»å‹

ä½¿ç”¨å‡½æ•°ç±»å‹å’Œä½¿ç”¨Swiftä¸­çš„å…¶ä»–ç±»å‹ä¸€æ ·ï¼Œå¯ä»¥ç»™ä¸€ä¸ªå˜é‡æˆ–è€…å¸¸é‡å®šä¹‰ä¸€ä¸ªå‡½æ•°ç±»å‹ï¼Œå¹¶ä¸”ä¸ºè¯¥å¸¸é‡æˆ–å˜é‡æŒ‡å®šä¸€ä¸ªç›¸åº”çš„å‡½æ•°ã€‚

```swift
func addTwoNumber(num1: Int, num2: Int) -> Int {
    return num1 + num2;
}

var mathFunction: (Int, Int) -> Int = addTwoNumber
print(mathFunction(1, 1));
```

### å‡½æ•°ç±»å‹ä½œä¸ºå½¢å¼å‚æ•°ç±»å‹

å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå‡½æ•°çš„ç±»å‹ä¾‹å¦‚ `(Int, Int) -> Int` ä½œä¸ºå…¶ä»–å‡½æ•°çš„å½¢å¼å‚æ•°ç±»å‹ã€‚è¿™ç§æ–¹å¼å…è®¸å¼€å‘è€…é¢„ç•™å‡½æ•°çš„éƒ¨åˆ†å®ç°ï¼Œä»è€Œè®©å‡½æ•°çš„è°ƒç”¨è€…åœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™æä¾›ã€‚

```swift
func printMathResult(_ mathFunction: (Int, Int) -> Int, _ a: Int, _ b: Int) {
    print("Result: \(mathFunction(a, b))")
}
printMathResult(addTwoInts, 1, 1) //Prints 'Result: 2'

func addTwoInts(num1: Int, num2: Int) -> Int {
    num1 + num2
}
```

### å‡½æ•°ç±»å‹ä½œä¸ºè¿”å›ç±»å‹

å¯ä»¥ä½¿ç”¨å‡½æ•°çš„ç±»å‹ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„è¿”å›ç±»å‹ã€‚å†™æ³•æ˜¯åœ¨å‡½æ•°çš„è¿”å›ç®­å¤´`->`åç«‹å³å†™ä¸€ä¸ªå®Œæ•´çš„å‡½æ•°ç±»å‹ã€‚

```swift
func stepForward(_ input: Int) -> Int {
    return input + 1
}

func stepBackward(_ input: Int) -> Int {
    return input - 1
}

func chooseStepFunction(backwards: Bool) -> (Int) -> Int {
    return backwards ? stepBackward : stepForward
}

var currentValue = 3
let moveNearerToZero = chooseStepFunction(backwards: currentValue > 0)

print("Counting to zero:")
while currentValue != 0 {
    print("\(currentValue)...")
    currentValue = moveNearerToZero(currentValue)
}
print("zero!")
```

æ‰“å°ç»“æœï¼š

```js
Counting to zero:
3...
2...
1...
zero!
```

### å†…åµŒå‡½æ•°

å†…åµŒå‡½æ•°ï¼šåœ¨ä¸€ä¸ªå‡½æ•°ä½“å†…å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œç§°ä¸ºå†…åµŒå‡½æ•°ã€‚

å†…åµŒå‡½æ•°åœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯å¯¹å¤–éšè—çš„ï¼Œå¯ä»¥é€šè¿‡åŒ…è£¹å®ƒä»¬çš„å‡½æ•°æ¥è°ƒç”¨å®ƒä»¬ã€‚åŒæ—¶åŒ…è£¹å‡½æ•°ä¹Ÿå¯ä»¥è¿”å›å®ƒå†…éƒ¨çš„å†…åµŒå‡½æ•°ï¼Œæ¥å®ç°åœ¨å¦å¤–çš„èŒƒå›´ä½¿ç”¨å®ƒã€‚

```swift
func chooseStepFunction(backward: Bool) -> (Int) -> Int {
    func stepForward(input: Int) -> Int { return input + 1 }
    func stepBackward(input: Int) -> Int { return input - 1}
    return backward ? stepBackward : stepForward
}

var currentValue = -4
let moveNearerToZero = chooseStepFunction(backward: currentValue > 0)

print("Counting to zero:")
while currentValue != 0 {
    print("\(currentValue)")
    currentValue = moveNearerToZero(currentValue)
}
print("zero!")
```

æ‰“å°ç»“æœï¼š

```js
Counting to zero:
-4
-3
-2
-1
zero!
```

## é—­åŒ…

é—­åŒ…æ˜¯å¯ä»¥åœ¨ä»£ç ä¸­è¢«ä¼ é€’å’Œå¼•ç”¨çš„åŠŸèƒ½æ€§ç‹¬ç«‹ä»£ç å—ã€‚

é—­åŒ…èƒ½å¤Ÿæ•è·å’Œå­˜å‚¨å®šä¹‰åœ¨å…¶ä¸Šä¸‹æ–‡ä¸­çš„ä»»ä½•å¸¸é‡å’Œå˜é‡çš„å¼•ç”¨ï¼Œè¿™ä¹Ÿå°±æ˜¯æ‰€è°“çš„**é—­åˆå¹¶åŒ…è£¹**é‚£äº›å¸¸é‡å’Œå˜é‡ï¼Œå› æ­¤è¢«ç§°ä¸ºâ€œé—­åŒ…â€ã€‚Swift èƒ½å¤Ÿå¤„ç†æ‰€æœ‰å…³äºæ•è·çš„å†…å­˜ç®¡ç†çš„æ“ä½œã€‚

åœ¨å‡½æ•°ç« èŠ‚ä¸­ä»‹ç»çš„å…¨å±€å’Œå†…åµŒå‡½æ•°ï¼Œå®é™…ä¸Šæ˜¯ç‰¹æ®Šçš„é—­åŒ…ã€‚é—­åŒ…ç¬¦åˆå¦‚ä¸‹ä¸‰ç§å½¢å¼ä¸­çš„ä¸€ç§ï¼š

1. å…¨å±€å‡½æ•°æ˜¯ä¸€ä¸ª**æœ‰åå­—**ä½†**ä¸èƒ½æ•è·å€¼**çš„é—­åŒ…ï¼›
2. å†…åµŒå‡½æ•°æ˜¯ä¸€ä¸ª**æœ‰åå­—**ä¸”**èƒ½æ•è·å€¼**ï¼ˆä»å…¶ä¸Šå±‚å‡½æ•°ï¼‰çš„é—­åŒ…ï¼›
3. é—­åŒ…è¡¨è¾¾å¼æ˜¯ä¸€ä¸ª**æ²¡æœ‰åå­—**ä¸”**èƒ½æ•è·å€¼**ï¼ˆå…¶ä¸Šä¸‹æ–‡ä¸­å¸¸é‡æˆ–å˜é‡çš„å€¼ï¼‰çš„é—­åŒ…ã€‚

### é—­åŒ…è¡¨è¾¾å¼

é—­åŒ…è¡¨è¾¾å¼æ˜¯ä¸€ç§åœ¨ç®€çŸ­è¡Œå†…å°±èƒ½å†™å®Œé—­åŒ…çš„è¯­æ³•ã€‚

### é—­åŒ…è¡¨è¾¾å¼-ä» sorted å‡½æ•°è¯´èµ·

Swfit çš„æ ‡å‡†åº“æä¾›äº†ä¸€ä¸ªå«åš `sorted(by:)` çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šæ ¹æ®è°ƒç”¨è€…æä¾›çš„æ’åºé—­åŒ…å°†å·²çŸ¥ç±»å‹çš„æ•°ç»„çš„å€¼è¿›è¡Œæ’åºã€‚åœ¨æ’åºå®Œæˆåï¼Œ`sorted(by:)` æ–¹æ³•ä¼šè¿”å›ä¸åŸæ•°ç»„ç±»å‹å¤§å°å®Œå…¨ç›¸åŒçš„ä¸€ä¸ª**æ–°æ•°ç»„**ï¼Œæ–°æ•°ç»„çš„å…ƒç´ æ˜¯å·²æ’åºå¥½çš„ã€‚åŸå§‹æ•°ç»„ä¸ä¼šè¢« `sorted(by:)` æ–¹æ³•ä¿®æ”¹ã€‚

```swift
let names = ["zhangsan", "lisi", "wangwu", "zhaoliu"]
func backward(_ s1: String, _ s2: String) -> Bool {
    return s1 > s2
}

var reversedNames = names.sorted(by: backward)
print(reversedNames)
//Prints '["zhaoliu", "zhangsan", "wangwu", "lisi"]'
```

### é—­åŒ…è¡¨è¾¾å¼è¯­æ³•

![06](../Swift/å‡½æ•°å’Œé—­åŒ…/06.png)

é—­åŒ…è¡¨è¾¾å¼è¯­æ³•èƒ½å¤Ÿä½¿ç”¨å¸¸é‡å½¢å¼å‚æ•°ã€å˜é‡å½¢å¼å‚æ•°å’Œè¾“å…¥è¾“å‡ºå½¢å¼å‚æ•°ï¼Œä½†ä¸èƒ½æä¾›é»˜è®¤å€¼ã€‚å¯å˜å½¢å¼å‚æ•°ä¹Ÿèƒ½ä½¿ç”¨ï¼Œä½†éœ€è¦åœ¨å½¢å¼å‚æ•°åˆ—è¡¨çš„æœ€åé¢ä½¿ç”¨ã€‚å…ƒç»„ä¹Ÿå¯è¢«ç”¨æ¥ä½œä¸ºå½¢å¼å‚æ•°å’Œè¿”å›ç±»å‹ã€‚

### é—­åŒ…è¡¨è¾¾å¼è¯­æ³•ç‰ˆæœ¬çš„backward

å°†ä¸Šé¢çš„ `backward(_:_:)` å‡½æ•°æ”¹ä¸ºé—­åŒ…è¡¨è¾¾å¼ç‰ˆæœ¬ï¼š

```swift
let names = ["zhangsan", "lisi", "wangwu", "zhaoliu"]
var reversedNames = names.sorted(by: { (s1: String, s2: String) -> Bool in
    return s1 > s2
})
print(reversedNames)
//Prints '["zhaoliu", "zhangsan", "wangwu", "lisi"]'
```

### ä»è¯­å¢ƒä¸­æ¨æ–­ç±»å‹

å› ä¸ºæ’åºé—­åŒ…ä½œä¸ºå®é™…å‚æ•°ä¼ é€’ç»™å‡½æ•°ï¼Œæ‰€ä»¥ Swift èƒ½æ¨æ–­å‡½æ•°çš„å½¢å¼å‚æ•°ç±»å‹å’Œè¿”å›ç±»å‹ã€‚

`sorted(by:)` æ–¹æ³•æœŸæœ›å®ƒçš„å½¢å¼å‚æ•°æ˜¯ä¸€ä¸ª `(String, String) -> Bool` ç±»å‹çš„å‡½æ•°ã€‚è¿™æ„å‘³ç€ `(String, String)` å’Œ `Bool` ç±»å‹ä¸éœ€è¦è¢«å†™æˆé—­åŒ…è¡¨è¾¾å¼å®šä¹‰ä¸­çš„ä¸€éƒ¨åˆ†ã€‚å› ä¸ºæ‰€æœ‰çš„ç±»å‹éƒ½èƒ½è¢«æ¨æ–­ï¼Œæ‰€ä»¥**è¿”å›ç®­å¤´ `->`** å’Œå›´ç»•åœ¨**å½¢å¼å‚æ•°åå‘¨å›´çš„æ‹¬å·**ä¹Ÿèƒ½è¢«çœç•¥ã€‚

```swift
let names = ["zhangsan", "lisi", "wangwu", "zhaoliu"]
var reversedNames = names.sorted(by: { s1, s2 in
    return s1 > s2
})
//Prints '["zhaoliu", "zhangsan", "wangwu", "lisi"]'
```

### ä»å•è¡¨è¾¾å¼é—­åŒ…éšå¼è¿”å›

å•è¡¨è¾¾å¼é—­åŒ…èƒ½å¤Ÿä»å®ƒä»¬çš„å£°æ˜ä¸­åˆ æ‰ return å…³é”®å­—ï¼Œé€šè¿‡è¿™ç§æ–¹å¼æ¥éšå¼è¿”å›å•ä¸ªè¡¨è¾¾å¼çš„ç»“æœã€‚

åŒéšå¼è¿”å›çš„å‡½æ•°ï¼Œå¦‚æœæ•´ä¸ªå‡½æ•°ä½“æ˜¯ä¸€ä¸ªå•ä¸€è¡¨è¾¾å¼ï¼Œé‚£ä¹ˆå‡½æ•°éšå¼è¿”å›è¿™ä¸ªè¡¨è¾¾å¼ï¼Œä¸éœ€è¦ return å…³é”®å­—ã€‚

```swift
let names = ["zhangsan", "lisi", "wangwu", "zhaoliu"]
var reversedNames = names.sorted(by: { s1, s2 in
    s1 > s2
})
print(reversedNames)
//Prints '["zhaoliu", "zhangsan", "wangwu", "lisi"]'
```

ä¹Ÿå¯ä»¥ç®€å†™ä¸ºï¼š

```swift
var reversedNames = names.sorted(by: { s1, s2 in s1 > s2 })
```

### ç®€å†™å®é™…å‚æ•°å

Swift è‡ªåŠ¨å¯¹è¡Œå†…é—­åŒ…æä¾›ç®€å†™å®é™…å‚æ•°åï¼Œå¯ä»¥é€šè¿‡ `$0`ï¼Œ`$1`ï¼Œ`$2` ç­‰åå­—æ¥å¼•ç”¨é—­åŒ…çš„å®é™…å‚æ•°å€¼ã€‚

```swift
let names = ["zhangsan", "lisi", "wangwu", "zhaoliu"]
var reversedNames = names.sorted(by: { $0 > $1 })
print(reversedNames)
```

### è¿ç®—ç¬¦å‡½æ•°

Swift çš„ String ç±»å‹å®šä¹‰äº†å…³äºå¤§äºå· `>` çš„ç‰¹å®šå­—ç¬¦ä¸²å®ç°ï¼Œè®©å…¶ä½œä¸ºä¸€ä¸ªæœ‰ä¸¤ä¸ª String ç±»å‹å½¢å¼å‚æ•°çš„å‡½æ•°å¹¶è¿”å›ä¸€ä¸ª Bool ç±»å‹çš„å€¼ï¼ˆ`(String, String) -> Bool`ï¼‰ã€‚è¿™ä¸ `sorted(by:)` æ–¹æ³•çš„å½¢å¼å‚æ•°éœ€è¦çš„å‡½æ•°ç›¸åŒ¹é…ã€‚å› æ­¤ï¼Œç®€å•çš„ä¼ é€’ä¸€ä¸ªå¤§äºå· `>`ï¼ŒSwift å°†æ¨æ–­æƒ³ä½¿ç”¨å¤§äºå·ç‰¹æ®Šå­—ç¬¦ä¸²å‡½æ•°å®ç°ã€‚

```swift
let names = ["zhangsan", "lisi", "wangwu", "zhaoliu"]
var reversedNames = names.sorted(by: > )
print(reversedNames)
//Prints '["zhaoliu", "zhangsan", "wangwu", "lisi"]'
```

### å°¾éšé—­åŒ…

å¦‚æœéœ€è¦å°†ä¸€ä¸ªå¾ˆé•¿çš„é—­åŒ…è¡¨è¾¾å¼ä½œä¸ºå‡½æ•°æœ€åä¸€ä¸ªå®é™…å‚æ•°ä¼ é€’ç»™å‡½æ•°ï¼Œä½¿ç”¨å°¾éšé—­åŒ…å°†å¢å¼ºå‡½æ•°çš„å¯è¯»æ€§ã€‚å°¾éšé—­åŒ…æ˜¯ä¸€ä¸ªè¢«ä¹¦å†™åœ¨å‡½æ•°å½¢å¼å‚æ•°çš„æ‹¬å·å¤–é¢ï¼ˆåé¢ï¼‰çš„é—­åŒ…è¡¨è¾¾å¼ã€‚

```swift
let names = ["zhangsan", "lisi", "wangwu", "zhaoliu"]
var reversedNames = names.sorted{ $0 > $1 }
print(reversedNames)
//Prints '["zhaoliu", "zhangsan", "wangwu", "lisi"]'
```

### æ•è·å€¼

ä¸€ä¸ªé—­åŒ…èƒ½å¤Ÿä»ä¸Šä¸‹æ–‡æ•è·å·²è¢«å®šä¹‰çš„å¸¸é‡å’Œå˜é‡ã€‚å³ä½¿åœ¨å®šä¹‰è¿™äº›å¸¸é‡å’Œå˜é‡çš„åŸä½œç”¨åŸŸå·²ç»ä¸å­˜åœ¨æ—¶ï¼Œé—­åŒ…ä»èƒ½å¤Ÿåœ¨å…¶å‡½æ•°ä½“å†…å¼•ç”¨å’Œä¿®æ”¹è¿™äº›å€¼ã€‚

```swift
func makeIncrementer(forIncrement amount: Int) -> () -> Int {
    var runingTotal = 0
    func incrementer() -> Int {
        runingTotal += amount
        return runingTotal
    }
    return incrementer
}

let incrementByTen = makeIncrementer(forIncrement: 10)
incrementByTen() // 10
incrementByTen() // 20
incrementByTen() // 30
```

ä½œä¸ºä¸€ç§ä¼˜åŒ–ï¼Œ**å¦‚æœè¢«æ•è·çš„å€¼æ²¡æœ‰æ”¹å˜ï¼ŒSwift ä¼šä½¿ç”¨è¿™ä¸ªå€¼çš„æ‹·è´è€Œä¸æ˜¯æ•è·**ã€‚Swift ä¹Ÿå¤„ç†äº†å˜é‡çš„å†…å­˜ç®¡ç†æ“ä½œï¼Œå½“å˜é‡ä¸å†éœ€è¦æ—¶ä¼šè¢«é‡Šæ”¾ã€‚

å¦‚æœå»ºç«‹äº†ç¬¬äºŒä¸ª incrementerï¼Œå®ƒå°†ä¼šæœ‰ä¸€ä¸ªæ–°çš„ã€ç‹¬ç«‹çš„ `runningTotal` å˜é‡çš„å¼•ç”¨ã€‚

```swift
func makeIncrementer(forIncrement amount: Int) -> () -> Int {
    var runingTotal = 0
    func incrementer() -> Int {
        runingTotal += amount
        return runingTotal
    }
    return incrementer
}

let incrementByTen = makeIncrementer(forIncrement: 10)
incrementByTen() // 10

let incrementBySeven = makeIncrementer(forIncrement: 7)
incrementBySeven() // 10

incrementByTen() // 20
```

### é—­åŒ…æ˜¯å¼•ç”¨ç±»å‹

åœ¨ Swift ä¸­ï¼Œå‡½æ•°å’Œé—­åŒ…éƒ½æ˜¯å¼•ç”¨ç±»å‹ã€‚å½“èµ‹å€¼ä¸€ä¸ªå‡½æ•°æˆ–è€…é—­åŒ…ç»™ä¸€ä¸ªå¸¸é‡æˆ–è€…å˜é‡æ—¶ï¼Œå…¶å®æ˜¯å°†å¸¸é‡å’Œå˜é‡è®¾ç½®ä¸ºå¯¹å‡½æ•°å’Œé—­åŒ…çš„å¼•ç”¨ã€‚

```swift
func makeIncrementer(forIncrement amount: Int) -> () -> Int {
    var runingTotal = 0
    func incrementer() -> Int {
        runingTotal += amount
        return runingTotal
    }
    return incrementer
}

let incrementByTen = makeIncrementer(forIncrement: 10)
incrementByTen() // 10

let alsoIncrementByTen = incrementByTen
alsoIncrementByTen() // 20
```

ğŸ“¢æ³¨æ„ï¼šå…³äºé—­åŒ…çš„å¾ªç¯å¼•ç”¨é—®é¢˜ã€‚å¦‚æœåˆ†é…ä¸€ä¸ªé—­åŒ…ç»™ç±»å®ä¾‹çš„å±æ€§ï¼ŒåŒæ—¶é—­åŒ…é€šè¿‡å¼•ç”¨è¯¥å®ä¾‹æˆ–è€…å®ƒçš„æˆå‘˜æ¥æ•è·äº†è¯¥å®ä¾‹ï¼Œåˆ™ä¼šåœ¨é—­åŒ…å’Œå®ä¾‹ä¹‹é—´äº§ç”Ÿ**å¾ªç¯å¼•ç”¨**ï¼ˆå®ä¾‹æŒæœ‰é—­åŒ…ï¼Œé—­åŒ…æŒæœ‰å®ä¾‹ï¼‰ã€‚

### é€ƒé€¸é—­åŒ…å’Œè‡ªåŠ¨é—­åŒ…

#### é€ƒé€¸é—­åŒ…

å½“é—­åŒ…ä½œä¸ºä¸€ä¸ªå®é™…å‚æ•°ä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå¹¶ä¸”å®ƒä¼šåœ¨å‡½æ•°è¿”å›ä¹‹åè°ƒç”¨ï¼Œæˆ‘ä»¬å°±è¯´è¿™ä¸ªé—­åŒ…é€ƒé€¸äº†ã€‚å£°æ˜ä¸€ä¸ªå‡½æ•°ï¼Œè®©å®ƒæ¥æ”¶é—­åŒ…ä½œä¸ºå½¢å¼å‚æ•°æ—¶ï¼Œå¯ä»¥åœ¨å½¢å¼å‚æ•°å‰å†™ `@escaping` æ¥æ˜ç¡®é—­åŒ…æ˜¯å…è®¸é€ƒé€¸çš„ã€‚

é€ƒé€¸é—­åŒ…çš„ä¸€ç§å®ç°æ–¹æ³•â€”â€”è¢«å­˜å‚¨åœ¨ä¸€ä¸ªå˜é‡é‡Œï¼Œè¯¥å˜é‡å®šä¹‰äºå‡½æ•°å¤–ã€‚å¦‚å¼‚æ­¥ä»»åŠ¡å®Œæˆåçš„å›è°ƒï¼Œå‡½æ•°é€šè¿‡æ¥æ”¶é—­åŒ…ä½œä¸ºå®é™…å‚æ•°ï¼Œæ¥å®ç°åœ¨å¯åŠ¨å¼‚æ­¥ä»»åŠ¡å®Œæˆåçš„å›è°ƒã€‚å‡½æ•°åœ¨å¯åŠ¨å¼‚æ­¥ä»»åŠ¡åå°±è¿”å›äº†ï¼Œè€Œé—­åŒ…ä¼šåœ¨å¼‚æ­¥ä»»åŠ¡å®Œæˆåæ‰è¿”å›ï¼Œå³**ä¸ºäº†ç¨åå†è°ƒç”¨ï¼Œé—­åŒ…éœ€è¦é€ƒé€¸**ã€‚

```swift
// é—­åŒ…å®¹å™¨
var completionHandlers: [() -> Void] = []
// æ·»åŠ é€ƒé€¸é—­åŒ…
func someFunctionWithEscapingClosure(completionHandler: @escaping () -> Void) {
    completionHandlers.append(completionHandler)
}

// ç›´æ¥è°ƒç”¨é—­åŒ…
func someFunctionWithNoneEscapingClosure(closure: () -> Void) {
    closure()
}

class SomeClass {
    var x = 10
    func doSomething() {
        someFunctionWithEscapingClosure {
            self.x = 100
        }
        someFunctionWithNoneEscapingClosure {
            x = 200
        }
    }
}

let instance = SomeClass()
instance.doSomething()
print(instance.x) 
//Prints '200'

// è·å–é—­åŒ…å®¹å™¨ä¸­çš„ç¬¬ä¸€ä¸ªé€ƒé€¸é—­åŒ…ï¼Œå¹¶è°ƒç”¨ï¼ˆéœ€è¦æ—¶æ‰è¢«è°ƒç”¨çš„é—­åŒ…â€”â€”é€ƒé€¸é—­åŒ…ï¼‰
completionHandlers.first?()
print(instance.x) 
//Prints '100'
```

è®©é—­åŒ…é€ƒé€¸æ„å‘³ç€å¿…é¡»åœ¨è¡¨ä¸­æ˜¾ç¤ºçš„å¼•ç”¨ `self`ï¼Œå³è®©é—­åŒ…æŒæœ‰ `self`ï¼Œæ‰èƒ½å®ç°å¯¹ `self.x` çš„ä¿®æ”¹ã€‚

#### è‡ªåŠ¨é—­åŒ…

å› ä¸ºé—­åŒ…å…è®¸å»¶è¿Ÿå¤„ç†ï¼Œæ‰€ä»¥é—­åŒ…å†…éƒ¨çš„ä»£ç å—ç›´åˆ°è°ƒç”¨é—­åŒ…çš„æ—¶å€™æ‰ä¼šè¿è¡Œã€‚å¯¹äºæœ‰å‰¯ä½œç”¨æˆ–è€…å ç”¨èµ„æºçš„ä»£ç æ¥è¯´å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºå®ƒå¯ä»¥æ§åˆ¶ä»£ç ä½•æ—¶æ‰è¿›è¡Œæ±‚å€¼ã€‚

```swift
var customersInLine = ["Chris", "Alex", "Ewa", "Barry", "Daniella"]
print(customersInLine.count)
//Prints '5'

// åˆ›å»ºé—­åŒ…
let customerProvider = {
    customersInLine.remove(at: 0)
}
print(customersInLine.count)
//Prints '5'

// è°ƒç”¨é—­åŒ…
print("Now serving \(customerProvider())!")
//Prints 'Now serving Chris!'

print(customersInLine.count)
//Prints '4'
```

åœ¨ä¼ ä¸€ä¸ªé—­åŒ…ä½œä¸ºå®é™…å‚æ•°ç»™å‡½æ•°çš„æ—¶å€™ï¼Œä¼šå¾—åˆ°ä¸å»¶è¿Ÿå¤„ç†ç›¸åŒçš„è¡Œä¸ºã€‚

```swift
// customersInLine is ["Alex", "Ewa", "Barry", "Daniella"]
func serve(customer customerProvider: () -> String) {
    print("Now serving \(customerProvider())!")
}
serve(customer: { customersInLine.remove(at: 0) })
//Prints 'Now serving Alex!'
```

é€šè¿‡ `@autoclosure` æ ‡è®°å½¢å¼å‚æ•°ä½¿ç”¨äº†è‡ªåŠ¨é—­åŒ…ã€‚ä½¿ç”¨ `@autoclosure` æ ‡è®°åï¼Œè°ƒç”¨å‡½æ•°ä¼ é€’å‚æ•°æ›´åƒæ˜¯ä¼ é€’ String å®é™…å‚æ•°ä¸€æ ·ï¼Œè€Œä¸æ˜¯åœ¨ä¼ é€’ä¸€ä¸ªé—­åŒ…ã€‚å› ä¸º `customerProvider` å½¢å¼å‚æ•°çš„ç±»å‹è¢«æ ‡è®°ä¸º `@autoclosure`ï¼Œæ‰€ä»¥å®é™…å‚æ•°ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºé—­åŒ…ï¼ˆè‡ªåŠ¨åŠ ä¸Šå¤§æ‹¬å·`{ å®é™…å‚æ•° }`ï¼‰ã€‚

ğŸ‘‡ä¸‹é¢è¿™ç§å®ç°æ–¹å¼ï¼Œè·Ÿä¸Šé¢ç›¸åŒğŸ‘†ï¼š

```swift
// customersInLine is ["Ewa", "Barry", "Daniella"]
func serve(customer customerProvider: @autoclosure () -> String) {
    print("Now serving \(customerProvider())!")
}
serve(customer: customersInLine.remove(at: 0))
//Prints 'Now serving Ewa!'
```

å°ç»“ï¼š

1. è‡ªåŠ¨é—­åŒ…æ˜¯ä¸€ç§è‡ªåŠ¨åˆ›å»ºçš„é—­åŒ…ï¼Œç”¨æ¥æŠŠä½œä¸ºå®é™…å‚æ•°ä¼ é€’ç»™å‡½æ•°çš„è¡¨è¾¾å¼æ‰“åŒ…æˆé—­åŒ…ã€‚è‡ªåŠ¨é—­åŒ…ä¸æ¥å—ä»»ä½•å®é™…å‚æ•°ï¼Œå¹¶ä¸”å½“å®ƒè¢«è°ƒç”¨æ—¶ï¼Œå®ƒä¼šè¿”å›å†…éƒ¨æ‰“åŒ…çš„è¡¨è¾¾å¼çš„å€¼ã€‚

2. è¿™ä¸ªè¯­æ³•çš„å¥½å¤„åœ¨äºé€šè¿‡ä¹¦å†™æ™®é€šè¡¨è¾¾å¼ä»£æ›¿æ˜¾ç¤ºé—­åŒ…ï¼Œä»è€Œçœç•¥åŒ…å›´å½¢å¼å‚æ•°çš„æ‹¬å·`{}`ã€‚

#### è‡ªåŠ¨+é€ƒé€¸

```swift
// customersInLine is ["Barry", "Daniella"]
var customerProviders: [() -> String] = []
func collectCustomerProviders(_ customerProvider: @autoclosure @escaping () -> String) {
    // é€ƒé€¸
    customerProviders.append(customerProvider)
}
// è‡ªåŠ¨
collectCustomerProviders(customersInLine.remove(at: 0))
collectCustomerProviders(customersInLine.remove(at: 0))

print("Collected \(customerProviders.count) closures.")
// Prints "Collected 2 closures."

for customerProvider in customerProviders {
    print("Now serving \(customerProvider())!")
}
// Prints "Now serving Barry!"
// Prints "Now serving Daniella!"
```

## é«˜é˜¶å‡½æ•°

### map

å®ç°ï¼šå¯¹äºåŸå§‹é›†åˆé‡Œçš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œä»¥ä¸€ä¸ªå˜æ¢åçš„å…ƒç´ æ›¿æ¢å®ƒï¼Œå½¢æˆä¸€ä¸ª**æ–°çš„é›†åˆ**ã€‚

![07](../Swift/å‡½æ•°å’Œé—­åŒ…/07.png)

```swift
let numbers = [2.0, 4.0, 5.0, 7.0]
print(numbers.map { $0 * $0 })
// Prints "[4.0, 16.0, 25.0, 49.0]"
```

ğŸ“¢æ³¨æ„ï¼šè°ƒç”¨ `map` å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„é›†åˆã€‚

```swift
let numbers = [2.0, 4.0, 5.0, 7.0]
print(numbers.map { $0 * 10 })
// Prints "[20.0, 40.0, 50.0, 70.0]"
print(numbers)
// Prints "[2.0, 4.0, 5.0, 7.0]"
```

### filter

å®ç°ï¼šå¯¹äºåŸå§‹é›†åˆé‡Œçš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œé€šè¿‡åˆ¤æ–­æ¥å°†å…¶ä¸¢å¼ƒæˆ–è€…ä¿å­˜åˆ°æ–°çš„é›†åˆé‡Œã€‚

![08](../Swift/å‡½æ•°å’Œé—­åŒ…/08.png)

```swift
let numbers = [1, 4, 10, 15]
print(numbers.filter { $0 % 2 == 0 })
// Prints "[4, 10]"
```

### reduce

å®ç°ï¼šå¯¹äºåŸå§‹é›†åˆé‡Œçš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œä½œç”¨äºå½“å‰ç´¯è®¡çš„ç»“æœä¸Šã€‚

![09](../Swift/å‡½æ•°å’Œé—­åŒ…/09.png)

```swift
let numbers = [2.0, 4.0, 5.0, 7.0]
print(numbers.reduce(10) { $0 + $1})
// Prints "28.0"
```

### flatMap

å®ç°ï¼šå¯¹äºäºŒçº§é›†åˆï¼ˆå…ƒç´ æ˜¯é›†åˆçš„é›†åˆï¼‰ï¼Œå¯ä»¥å¾—åˆ°å•çº§çš„é›†åˆã€‚

```swift
let results = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]
// æ‰€æœ‰çš„å…ƒç´ ä¹˜ä»¥10
let allResults = results.flatMap { $0.map { $0 * 10 }}
// è·å–æ‰€æœ‰å¤§äº5çš„å…ƒç´ 
let passMarks = results.flatMap { $0.filter { $0 > 5 }}
print(allResults)
// Prints "[10, 20, 30, 40, 50, 60, 70, 80, 90]"
print(passMarks)
// Prints "[6, 7, 8, 9]"
```

### compactMap

å®ç°ï¼šè¿‡æ»¤ç©ºå€¼ã€‚

```swift
let keys: [String?] = ["zhangsan", nil, "lisi", "wangwu"]
// è·å–ä¸ä¸ºç©ºçš„å­—ç¬¦ä¸²
let validNames = keys.compactMap { $0 }
print(validNames)
// Prints "["zhangsan", "lisi", "wangwu"]"

// è·å–å­—ç¬¦ä¸²é•¿åº¦
let counts = keys.compactMap { $0?.count }
print(counts)
// Prints "[8, 4, 6]"
```

## å‡½æ•°å¼ç¼–ç¨‹

### å‡½æ•°å¼ç¼–ç¨‹1

#### èŒƒå¼è½¬æ¢

å®ç°ï¼šè¯»å…¥ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œç¡®å®šæ‰€æœ‰å•è¯çš„ä½¿ç”¨é¢‘ç‡å¹¶ä»é«˜åˆ°ä½æ’åºï¼Œæ‰“å°å‡ºæ‰€æœ‰å•è¯åŠå…¶é¢‘ç‡çš„æ’åºåˆ—è¡¨ã€‚

>è¿™é“é¢˜ç›®å‡ºè‡ªè®¡ç®—æœºç§‘å­¦å²ä¸Šçš„è‘—åäº‹ä»¶ï¼Œå½“å¹´ Communications of the ACM æ‚å¿— â€œProgramming Pearlsâ€ ä¸“æ çš„ä½œè€… Jon Bentley å‘è®¡ç®—æœºå…ˆå» Donald Knuth æå‡ºçš„æŒ‘æˆ˜ã€‚

#### ä¼ ç»Ÿè§£å†³æ–¹æ¡ˆ

```swift
let NON_WORDS: Set = ["the", "and", "of", "to", "a", "i", "it", "in", "or", "is", "as", "so", "but", "be"]

func wordFreq(words: String) -> [String: Int] {
    var wordDict: [String: Int] = [:]
    let wordList = words.split(separator: " ")
    for word in wordList {
        let lowerCaseWord = word.lowercased()
        if !NON_WORDS.contains(lowerCaseWord) {
            if let count = wordDict[lowerCaseWord] {
                wordDict[lowerCaseWord] = count + 1;
            } else {
                wordDict[lowerCaseWord] = 1;
            }
        }
    }
    return wordDict
}

let words = """
There are moments in life when you miss someone so much that you just want to pick them from your dreams and hug them for real Dream what you want to dream go where you want to go be what you want to be because you have only one life and one chance to do all the things you want to do
"""
print(wordFreq(words: words))
```

æ‰“å°ç»“æœï¼š

```js
["chance": 1, "go": 2, "do": 2, "life": 2, "for": 1, "that": 1, "you": 7, "dreams": 1, "what": 2, "things": 1, "real": 1, "someone": 1, "have": 1, "them": 2, "much": 1, "pick": 1, "when": 1, "only": 1, "there": 1, "dream": 2, "want": 5, "moments": 1, "from": 1, "one": 2, "just": 1, "because": 1, "miss": 1, "are": 1, "your": 1, "hug": 1, "where": 1, "all": 1]
```

#### å‡½æ•°å¼

```swift
let NON_WORDS: Set = ["the", "and", "of", "to", "a", "i", "it", "in", "or", "is", "as", "so", "but", "be"]

func wordFreq(words: String) -> [String: Int] {
    var wordDict : [String: Int] = [:]
    let wordList = words.split(separator: " ")
    wordList.map { $0.lowercased()}
        .filter { !NON_WORDS.contains($0) }
        .forEach { word in
            wordDict[word] = (wordDict[word] ?? 0) + 1
        }
    return wordDict
}
print(wordFreq2(words: words))

let words = """
There are moments in life when you miss someone so much that you just want to pick them from your dreams and hug them for real Dream what you want to dream go where you want to go be what you want to be because you have only one life and one chance to do all the things you want to do
"""
print(wordFreq(words: words))
```

æ‰“å°ç»“æœï¼š

```js
["because": 1, "moments": 1, "much": 1, "life": 2, "are": 1, "you": 7, "want": 5, "dream": 2, "dreams": 1, "your": 1, "from": 1, "things": 1, "hug": 1, "chance": 1, "do": 2, "miss": 1, "what": 2, "real": 1, "where": 1, "when": 1, "pick": 1, "for": 1, "all": 1, "just": 1, "there": 1, "them": 2, "that": 1, "go": 2, "only": 1, "one": 2, "someone": 1, "have": 1]
```

#### å°ç»“

1. å‘½ä»¤å¼ç¼–ç¨‹é£æ ¼å°å°è¿«ä½¿æˆ‘ä»¬å‡ºäºæ€§èƒ½è€ƒè™‘ï¼ŒæŠŠä¸åŒçš„ä»»åŠ¡äº¤ç»‡èµ·æ¥ï¼Œä»¥ä¾¿èƒ½å¤Ÿ**ç”¨ä¸€æ¬¡å¾ªç¯æ¥å®Œæˆå¤šä¸ªä»»åŠ¡**ã€‚
2. å‡½æ•°å¼ç¼–ç¨‹ç”¨ `map()`ã€`filter` è¿™äº›é«˜é˜¶å‡½æ•°ï¼Œè®©å¼€å‘è€…**ç«™åœ¨æ›´é«˜çš„æŠ½è±¡å±‚æ¬¡ä¸Šå»è€ƒè™‘é—®é¢˜**ï¼ŒæŠŠé—®é¢˜çœ‹çš„æ›´æ¸…æ¥šã€‚

#### ç®€æ´

1. é¢å‘å¯¹è±¡ç¼–ç¨‹é€šè¿‡**å°è£…ä¸ç¡®å®šå› ç´ **æ¥æ˜¯ä»£ç èƒ½å¤Ÿè¢«äººç†è§£ã€‚å‡½æ•°å¼ç¼–ç¨‹é€šè¿‡**å°½é‡å‡å°‘ä¸ç¡®å®šå› ç´ **æ¥æ˜¯ä»£ç èƒ½è¢«äººç†è§£ã€‚

2. åœ¨é¢å‘å¯¹è±¡çš„å‘½ä»¤å¼ç¼–ç¨‹è¯­è¨€é‡Œé¢ï¼Œé‡ç”¨çš„å•å…ƒæ˜¯ç±»å’Œç±»ä¹‹é—´æ²Ÿé€šç”¨çš„æ¶ˆæ¯ã€‚å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€å®ç°é‡ç”¨çš„æ€è·¯å¾ˆä¸ä¸€æ ·ã€‚å‡½æ•°å¼è¯­è¨€æå€¡åœ¨æœ‰é™çš„å‡ ç§å…³é”®æ•°æ®ç»“æ„ï¼ˆå¦‚ listã€setã€mapï¼‰ä¸Šï¼Œè¿ç”¨é’ˆå¯¹è¿™äº›æ•°æ®ç»“æ„é«˜åº¦ä¼˜åŒ–è¿‡çš„æ“ä½œï¼Œä»¥æ­¤æ„æˆåŸºæœ¬çš„è¿è½¬æœºæ„ã€‚å¼€å‘è€…å†æ ¹æ®å…·ä½“ç”¨é€”ï¼Œæ’å…¥è‡ªå·±çš„æ•°æ®ç»“æ„å’Œé«˜é˜¶å‡½æ•°å»è°ƒæ•´æœºæ„çš„è¿è½¬æ–¹å¼ã€‚

3. æ¯”èµ·ä¸€å‘³åœ°åˆ›å»ºæ–°çš„ç±»ç»“æ„ä½“ç³»ï¼ŒæŠŠå°è£…çš„å•å…ƒé™ä½åˆ°å‡½æ•°çº§åˆ«ï¼Œæ›´æœ‰åˆ©äºè¾¾åˆ°**ç»†ç²’åº¦çš„ã€åŸºç¡€å±‚é¢**çš„é‡ç”¨ã€‚å‡½æ•°å¼å¼€å‘è€…å–œæ¬¢ç”¨å°‘æ•°å‡ ä¸ªæ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œå›´ç»•å®ƒä»¬å»å»ºç«‹ä¸€å¥—å……åˆ†ä¼˜åŒ–çš„è¿è½¬æœºæ„ã€‚é¢å‘å¯¹è±¡å¼€å‘è€…å–œæ¬¢**ä¸æ–­åœ°åˆ›å»ºæ–°çš„æ•°æ®ç»“æ„å’Œé™„å±çš„æ“ä½œ**ï¼Œå› ä¸ºå‹å€’ä¸€åˆ‡çš„é¢å‘å¯¹è±¡ç¼–ç¨‹èŒƒå¼å°±æ˜¯ç©¿ä»¶æ–°çš„ç±»å’Œç±»é—´çš„æ¶ˆæ¯ã€‚**æŠŠæ‰€æœ‰çš„æ•°æ®ç»“æ„éƒ½å°è£…æˆç±»ï¼Œä¸€æ–¹é¢å‹åˆ¶äº†æ–¹æ³•å±‚é¢çš„é‡ç”¨ï¼Œå¦ä¸€æ–¹é¢é¼“åŠ±å¤§ç²’åº¦çš„æ¡†æ¶å¼çš„é‡ç”¨**ã€‚å‡½æ•°å¼ç¼–ç¨‹çš„ç¨‹åºæ„é€ æ›´æ–¹ä¾¿**åœ¨æ¯”è¾ƒç»†å°çš„å±‚é¢ä¸Šé‡ç”¨ä»£ç **ã€‚

### å‡½æ•°å¼ç¼–ç¨‹2

å®ç°ï¼šå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåå­—åˆ—è¡¨ï¼Œå…¶ä¸­ä¸€äº›æ¡ç›®ç”±å•ä¸ªå­—ç¬¦ä¸²æ„æˆã€‚ç°åœ¨çš„ä»»åŠ¡æ˜¯ï¼Œå°†é™¤å»å•å­—ç¬¦æ¡ç›®å¤–çš„åˆ—è¡¨å†…å®¹ï¼Œæ”¾åœ¨ä¸€ä¸ªé€—å·åˆ†éš”çš„å­—ç¬¦ä¸²é‡Œè¿”å›ï¼Œä¸”æ¯ä¸ªåå­—çš„é¦–å­—æ¯éƒ½è¦å¤§å†™ã€‚

#### å‘½ä»¤å¼è§£æ³•

å‘½ä»¤å¼ç¼–ç¨‹æ˜¯æŒ‰ç…§â€œ**ç¨‹åºæ˜¯ä¸€ç³»åˆ—æ”¹å˜çŠ¶æ€çš„å‘½ä»¤**â€æ¥å»ºæ¨¡çš„ä¸€ç§ç¼–ç¨‹é£æ ¼ã€‚ä¼ ç»Ÿçš„ for å¾ªç¯æ˜¯å‘½ä»¤æ—¶é£æ ¼çš„ç»å¥½ä¾‹å­ï¼šå…ˆç¡®å®šåˆå§‹çŠ¶æ€ï¼Œç„¶åæ¯æ¬¡è¿­ä»£éƒ½æ‰§è¡Œå¾ªç¯ä½“ä¸­çš„ä¸€ç³»åˆ—å‘½ä»¤ã€‚

```swift
let employee = ["neal", "s", "stu", "j", "rich", "bob", "aiden", "j", "ethan", "liam", "mason", "noah", "lucas", "jacob", "jack"]

func cleanNames(names: Array<String>) -> String {
    var cleanedNames = ""
    for name in names {
        if name.count > 1 {
            cleanedNames += name.capitalized + ","
        }
    }
    cleanedNames.remove(at: cleanedNames.index(before: cleanedNames.endIndex))
    return cleanedNames
}
print(cleanNames(names: employee))
```

æ‰“å°ç»“æœï¼š

```js
Neal,Stu,Rich,Bob,Aiden,Ethan,Liam,Mason,Noah,Lucas,Jacob,Jack
```

#### å‡½æ•°å¼è§£æ³•

å‡½æ•°å¼ç¼–ç¨‹**å°†ç¨‹åºæè¿°ä¸ºè¡¨è¾¾å¼å’Œå˜æ¢**ï¼Œä»¥æ•°å­¦æ–¹ç¨‹çš„å½¢å¼å»ºç«‹æ¨¡å‹ï¼Œå¹¶ä¸”å°½é‡é¿å…å¯å˜çš„çŠ¶æ€ã€‚å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€å¯¹é—®é¢˜çš„å½’ç±»ä¸åŒäºå‘½ä»¤å¼è¯­è¨€ã€‚å¦‚å‰é¢æ‰€ç”¨åˆ°çš„å‡ ç§æ“ä½œ `filter`ã€`transform`ã€`cover`ï¼Œ**æ¯ä¸€ç§éƒ½ä½œä¸ºä¸€ä¸ªé€»è¾‘åˆ†ç±»ï¼Œç”±ä¸åŒçš„å‡½æ•°æ‰€ä»£è¡¨**ï¼Œè¿™äº›å‡½æ•°å®ç°äº†ä½å±‚æ¬¡çš„å˜æ¢ï¼Œä½†ä¾èµ–äºå¼€å‘è€…å®šä¹‰çš„é«˜é˜¶å‡½æ•°ä½œä¸ºå‚æ•°æ¥è°ƒæ•´å…¶ä½å±‚æ¬¡è¿è½¬æœºæ„çš„è¿ä½œã€‚

```swift
let employee = ["neal", "s", "stu", "j", "rich", "bob", "aiden", "j", "ethan", "liam", "mason", "noah", "lucas", "jacob", "jack"]

let cleanedNames = employee.filter{ $0.count > 1}
    .map{ $0.capitalized }
    .joined(separator: ",")
print(cleanedNames)
```

æ‰“å°ç»“æœï¼š

```js
Neal,Stu,Rich,Bob,Aiden,Ethan,Liam,Mason,Noah,Lucas,Jacob,Jack
```

å‘½ä»¤å¼è§£æ³•åœ¨å®ç°éƒ¨åˆ†åˆ›å»ºäº†ä¸€ä¸ª `cleanedNames` å¯¹è±¡ï¼Œç„¶åæ ¹æ®ä¸åŒçš„åˆ¤æ–­å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚è€Œå‡½æ•°å¼è§£æ³•ä¸­å¹¶æ²¡æœ‰åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œè€Œæ˜¯é€šè¿‡æ‰§è¡Œä¸åŒçš„å‡½æ•°ï¼Œå°†ç¨‹åºæè¿°ä¸ºå˜æ¢ï¼Œæœ€åç›´æ¥å¾—åˆ°äº†ç»“æœã€‚

## å¹¶è¡Œ

å› ä¸º Swift çš„ map ä¸æ”¯æŒå¹¶è¡Œï¼Œæ‰€ä»¥ä¸Šé¢çš„å‘½ä»¤æ‰§è¡Œä¸²è¡Œçš„ã€‚å¯ä»¥ä¸º Swift æ‰©å±•ä¸€ä¸ªä¸²è¡Œéå†æ–¹æ³•ï¼Œå®ç° java ä¸­å¹¶è¡Œ map çš„åŠŸèƒ½ã€‚

```swift
let employee = ["neal", "s", "stu", "j", "rich", "bob", "aiden", "j", "ethan", "liam", "mason", "noah", "lucas", "jacob", "jack"]

let cleanedNames = employee.filter{ $0.count > 1}
    .map{ $0.capitalized }
    .joined(separator: ",")
print(cleanedNames)

extension Array where Element: Any {
    func parallelMap<T>(_ transform: (Element) -> T) -> [T] {
        let n = self.count
        if n == 0 {
            return []
        }
        
        var result = ContiguousArray<T>()
        result.reserveCapacity(n)
        
        // å°† iterations æ¬¡ä»»åŠ¡æ”¾å…¥åˆ°é˜Ÿåˆ—ä¸­ï¼Œå¼‚æ­¥æ‰§è¡Œã€‚é˜»å¡å½“å‰çº¿ç¨‹ç›´åˆ°å…¨éƒ¨ä»»åŠ¡å®Œæˆã€‚
        DispatchQueue.concurrentPerform(iterations: n) { (i) in
            result.append(transform(self[i]))
        }
        
        return Array<T>(result)
    }
}

let result = employee.filter{ $0.count > 1}
    .parallelMap{ $0.capitalized }
    .joined(separator: ",")
print(result)
```

æ‰“å°ç»“æœï¼š

```js
Neal,Stu,Rich,Bob,Aiden,Ethan,Liam,Mason,Noah,Lucas,Jacob,Jack
Stu,Neal,Bob,Rich,Ethan,Aiden,Liam,Mason,Jack,Lucas,Jacob
```

### çº¿ç¨‹å®‰å…¨

ä»æ‰“å°ç»“æœå¯ä»¥çœ‹åˆ° `parallelMap` æ‰“å°çš„ç»“æ„ä¸¢äº†ä¸€ä¸ªå…ƒç´ ï¼Œè¿™æ˜¯å› ä¸º `parallelMap` æ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚é€šè¿‡ NSLock å®ç°çº¿ç¨‹å®‰å…¨çš„ `parallelMap`ï¼š

```swift
extension Array where Element: Any {
    
    func parallelMap<T>(_ transform: (Element) -> T) -> [T] {
        let n = self.count
        if n == 0 {
            return []
        }

        var result = ContiguousArray<T>()
        result.reserveCapacity(n)
        // çº¿ç¨‹å®‰å…¨æ–¹æ¡ˆï¼šåŠ é”
        var lock = NSLock()
        // å°† iterations æ¬¡ä»»åŠ¡æ”¾å…¥åˆ°é˜Ÿåˆ—ä¸­ï¼Œå¼‚æ­¥æ‰§è¡Œã€‚é˜»å¡å½“å‰çº¿ç¨‹ç›´åˆ°å…¨éƒ¨ä»»åŠ¡å®Œæˆã€‚
        DispatchQueue.concurrentPerform(iterations: n) { (i) in
            lock.lock()
            result.append(transform(self[i]))
            lock.unlock()
        }

        return Array<T>(result)
    }
}
```

## æ€»ç»“

1. å‡½æ•°å¼ç¼–ç¨‹ä¸­å…·æœ‰æ™®éæ„ä¹‰çš„æ„é€ å•å…ƒåŒ…æ‹¬ï¼šç­›é€‰ï¼ˆ`filter`ï¼‰ã€æ˜ å°„ï¼ˆ`map`ï¼‰ã€æŠ˜å /åŒ–çº¦ï¼ˆ`foldLeft`/`reduce`ï¼‰ç­‰ç­‰ã€‚

2. Swift ç»Ÿä¸€çš„å‡½æ•°è¯­æ³•ååˆ†çµæ´»ï¼Œå¯ä»¥è¡¨è¾¾ä»ç®€å•çš„æ— å½¢å¼å‚æ•°çš„ C é£æ ¼å‡½æ•°ï¼Œåˆ°å¤æ‚çš„æ¯ä¸€ä¸ªå½¢å¼å‚æ•°éƒ½å¸¦æœ‰å±€éƒ¨å’Œå¤–éƒ¨å½¢å¼å‚æ•°åçš„ Object-C é£æ ¼æ–¹æ³•çš„ä»»ä½•å†…å®¹ã€‚

3. å½¢å¼å‚æ•°èƒ½æä¾›ä¸€ä¸ªé»˜è®¤çš„å€¼æ¥ç®€åŒ–å‡½æ•°çš„è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥è¢«å½“åšè¾“å…¥è¾“å‡ºå½¢å¼å‚æ•°è¢«ä¼ é€’ï¼Œå®ƒåœ¨å‡½æ•°æ‰§è¡Œå®Œæˆæ—¶ä¿®æ”¹ä¼ é€’æ¥çš„å˜é‡ã€‚

4. Swfit ä¸­çš„æ¯ä¸€ä¸ªå‡½æ•°éƒ½æœ‰ç±»å‹ï¼Œç”±å‡½æ•°çš„**å½¢å¼å‚æ•°ç±»å‹**å’Œ**è¿”å›ç±»å‹**ç»„æˆï¼Œå¯ä»¥åƒ Swfit ä¸­å…¶å®ƒç±»å‹é‚£æ ·ä½¿ç”¨å®ƒã€‚è¿™ä½¿å¾—èƒ½å¤Ÿæ–¹ä¾¿çš„å®ç°ï¼š
   1. å°†ä¸€ä¸ªå‡½æ•°å½“ä½œä¸€ä¸ªå½¢å¼å‚æ•°ä¼ é€’åˆ°å¦å¤–çš„ä¸€ä¸ªå‡½æ•°ä¸­ï¼›
   2. ä¹Ÿå¯ä»¥åœ¨ä¸€ä¸ªå‡½æ•°ä¸­è¿”å›å¦ä¸€ä¸ªå‡½æ•°ï¼›
   3. å‡½æ•°åŒæ—¶ä¹Ÿå¯ä»¥å†™åœ¨å…¶å®ƒå‡½æ•°å†…éƒ¨ï¼Œåœ¨å†…åµŒèŒƒå›´å°è£…æœ‰ç”¨çš„åŠŸèƒ½ã€‚