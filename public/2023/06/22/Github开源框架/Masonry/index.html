<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Githubå¼€æºæ¡†æ¶," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="Masonry">
<meta name="keywords" content="Githubå¼€æºæ¡†æ¶">
<meta property="og:type" content="article">
<meta property="og:title" content="Masonry">
<meta property="og:url" content="http://yoursite.com/2023/06/22/Githubå¼€æºæ¡†æ¶/Masonry/index.html">
<meta property="og:site_name" content="Kevin&#39;s  blog">
<meta property="og:description" content="Masonry">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/2023/06/22/Githubå¼€æºæ¡†æ¶/Githubå¼€æºæ¡†æ¶/Masonry/01.png">
<meta property="og:image" content="http://yoursite.com/2023/06/22/Githubå¼€æºæ¡†æ¶/Masonry/02.png">
<meta property="og:image" content="http://yoursite.com/2023/06/22/Githubå¼€æºæ¡†æ¶/Masonry/03.png">
<meta property="og:image" content="http://yoursite.com/2023/06/22/Githubå¼€æºæ¡†æ¶/Masonry/01.png">
<meta property="og:updated_time" content="2023-08-22T09:44:23.154Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Masonry">
<meta name="twitter:description" content="Masonry">
<meta name="twitter:image" content="http://yoursite.com/2023/06/22/Githubå¼€æºæ¡†æ¶/Githubå¼€æºæ¡†æ¶/Masonry/01.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2023/06/22/Githubå¼€æºæ¡†æ¶/Masonry/"/>





  <title>Masonry | Kevin's  blog</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?a073c6e38282486853e19b272e9e7c34";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Kevin's  blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            å…¬ç›Š404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2023/06/22/Githubå¼€æºæ¡†æ¶/Masonry/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kevin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/myAvatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kevin's  blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Masonry</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2023-06-22T15:14:16+08:00">
                2023-06-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><img src="/2023/06/22/Githubå¼€æºæ¡†æ¶/Masonry/../Githubå¼€æºæ¡†æ¶/Masonry/01.png" alt="01"></p>
<p><a href="https://github.com/SnapKit/Masonry" target="_blank" rel="external">Masonry</a></p>
<a id="more"></a>
<h2 id="é“¾å¼ç¼–ç¨‹"><a href="#é“¾å¼ç¼–ç¨‹" class="headerlink" title="é“¾å¼ç¼–ç¨‹"></a>é“¾å¼ç¼–ç¨‹</h2><h3 id="ç‰¹ç‚¹ä¸€"><a href="#ç‰¹ç‚¹ä¸€" class="headerlink" title="ç‰¹ç‚¹ä¸€"></a>ç‰¹ç‚¹ä¸€</h3><ul>
<li>é“¾å¼ç¼–ç¨‹å¯ä»¥é€šè¿‡ç‚¹è¯­æ³• <code>.</code> è°ƒç”¨å‡½æ•°ã€‚</li>
</ul>
<p>ä¾‹å¦‚ Objective-C ä¸­çš„ getter æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">- (void)viewDidLoad &#123;</div><div class="line">  [<span class="keyword">super</span> viewDidLoad];</div><div class="line">  </div><div class="line">  <span class="type">NSLog</span>(@<span class="string">"%@"</span>, <span class="keyword">self</span>.name);  <span class="comment">// Prints "zhangsan"</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="type">NSString</span> *)name &#123;</div><div class="line">  <span class="keyword">return</span> @<span class="string">"zhangsan"</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨ Objective-C ä¸€èˆ¬ä½¿ç”¨ä¸­æ‹¬å· <code>[]</code> çš„æ–¹å¼è°ƒç”¨è°ƒç”¨å‡½æ•°ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥é€šè¿‡ç‚¹è¯­æ³• <code>.</code> è°ƒç”¨å‡½æ•°ï¼Œä½†æ˜¯ç¼–è¯‘å™¨ä¼šæç¤ºè­¦å‘Šï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">- (void)viewDidLoad &#123;</div><div class="line">  [<span class="keyword">super</span> viewDidLoad];</div><div class="line">  </div><div class="line">  <span class="type">NSLog</span>(@<span class="string">"%@"</span>, <span class="keyword">self</span>.zhangsan);  <span class="comment">// Prints "zhangsan"</span></div><div class="line">  <span class="keyword">self</span>.lisi;  <span class="comment">// Prints "lisi"</span></div><div class="line">  <span class="type">ViewController</span>.wangwu;  <span class="comment">// Prints "wangwu"</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="type">NSString</span> *)zhangsan &#123;</div><div class="line">  <span class="keyword">return</span> @<span class="string">"zhangsan"</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)lisi &#123;</div><div class="line">  <span class="type">NSLog</span>(@<span class="string">"lisi"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (void)wangwu &#123;</div><div class="line">  <span class="type">NSLog</span>(@<span class="string">"wangwu"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è­¦å‘Šå¦‚ä¸‹ï¼š</p>
<p><img src="/2023/06/22/Githubå¼€æºæ¡†æ¶/Masonry/02.png" alt="02"></p>
<h3 id="ç‰¹ç‚¹äºŒ"><a href="#ç‰¹ç‚¹äºŒ" class="headerlink" title="ç‰¹ç‚¹äºŒ"></a>ç‰¹ç‚¹äºŒ</h3><ul>
<li>é“¾å¼ç¼–ç¨‹å¯ä»¥é€šè¿‡ç‚¹è¯­æ³• <code>.</code> <strong>è¿ç»­</strong>è°ƒç”¨å‡½æ•°ã€‚</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">self</span>.lisi.wangwu</div></pre></td></tr></table></figure>
<p>è¦æƒ³å®ç°ä¸Šé¢è¿™æ®µä»£ç ï¼Œå¯ä»¥å‚è€ƒé“¾å¼ç¼–ç¨‹<strong>æ¯ä¸ªæ–¹æ³•éƒ½æœ‰è¿”å›å€¼</strong>çš„ç‰¹ç‚¹ã€‚å¯ä»¥è®©å‡½æ•°æ‰§è¡Œå®Œæˆåè¿”å›å½“å‰å¯¹è±¡ <code>return self</code>ï¼Œå®ç°ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">@implementation <span class="type">ViewController</span></div><div class="line"></div><div class="line">- (void)viewDidLoad &#123;</div><div class="line">  [<span class="keyword">super</span> viewDidLoad];</div><div class="line">  </div><div class="line">  <span class="keyword">self</span>.lisi.wangwu;  <span class="comment">// [[self lisi] wangwu]</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="type">ViewController</span> *)lisi &#123;</div><div class="line">  <span class="type">NSLog</span>(@<span class="string">"lisi"</span>);</div><div class="line">  <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="type">ViewController</span> *)wangwu &#123;</div><div class="line">  <span class="type">NSLog</span>(@<span class="string">"wangwu"</span>);</div><div class="line">  <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>æ‰“å°ç»“æœï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">lisi</div><div class="line">wangwu</div></pre></td></tr></table></figure>
<p>ä¸Šé¢è¿™æ®µä»£ç ï¼Œæ˜¯å‚è€ƒ Objective-C è°ƒç”¨ getter æ–¹æ³•å®ç°çš„ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼è¿˜æ¯”è¾ƒå±€é™ã€‚ä¾‹å¦‚å¸¦æœ‰å‚æ•°çš„å‡½æ•°è°ƒç”¨ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">@implementation <span class="type">ViewController</span></div><div class="line"></div><div class="line">- (void)viewDidLoad &#123;</div><div class="line">  [<span class="keyword">super</span> viewDidLoad];</div><div class="line"></div><div class="line">  [<span class="keyword">self</span> lisi:@<span class="string">"name1"</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)lisi:(<span class="type">NSString</span> *)name &#123;</div><div class="line">  <span class="type">NSLog</span>(@<span class="string">"%@: lisi"</span>, name);</div><div class="line">&#125;</div><div class="line">@end</div></pre></td></tr></table></figure>
<p>æ‰“å°ç»“æœï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">name1: lisi</div></pre></td></tr></table></figure>
<p>å‡½æ•°å¾€å¾€æ˜¯å¸¦æœ‰å‚æ•°çš„ï¼Œå¦‚æœéœ€è¦ä¼ å…¥å‚æ•°ï¼Œè¯¥æ€ä¹ˆç”¨ç‚¹è¯­æ³•<code>.</code>å®ç°å‘¢ï¼Ÿ</p>
<p>è¿™ä¸ªæ—¶å€™ block å°±è¯¥ç™»åœºäº†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">@implementation <span class="type">ViewController</span></div><div class="line"></div><div class="line">- (void)viewDidLoad &#123;</div><div class="line">  [<span class="keyword">super</span> viewDidLoad];</div><div class="line">  <span class="keyword">self</span>.lisi(@<span class="string">"name1"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void(^)(<span class="type">NSString</span> *name))lisi &#123;</div><div class="line">  void(^block)(<span class="type">NSString</span> *name) = ^(<span class="type">NSString</span> *name) &#123;</div><div class="line">    <span class="type">NSLog</span>(@<span class="string">"%@: lisi"</span>, name);</div><div class="line">  &#125;;</div><div class="line">  <span class="keyword">return</span> block;</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>é€šè¿‡ block è½»æ¾å®ç°äº†å¸¦æœ‰å‚æ•°çš„ getter æ–¹æ³•ï¼Œä»è€Œæ»¡è¶³çš„ç‚¹è¯­æ³•è°ƒç”¨å¸¦å‚å‡½æ•°çš„è¦æ±‚ã€‚ä½†æ˜¯è¿™æ ·è¿˜ä¸èƒ½æ»¡è¶³<strong>ç‚¹è¯­æ³•è¿ç»­è°ƒç”¨</strong>çš„ç‰¹ç‚¹ï¼Œå¦‚è¿ç»­è°ƒç”¨ä¸¤ä¸ªæˆ–å¤šä¸ªå¸¦å‚å‡½æ•°ï¼Œè¯¥æ€ä¹ˆå®ç°å‘¢ï¼Ÿ</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">@implementation <span class="type">ViewController</span></div><div class="line"></div><div class="line">- (void)viewDidLoad &#123;</div><div class="line">  [<span class="keyword">super</span> viewDidLoad];</div><div class="line"></div><div class="line">  [[<span class="keyword">self</span> lisi:@<span class="string">"name1"</span>] wangwu:@<span class="string">"name2"</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="type">ViewController</span> *)lisi:(<span class="type">NSString</span> *)name &#123;</div><div class="line">  <span class="type">NSLog</span>(@<span class="string">"%@: lisi"</span>, name);</div><div class="line">  <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="type">ViewController</span> *)wangwu:(<span class="type">NSString</span> *)name &#123;</div><div class="line">  <span class="type">NSLog</span>(@<span class="string">"%@: wangwu"</span>, name);</div><div class="line">  <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>æ‰“å°ç»“æœï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">name1: lisi</div><div class="line">name2: wangwu</div></pre></td></tr></table></figure>
<p>æ ¹æ®ä¸Šé¢è°ƒç”¨ä¸€ä¸ªå¸¦å‚å‡½æ•°çš„å®ç°ï¼Œå¯ä»¥æƒ³åˆ°ä½¿ç”¨ç‚¹è¯­æ³•è¿ç»­è°ƒç”¨å¸¦å‚å‡½æ•°çš„ä»£ç åº”è¯¥é•¿è¿™ä¸ªæ ·å­ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">self</span>.lisi(@<span class="string">"name1"</span>).wangwu(@<span class="string">"name2"</span>)</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ—¶å€™å¸¦æœ‰<strong>è¿”å›å€¼</strong>çš„ block å°±è¯¥ç™»åœºäº†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">@implementation <span class="type">ViewController</span></div><div class="line"></div><div class="line">- (void)viewDidLoad &#123;</div><div class="line">  [<span class="keyword">super</span> viewDidLoad];</div><div class="line"></div><div class="line">  <span class="keyword">self</span>.lisi(@<span class="string">"name1"</span>).wangwu(@<span class="string">"name2"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="type">ViewController</span> *(^)(<span class="type">NSString</span> *name))lisi &#123;</div><div class="line">  <span class="type">ViewController</span> *(^block)(<span class="type">NSString</span> *name) = ^(<span class="type">NSString</span> *name) &#123;</div><div class="line">    <span class="type">NSLog</span>(@<span class="string">"%@: lisi"</span>, name);</div><div class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">  &#125;;</div><div class="line">  <span class="keyword">return</span> block;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="type">ViewController</span> *(^)(<span class="type">NSString</span> *name))wangwu &#123;</div><div class="line">  <span class="type">ViewController</span> *(^block)(<span class="type">NSString</span> *name) = ^(<span class="type">NSString</span> *name) &#123;</div><div class="line">    <span class="type">NSLog</span>(@<span class="string">"%@: wangwu"</span>, name);</div><div class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">  &#125;;</div><div class="line">  <span class="keyword">return</span> block;</div><div class="line">&#125;</div><div class="line">@end</div></pre></td></tr></table></figure>
<p>æ‰“å°ç»“æœï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">name1: lisi</div><div class="line">name2: wangwu</div></pre></td></tr></table></figure>
<p>å®ç°ç»†èŠ‚ï¼š</p>
<ol>
<li><code>self.lisi</code> è¿”å›äº†ä¸€ä¸ªç±»å‹ä¸º <code>ViewController *(^)(NSString *name)</code> çš„ blockï¼ˆå‚æ•°ç±»å‹ï¼š<code>NSString*</code>ï¼Œè¿”å›å€¼ç±»å‹ï¼š<code>ViewController*</code>ï¼‰ï¼›</li>
<li>é€šè¿‡æ‹¬å· <code>()</code> æ¥å®ç° block çš„è°ƒç”¨ï¼Œæ‹¬å·å†…æ˜¯éœ€è¦ä¼ é€’çš„å‚æ•°ï¼Œ<code>self.lisi(@&quot;name1&quot;)</code>ï¼›</li>
<li>block è°ƒç”¨åè¿”å›äº†å½“å‰å¯¹è±¡ <code>self</code>ï¼Œä»è€Œå®ç°äº†ç‚¹è¯­æ³•<code>.</code>è¿ç»­è°ƒç”¨ï¼Œ<code>self.lisi(@&quot;name1&quot;).wangwu(@&quot;name2&quot;)</code>ã€‚</li>
</ol>
<h3 id="ç‰¹ç‚¹ä¸‰"><a href="#ç‰¹ç‚¹ä¸‰" class="headerlink" title="ç‰¹ç‚¹ä¸‰"></a>ç‰¹ç‚¹ä¸‰</h3><ul>
<li>é“¾å¼ç¼–ç¨‹å¯ä»¥é€šè¿‡ç‚¹è¯­æ³• <code>.</code> <strong>æ— é™</strong>è¿ç»­è°ƒç”¨å‡½æ•°ã€‚</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">self</span>.lisi(@<span class="string">"name1"</span>).wangwu(@<span class="string">"name2"</span>).lisi(@<span class="string">"name1"</span>).wangwu(@<span class="string">"name2"</span>).lisi(@<span class="string">"name1"</span>).wangwu(@<span class="string">"name2"</span>).lisi(@<span class="string">"name1"</span>).wangwu(@<span class="string">"name2"</span>).lisi(@<span class="string">"name1"</span>).wangwu(@<span class="string">"name2"</span>).lisi(@<span class="string">"name1"</span>).wangwu(@<span class="string">"name2"</span>);</div></pre></td></tr></table></figure>
<p>æ‰“å°ç»“æœï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">name1: lisi</div><div class="line">name2: wangwu</div><div class="line">name1: lisi</div><div class="line">name2: wangwu</div><div class="line">name1: lisi</div><div class="line">name2: wangwu</div><div class="line">name1: lisi</div><div class="line">name2: wangwu</div><div class="line">name1: lisi</div><div class="line">name2: wangwu</div><div class="line">name1: lisi</div><div class="line">name2: wangwu</div></pre></td></tr></table></figure>
<h2 id="Masonryç®€ä»‹"><a href="#Masonryç®€ä»‹" class="headerlink" title="Masonryç®€ä»‹"></a>Masonryç®€ä»‹</h2><p>æ¥è‡ª Masonry è¯´æ˜æ–‡æ¡£é‡Œçš„ç¤ºä¾‹ï¼šåˆ›å»ºä¸€ä¸ª viewï¼Œå®ƒçš„ä¸Šä¸‹å·¦å³å››ä¸ªè¾¹å’Œçˆ¶è§†å›¾çš„å››ä¸ªè¾¹ç›¸è· 10 çš„è·ç¦»ã€‚</p>
<p><img src="/2023/06/22/Githubå¼€æºæ¡†æ¶/Masonry/03.png" alt="03"></p>
<p>æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨ <code>NSLayoutConstraints</code> å¸ƒå±€çš„å®ç°ä»£ç </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="type">UIView</span> *superview = <span class="keyword">self</span>.view;</div><div class="line"></div><div class="line"><span class="type">UIView</span> *view1 = [[<span class="type">UIView</span> alloc] <span class="keyword">init</span>];</div><div class="line">view1.translatesAutoresizingMaskIntoConstraints = <span class="type">NO</span>;</div><div class="line">view1.backgroundColor = [<span class="type">UIColor</span> greenColor];</div><div class="line">[superview addSubview:view1];</div><div class="line"></div><div class="line"><span class="type">UIEdgeInsets</span> padding = <span class="type">UIEdgeInsetsMake</span>(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment">1. æ·»åŠ çº¦æŸç»„åˆ</span></div><div class="line"><span class="comment">2. çº¦æŸç”Ÿæ•ˆ</span></div><div class="line"><span class="comment">*/</span></div><div class="line">[superview addConstraints:@[</div><div class="line">   <span class="comment">// çº¦æŸå¯¹è±¡1ï¼šview1-topï¼Œview2-topï¼ŒEQUAL</span></div><div class="line">   [<span class="type">NSLayoutConstraint</span> constraintWithItem:view1</div><div class="line">                                attribute:<span class="type">NSLayoutAttributeTop</span></div><div class="line">                                relatedBy:<span class="type">NSLayoutRelationEqual</span></div><div class="line">                                   toItem:superview</div><div class="line">                                attribute:<span class="type">NSLayoutAttributeTop</span></div><div class="line">                               multiplier:<span class="number">1.0</span></div><div class="line">                                 constant:padding.top],</div><div class="line">   <span class="comment">// çº¦æŸå¯¹è±¡2ï¼šview1-leftï¼Œview2-leftï¼ŒEQUAL</span></div><div class="line">   [<span class="type">NSLayoutConstraint</span> constraintWithItem:view1</div><div class="line">                                attribute:<span class="type">NSLayoutAttributeLeft</span></div><div class="line">                                relatedBy:<span class="type">NSLayoutRelationEqual</span></div><div class="line">                                   toItem:superview</div><div class="line">                                attribute:<span class="type">NSLayoutAttributeLeft</span></div><div class="line">                               multiplier:<span class="number">1.0</span></div><div class="line">                                 constant:padding.<span class="keyword">left</span>],</div><div class="line">   <span class="comment">// çº¦æŸå¯¹è±¡3ï¼šview1-bottomï¼Œview2-bottomï¼ŒEQUAL</span></div><div class="line">   [<span class="type">NSLayoutConstraint</span> constraintWithItem:view1</div><div class="line">                                attribute:<span class="type">NSLayoutAttributeBottom</span></div><div class="line">                                relatedBy:<span class="type">NSLayoutRelationEqual</span></div><div class="line">                                   toItem:superview</div><div class="line">                                attribute:<span class="type">NSLayoutAttributeBottom</span></div><div class="line">                               multiplier:<span class="number">1.0</span></div><div class="line">                                 constant:-padding.bottom],</div><div class="line">   <span class="comment">// çº¦æŸå¯¹è±¡4ï¼šview1-rightï¼Œview2-rightï¼ŒEQUAL</span></div><div class="line">   [<span class="type">NSLayoutConstraint</span> constraintWithItem:view1</div><div class="line">                                attribute:<span class="type">NSLayoutAttributeRight</span></div><div class="line">                                relatedBy:<span class="type">NSLayoutRelationEqual</span></div><div class="line">                                   toItem:superview</div><div class="line">                                attribute:<span class="type">NSLayoutAttributeRight</span></div><div class="line">                               multiplier:<span class="number">1</span></div><div class="line">                                 constant:-padding.<span class="keyword">right</span>],</div><div class="line"></div><div class="line">]];</div></pre></td></tr></table></figure>
<p>æ–¹æ¡ˆäºŒï¼šè¿™æ˜¯ä½¿ç”¨ Masonry å¸ƒå±€çš„å®ç°ä»£ç </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="type">UIView</span> *superview = <span class="keyword">self</span>.view;</div><div class="line"></div><div class="line"><span class="type">UIView</span> *view1 = [[<span class="type">UIView</span> alloc] <span class="keyword">init</span>];</div><div class="line">view1.translatesAutoresizingMaskIntoConstraints = <span class="type">NO</span>;</div><div class="line">view1.backgroundColor = [<span class="type">UIColor</span> greenColor];</div><div class="line">[superview addSubview:view1];</div><div class="line"></div><div class="line"><span class="type">UIEdgeInsets</span> padding = <span class="type">UIEdgeInsetsMake</span>(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment">1. æ·»åŠ çº¦æŸç»„åˆ</span></div><div class="line"><span class="comment">2. çº¦æŸç”Ÿæ•ˆ</span></div><div class="line"><span class="comment">*/</span></div><div class="line">[view1 mas_makeConstraints:^(<span class="type">MASConstraintMaker</span> *make) &#123;</div><div class="line">   make.top.equalTo(superview.mas_top).with.offset(padding.top);</div><div class="line">   make.<span class="keyword">left</span>.equalTo(superview.mas_left).with.offset(padding.<span class="keyword">left</span>);</div><div class="line">   make.bottom.equalTo(superview.mas_bottom).with.offset(-padding.bottom);</div><div class="line">   make.<span class="keyword">right</span>.equalTo(superview.mas_right).with.offset(-padding.<span class="keyword">right</span>);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å¾—å‡º Masonry ä½œè€…é€šè¿‡ä¸¾å‡ºè¿™ä¸ªä¾‹å­æƒ³è¦è¡¨è¾¾çš„æ„æ€ï¼Œç”¨ Masonry å¸ƒå±€çœŸçš„å¤ªæ–¹ä¾¿äº†ã€‚</p>
<h2 id="Autolayout"><a href="#Autolayout" class="headerlink" title="Autolayout"></a>Autolayout</h2><h3 id="NSLayoutConstraint"><a href="#NSLayoutConstraint" class="headerlink" title="NSLayoutConstraint"></a>NSLayoutConstraint</h3><p>ä¸Šé¢çš„ä¾‹å­æ·»åŠ äº†ä¸€ä¸ª view åˆ°è§†å›¾ä¸Šï¼Œè¯¥ view çš„å››ä¸ªè¾¹å’Œ superview çš„å››ä¸ªè¾¹è®¾ç½®è¾¹è·ä¸º 10ï¼Œè€Œè¿™æ¯ä¸€ä¸ªè¾¹çš„è¾¹è·éƒ½å¯¹åº”ç€ä¸€ä¸ª<strong>çº¦æŸå¯¹è±¡</strong>ï¼ˆ<code>NSLayoutConstraint</code>ï¼‰ã€‚</p>
<p>å¦‚ä¸Šè¾¹çš„çº¦æŸå¯¹è±¡çš„åˆå§‹åŒ–æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// view1-top, view2-top, EQUAL</span></div><div class="line"><span class="type">NSLayoutConstraint</span> *constraint = [<span class="type">NSLayoutConstraint</span> constraintWithItem:view1</div><div class="line">                                                              attribute:<span class="type">NSLayoutAttributeTop</span></div><div class="line">                                                              relatedBy:<span class="type">NSLayoutRelationEqual</span></div><div class="line">                                                                 toItem:superview</div><div class="line">                                                              attribute:<span class="type">NSLayoutAttributeTop</span></div><div class="line">                                                             multiplier:<span class="number">1.0</span></div><div class="line">                                                               constant:padding.top],</div></pre></td></tr></table></figure>
<p>ä»è¿™æ®µä»£ç ä¸éš¾çœ‹å‡ºï¼Œçº¦æŸæ˜¯ç›¸å¯¹çš„ï¼Œè‡³å°‘éœ€è¦ä¸¤ä¸ª view æ‰èƒ½åˆ›å»ºå‡ºä¸€ä¸ªçº¦æŸå¯¹è±¡ã€‚å¯ä»¥æ€»ç»“å‡ºåˆ›å»ºä¸€ä¸ªçº¦æŸå¯¹è±¡çš„æ¡ä»¶ï¼š</p>
<ol>
<li>ç¬¬ä¸€ä¸ªè§†å›¾ï¼›</li>
<li>ç¬¬ä¸€ä¸ªè§†å›¾çš„çº¦æŸå±æ€§ï¼ˆçº¦æŸæ–¹å‘ï¼šä¸Š/ä¸‹/å·¦/å³ç­‰ï¼‰ï¼›</li>
<li>ç¬¬äºŒä¸ªè§†å›¾ï¼›</li>
<li>ç¬¬äºŒä¸ªè§†å›¾çš„çº¦æŸå±æ€§ï¼ˆçº¦æŸæ–¹å‘ï¼šä¸Š/ä¸‹/å·¦/å³ç­‰ï¼‰ï¼›</li>
<li>çº¦æŸå…³ç³»ï¼ˆç­‰äº/å¤§äº/å°äºï¼‰ï¼›</li>
</ol>
<p>è¿™äº”ä¸ªæ¡ä»¶æ˜¯ç”Ÿæˆä¸€ä¸ªçº¦æŸå¯¹è±¡æ‰€å¿…é¡»çš„ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªçº¦æŸå¯¹è±¡æ‰€æ‹¥æœ‰çš„æœ€åŸºç¡€çš„å…ƒç´ ã€‚è¿™ä¸€ç‚¹åœ¨ <code>NSLayoutConstraint.h</code> æ–‡ä»¶ä¸­å®šä¹‰çš„å±æ€§ä¹Ÿèƒ½çœ‹å‡ºæ¥ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">@interface <span class="type">NSLayoutConstraint</span> : <span class="type">NSObject</span></div><div class="line"></div><div class="line"><span class="comment">/// ç¬¬ä¸€ä¸ªè§†å›¾</span></div><div class="line">@property (nullable, readonly, assign) id firstItem;</div><div class="line"><span class="comment">/// ç¬¬äºŒä¸ªè§†å›¾</span></div><div class="line">@property (nullable, readonly, assign) id secondItem;</div><div class="line"><span class="comment">/// ç¬¬ä¸€ä¸ªè§†å›¾çš„çº¦æŸå±æ€§</span></div><div class="line">@property (readonly) <span class="type">NSLayoutAttribute</span> firstAttribute;</div><div class="line"><span class="comment">/// ç¬¬äºŒä¸ªè§†å›¾çš„çº¦æŸå±æ€§</span></div><div class="line">@property (readonly) <span class="type">NSLayoutAttribute</span> secondAttribute;</div><div class="line"><span class="comment">/// çº¦æŸå…³ç³»</span></div><div class="line">@property (readonly) <span class="type">NSLayoutRelation</span> relation;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<h3 id="NSLayoutAttribute"><a href="#NSLayoutAttribute" class="headerlink" title="NSLayoutAttribute"></a>NSLayoutAttribute</h3><p>åœ¨ <code>NSLayoutConstraint.h</code> æ–‡ä»¶ä¸­å®šä¹‰çš„å±æ€§ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ä¸¤ä¸ªçº¦æŸå±æ€§ <code>firstAttribute</code> å’Œ <code>secondAttribute</code>ï¼Œå®ƒä»¬ç”¨æ¥æè¿°è§†å›¾çš„é‚£ä¸€ä¸ªæ–¹å‘éœ€è¦æ·»åŠ çº¦æŸã€‚<code>NSLayoutAttribute</code> æ˜¯ä¸€ä¸ªæšä¸¾ï¼Œå®šä¹‰äº†è§†å›¾æ”¯æŒè‡ªåŠ¨å¸ƒå±€çš„å„ä¸ªä½ç½®ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line">typedef <span class="type">NS_ENUM</span>(<span class="type">NSInteger</span>, <span class="type">NSLayoutAttribute</span>) &#123;</div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">     * è§†å›¾ä½ç½®</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="type">NSLayoutAttributeLeft</span> = <span class="number">1</span>,</div><div class="line">    <span class="type">NSLayoutAttributeRight</span>,</div><div class="line">    <span class="type">NSLayoutAttributeTop</span>,</div><div class="line">    <span class="type">NSLayoutAttributeBottom</span>,</div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">     * è§†å›¾å‰å</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="type">NSLayoutAttributeLeading</span>,</div><div class="line">    <span class="type">NSLayoutAttributeTrailing</span>,</div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">     * è§†å›¾å®½é«˜</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="type">NSLayoutAttributeWidth</span>,</div><div class="line">    <span class="type">NSLayoutAttributeHeight</span>,</div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">     * è§†å›¾ä¸­å¿ƒ</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="type">NSLayoutAttributeCenterX</span>,</div><div class="line">    <span class="type">NSLayoutAttributeCenterY</span>,</div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">     * è§†å›¾åŸºçº¿</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="type">NSLayoutAttributeLastBaseline</span>,</div><div class="line">#<span class="keyword">if</span> <span class="type">TARGET_OS_IPHONE</span></div><div class="line">    <span class="type">NSLayoutAttributeBaseline</span> <span class="type">NS_SWIFT_UNAVAILABLE</span>(<span class="string">"Use 'lastBaseline' instead"</span>) = <span class="type">NSLayoutAttributeLastBaseline</span>,</div><div class="line">#<span class="keyword">else</span></div><div class="line">    <span class="type">NSLayoutAttributeBaseline</span> = <span class="type">NSLayoutAttributeLastBaseline</span>,</div><div class="line">#endif</div><div class="line">    <span class="type">NSLayoutAttributeFirstBaseline</span> <span class="type">API_AVAILABLE</span>(macos(<span class="number">10.11</span>), ios(<span class="number">8.0</span>)),</div><div class="line"></div><div class="line">#<span class="keyword">if</span> <span class="type">TARGET_OS_IPHONE</span></div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">     * è§†å›¾ä½ç½®ï¼ˆå¸¦è¾¹è·ï¼‰</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="type">NSLayoutAttributeLeftMargin</span> <span class="type">API_AVAILABLE</span>(ios(<span class="number">8.0</span>)),</div><div class="line">    <span class="type">NSLayoutAttributeRightMargin</span> <span class="type">API_AVAILABLE</span>(ios(<span class="number">8.0</span>)),</div><div class="line">    <span class="type">NSLayoutAttributeTopMargin</span> <span class="type">API_AVAILABLE</span>(ios(<span class="number">8.0</span>)),</div><div class="line">    <span class="type">NSLayoutAttributeBottomMargin</span> <span class="type">API_AVAILABLE</span>(ios(<span class="number">8.0</span>)),</div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">     * è§†å›¾å‰åï¼ˆå¸¦è¾¹è·ï¼‰</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="type">NSLayoutAttributeLeadingMargin</span> <span class="type">API_AVAILABLE</span>(ios(<span class="number">8.0</span>)),</div><div class="line">    <span class="type">NSLayoutAttributeTrailingMargin</span> <span class="type">API_AVAILABLE</span>(ios(<span class="number">8.0</span>)),</div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">     * è§†å›¾ä¸­å¿ƒï¼ˆå¸¦è¾¹è·ï¼‰</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="type">NSLayoutAttributeCenterXWithinMargins</span> <span class="type">API_AVAILABLE</span>(ios(<span class="number">8.0</span>)),</div><div class="line">    <span class="type">NSLayoutAttributeCenterYWithinMargins</span> <span class="type">API_AVAILABLE</span>(ios(<span class="number">8.0</span>)),</div><div class="line">#endif</div><div class="line">    <span class="comment">// å ä½ç¬¦</span></div><div class="line">    <span class="type">NSLayoutAttributeNotAnAttribute</span> = <span class="number">0</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>å…³äºå¸¦ Margin çš„æšä¸¾å€¼ï¼š</p>
<ol>
<li><code>NSLayoutAttributeLeft</code> è¡¨ç¤ºè§†å›¾çš„æœ€å·¦è¾¹ï¼›</li>
<li><code>NSLayoutAttributeLeftMargin</code> è¡¨ç¤ºè§†å›¾çš„å·¦è¾¹ï¼Œä¸”ä¸çˆ¶è§†å›¾çš„å·¦è¾¹å…·æœ‰ä¸€ä¸ªè¾¹è·ï¼ˆmarginï¼‰ï¼Œè¿™ä¸ªå€¼é€šè¿‡ <code>layoutMargins</code> è¿›è¡Œä¿®æ”¹ã€‚</li>
</ol>
<h3 id="NSLayoutRelation"><a href="#NSLayoutRelation" class="headerlink" title="NSLayoutRelation"></a>NSLayoutRelation</h3><p>çº¦æŸå…³ç³»ï¼Œåœ¨åˆ›å»ºçº¦æŸå¯¹è±¡æ—¶ï¼Œéœ€è¦æ˜ç¡®æŒ‡å‡ºä¸¤ä¸ªè§†å›¾çš„çº¦æŸå…³ç³»ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">typedef <span class="type">NS_ENUM</span>(<span class="type">NSInteger</span>, <span class="type">NSLayoutRelation</span>) &#123;</div><div class="line">    <span class="comment">/// &lt;=</span></div><div class="line">    <span class="type">NSLayoutRelationLessThanOrEqual</span> = -<span class="number">1</span>,</div><div class="line">    <span class="comment">/// ==</span></div><div class="line">    <span class="type">NSLayoutRelationEqual</span> = <span class="number">0</span>,</div><div class="line">    <span class="comment">/// &gt;=</span></div><div class="line">    <span class="type">NSLayoutRelationGreaterThanOrEqual</span> = <span class="number">1</span>,</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="Masonryçš„UML"><a href="#Masonryçš„UML" class="headerlink" title="Masonryçš„UML"></a>Masonryçš„UML</h2><p><img src="/2023/06/22/Githubå¼€æºæ¡†æ¶/Masonry/01.png" alt="01"></p>
<p>å›¾ä¸­ä»å·¦è‡³å³æŠŠ Masonry åˆ†ä¸ºä¸‰å—ï¼š</p>
<ol>
<li><code>View+MASAdditions</code>ï¼Œ<code>UIView</code> çš„å»¶å±•ï¼Œè®© <code>UIView</code> æ›´æ–¹ä¾¿çš„è°ƒç”¨ Masonry æä¾›çš„å±æ€§å’Œæ–¹æ³•ï¼Œè¿™ä¹Ÿæ˜¯ä¸‰æ–¹æ¡†æ¶æƒ¯ç”¨çš„æ‰‹æ®µï¼Œä¸ºæ— è®¿é—®æƒé™çš„æºä»£ç æ‰©å±•èƒ½åŠ›ï¼ˆé€†å‘å»ºæ¨¡ï¼‰ï¼›</li>
<li><code>MASConstraintMaker</code>ï¼Œç®€ç§° Makerï¼Œæ˜¯<strong>åˆ›å»ºçº¦æŸ</strong>çš„å·¥å‚æ–¹æ³•ï¼Œå³æ‰€æœ‰ç±»éƒ½ä¼šä»¥å„ç§æ–¹å¼è°ƒç”¨åˆ°è¿™ä¸ªç±»é‡Œï¼Œç”±å®ƒæ¥å®Œæˆåˆ›å»ºçº¦æŸçš„æ“ä½œï¼›</li>
<li><code>MASConstraint</code>ï¼Œç®€ç§° Constantï¼ˆçº¦æŸï¼‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡çˆ¶ç±»ï¼Œå…³è”çš„å­ç±»æœ‰ï¼š<code>MASViewConstraint</code>ï¼ˆå•ä¸ªçº¦æŸï¼‰ã€<code>MASCompositeConstraint</code>ï¼ˆçº¦æŸç»“åˆï¼‰ï¼Œéƒ½è¢« Maker åˆ›å»ºã€‚</li>
</ol>
<p>å› ä¸º Masonry æ˜¯é‡‡ç”¨é“¾å¼ç¼–ç¨‹çš„èŒƒå¼æ„å»ºçš„ï¼Œä¹Ÿæ˜¯å°±æ˜¯ä¸‡ç‰©çš†å¯ç‚¹ï¼Œä¸€ç›´ç‚¹ä¸€ç›´æœ‰ï¼ˆè¿”å›å€¼ï¼‰ï¼Œæ‰€ä»¥è¿™ä¸‰ä¸ªæ¨¡å—åŒ…å«ä½¿ç”¨ç‚¹è¯­æ³•è°ƒç”¨çš„å±æ€§æˆ–å‡½æ•°ã€‚</p>
<h3 id="View-MASAdditions"><a href="#View-MASAdditions" class="headerlink" title="View+MASAdditions"></a>View+MASAdditions</h3><p>ğŸ¤”æ€è€ƒï¼š<code>UIView</code> é€šè¿‡ç‚¹è¯­æ³•ä¼šè¿”å›ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>å¯¹ <code>UIView</code> çš„å»¶å±•ï¼Œä¸»è¦æ˜¯ä¸ºäº†é€šè¿‡æ‹“å±•çš„æ–¹å¼<strong>æ”¾å¤§æ¥å£</strong>ï¼Œç»™ <code>UIView</code> å¢åŠ æ–°çš„å±æ€§å’Œæ–¹æ³•ï¼š</p>
<ol>
<li>å±æ€§åˆ›é€  <code>MASViewAttribute</code>ï¼Œç®€ç§° Attributeï¼Œçº¦æŸå±æ€§ï¼Œå®ƒåˆ›å»ºçº¦æŸå¯¹è±¡çš„æ¡ä»¶ä¹‹ä¸€ï¼›</li>
<li>æ–¹æ³•åˆ›é€  <code>MASConstraintMaker</code>ï¼Œç®€ç§° Makerã€‚</li>
</ol>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">@interface <span class="type">MAS_VIEW</span> (<span class="type">MASAdditions</span>)</div><div class="line"></div><div class="line">@property (nonatomic, strong, readonly) <span class="type">MASViewAttribute</span> *mas_left;</div><div class="line">@property (nonatomic, strong, readonly) <span class="type">MASViewAttribute</span> *mas_top;</div><div class="line">@property (nonatomic, strong, readonly) <span class="type">MASViewAttribute</span> *mas_right;</div><div class="line">@property (nonatomic, strong, readonly) <span class="type">MASViewAttribute</span> *mas_bottom;</div><div class="line"></div><div class="line">- (<span class="type">NSArray</span> *)mas_makeConstraints:(void(<span class="type">NS_NOESCAPE</span> ^)(<span class="type">MASConstraintMaker</span> *make))block;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>å®šä¹‰å±æ€§çš„ç›®çš„ï¼Œæ˜¯æƒ³åˆ©ç”¨å±æ€§çš„ getter æ–¹æ³•ï¼Œä»è€Œå®ç°é€šè¿‡ç‚¹è¯­æ³•è°ƒç”¨å‡½æ•°çš„æ–¹å¼ï¼Œåˆ›å»ºçº¦æŸå±æ€§ã€‚</p>
<p>ä¸‹é¢æ˜¯å±æ€§çš„ getter æ–¹æ³•çš„å…·ä½“å®ç°ï¼Œå†…éƒ¨ç›´æ¥è¿”å›äº†ä¸€ä¸ªåˆå§‹åŒ–å¥½çš„çº¦æŸå±æ€§ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">@implementation <span class="type">MAS_VIEW</span> (<span class="type">MASAdditions</span>)</div><div class="line"></div><div class="line">- (<span class="type">NSArray</span> *)mas_makeConstraints:(void(^)(<span class="type">MASConstraintMaker</span> *))block &#123;</div><div class="line">    <span class="comment">// 1.è®¾ç½®ä¸æ”¯æŒ AutoresizingMask</span></div><div class="line">    <span class="keyword">self</span>.translatesAutoresizingMaskIntoConstraints = <span class="type">NO</span>;</div><div class="line">    <span class="comment">// 2.åˆå§‹åŒ–ä¸“å±çº¦æŸåˆ›é€ è€… Maker</span></div><div class="line">    <span class="type">MASConstraintMaker</span> *constraintMaker = [[<span class="type">MASConstraintMaker</span> alloc] initWithView:<span class="keyword">self</span>];</div><div class="line">    <span class="comment">// 3.æ”¶é›†çº¦æŸ</span></div><div class="line">    block(constraintMaker);</div><div class="line">    <span class="comment">// 4.æ·»åŠ çº¦æŸï¼ˆåº”ç”¨çº¦æŸï¼‰</span></div><div class="line">    <span class="keyword">return</span> [constraintMaker install];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="type">MASViewAttribute</span> *)mas_left &#123;</div><div class="line">    <span class="keyword">return</span> [[<span class="type">MASViewAttribute</span> alloc] initWithView:<span class="keyword">self</span> layoutAttribute:<span class="type">NSLayoutAttributeLeft</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="type">MASViewAttribute</span> *)mas_top &#123;</div><div class="line">    <span class="keyword">return</span> [[<span class="type">MASViewAttribute</span> alloc] initWithView:<span class="keyword">self</span> layoutAttribute:<span class="type">NSLayoutAttributeTop</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="type">MASViewAttribute</span> *)mas_right &#123;</div><div class="line">    <span class="keyword">return</span> [[<span class="type">MASViewAttribute</span> alloc] initWithView:<span class="keyword">self</span> layoutAttribute:<span class="type">NSLayoutAttributeRight</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="type">MASViewAttribute</span> *)mas_bottom &#123;</div><div class="line">    <span class="keyword">return</span> [[<span class="type">MASViewAttribute</span> alloc] initWithView:<span class="keyword">self</span> layoutAttribute:<span class="type">NSLayoutAttributeBottom</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>å¯¹ <code>UIView</code> çš„å»¶å±•å¥½å¤„æ˜¯ï¼Œä¸º <code>UIView</code> å¢åŠ äº† Masonry è‡ªå®šä¹‰çš„å±æ€§å’Œæ–¹æ³•ï¼Œä»è€Œä½¿è°ƒç”¨å˜çš„æ›´åŠ ç›´æ¥ï¼Œå°±åƒæ˜¯ <code>UIView</code> åŸæœ¬å°±å…·æœ‰è¿™äº›å±æ€§å’Œæ–¹æ³•ä¸€æ ·ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">- (void)viewDidLoad &#123;</div><div class="line">  [<span class="keyword">super</span> viewDidLoad];</div><div class="line">  </div><div class="line">  <span class="type">UIView</span> *superview = <span class="keyword">self</span>.view;</div><div class="line">  [superview addSubview:view1];</div><div class="line"></div><div class="line">  [view1 mas_makeConstraints:^(<span class="type">MASConstraintMaker</span> *make) &#123;</div><div class="line">      make.top.equalTo(superview.mas_top);</div><div class="line">  &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç»¼ä¸Šæ‰€è¿°ï¼Œ<code>UIView</code> é€šè¿‡ç‚¹è¯­æ³•ä¼šåˆ›å»ºå‡ºä¸€ä¸ªçº¦æŸæ–¹å‘å¯¹è±¡ <code>MASViewAttribute</code>ã€‚</p>
<h3 id="MASViewAttribute"><a href="#MASViewAttribute" class="headerlink" title="MASViewAttribute"></a>MASViewAttribute</h3><ul>
<li>è¿™ä¸€éƒ¨åˆ†å…³å¿ƒçš„æ˜¯ <strong>Attribute</strong>ï¼ˆçº¦æŸå±æ€§ï¼‰ï¼Œä¹Ÿå°±æ˜¯çº¦æŸæ–¹å‘ã€‚</li>
</ul>
<p>é€šè¿‡ä¸Šé¢ğŸ‘†çº¦æŸå±æ€§çš„åˆå§‹åŒ–æ–¹æ³•ï¼Œä¸éš¾çœ‹å‡ºä¸€ä¸ª <code>MASViewAttribute</code> ç±»å‹çš„çº¦æŸå±æ€§ï¼Œè‡³å°‘åŒ…å«ä¸¤ä¸ªä¸œè¥¿ï¼š</p>
<ol>
<li>Viewï¼šè§†å›¾ï¼›</li>
<li>Attributeï¼šçº¦æŸæ–¹å‘ã€‚</li>
</ol>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="type">MASViewAttribute</span> * attribute = [[<span class="type">MASViewAttribute</span> alloc] initWithView:<span class="keyword">self</span> layoutAttribute:<span class="type">NSLayoutAttributeLeft</span>];</div></pre></td></tr></table></figure>
<p>ä» <code>MASViewAttribute.h</code> æ–‡ä»¶é‡Œä¹Ÿèƒ½çœ‹å‡ºè¿™ä¸€ç‚¹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">@interface <span class="type">MASViewAttribute</span> : <span class="type">NSObject</span></div><div class="line"><span class="comment">/// çº¦æŸè§†å›¾</span></div><div class="line">@property (nonatomic, <span class="keyword">weak</span>, readonly) id item;</div><div class="line"><span class="comment">/// çº¦æŸå±æ€§</span></div><div class="line">@property (nonatomic, assign, readonly) <span class="type">NSLayoutAttribute</span> layoutAttribute;</div><div class="line">@end</div></pre></td></tr></table></figure>
<p>ä»å®šä¹‰å¯ä»¥çœ‹å‡º <code>MASViewAttribute</code> å°†çº¦æŸè§†å›¾ View å’Œçº¦æŸå±æ€§ Attribute å°è£…åˆ°äº†åŒä¸€ä¸ªç±»é‡Œï¼Œç›¸å¯¹äº <code>NSLayoutAttribute</code> æšä¸¾æ¥è¯´ï¼Œ<code>MASViewAttribute</code> åˆ›å»ºå‡ºæ¥åæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ‹¥æœ‰æ›´å¤šçš„ä¿¡æ¯ï¼Œä¸”æ›´åŠ çš„é¢å‘å¯¹è±¡ã€‚è¿™ä¹Ÿæ­£å¥½å¼¥è¡¥äº† Objective-C ä¸­æšä¸¾åœ°ä½ä½çš„ç¼ºç‚¹ã€‚</p>
<h3 id="MASConstraintMaker"><a href="#MASConstraintMaker" class="headerlink" title="MASConstraintMaker"></a>MASConstraintMaker</h3><ul>
<li>è¿™ä¸€éƒ¨åˆ†å…³å¿ƒçš„æ˜¯ <strong>Constraint</strong>ï¼ˆçº¦æŸï¼‰çš„åˆ›å»ºåˆ›å»ºè€… <code>MASConstraintMaker</code>ï¼Œç®€ç§° Makerã€‚</li>
</ul>
<p>ğŸ¤”æ€è€ƒï¼šçº¦æŸåˆ›å»ºè€… Maker é€šè¿‡ç‚¹è¯­æ³•ä¼šè¿”å›ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>åˆ›å»ºçº¦æŸçš„å·¥å‚æ–¹æ³•ï¼Œè´Ÿè´£çº¦æŸå¯¹è±¡çš„åˆ›å»ºå·¥ä½œï¼Œå³æ‰€æœ‰ç±»éƒ½ä»¥ä»£ç†çš„æ–¹å¼ï¼Œè°ƒç”¨åˆ°è¿™ä¸ªç±»é‡Œï¼Œç”±å®ƒæ¥å®Œæˆåˆ›å»ºçº¦æŸçš„æ“ä½œã€‚</p>
<p>åœ¨ UIView çš„å»¶å±•éƒ¨åˆ†æåˆ°äº† Maker çš„åˆ›å»ºï¼Œé€šè¿‡è°ƒç”¨ <code>mas_makeConstraints</code> æ–¹æ³•åˆ›å»ºï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">@implementation <span class="type">MAS_VIEW</span> (<span class="type">MASAdditions</span>)</div><div class="line"></div><div class="line">- (<span class="type">NSArray</span> *)mas_makeConstraints:(void(^)(<span class="type">MASConstraintMaker</span> *))block &#123;</div><div class="line">    <span class="comment">// 1.è®¾ç½®ä¸æ”¯æŒ AutoresizingMask</span></div><div class="line">    <span class="keyword">self</span>.translatesAutoresizingMaskIntoConstraints = <span class="type">NO</span>;</div><div class="line">    <span class="comment">// 2.åˆå§‹åŒ–ä¸“å±çº¦æŸåˆ›é€ è€… Maker</span></div><div class="line">    <span class="type">MASConstraintMaker</span> *constraintMaker = [[<span class="type">MASConstraintMaker</span> alloc] initWithView:<span class="keyword">self</span>];</div><div class="line">    <span class="comment">// 3.æ”¶é›†çº¦æŸ</span></div><div class="line">    block(constraintMaker);</div><div class="line">    <span class="comment">// 4.æ·»åŠ çº¦æŸï¼ˆåº”ç”¨çº¦æŸï¼‰</span></div><div class="line">    <span class="keyword">return</span> [constraintMaker install];</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>é€šè¿‡åˆå§‹åŒ–ä»£ç ï¼Œå¯ä»¥çœ‹å‡º Maker é¦–å…ˆæŒæœ‰äº† viewï¼Œæˆä¸ºäº† view ä¸“å±çš„çº¦æŸåˆ›é€ è€…ï¼Œå†é€šè¿‡ block å›è°ƒå‡ºå»æ”¶é›†çº¦æŸï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[view1 mas_makeConstraints:^(<span class="type">MASConstraintMaker</span> *make) &#123;</div><div class="line">    make.top.equalTo(superview.mas_top);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<p>å…³äº Maker å’Œ view æ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ï¼Œä¹Ÿå¯ä»¥ä» Maker çš„å®šä¹‰é‡Œçœ‹å‡ºæ¥ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">@interface <span class="type">MASConstraintMaker</span> : <span class="type">NSObject</span></div><div class="line"></div><div class="line">@property (nonatomic, strong, readonly) <span class="type">MASConstraint</span> *<span class="keyword">left</span>;</div><div class="line">@property (nonatomic, strong, readonly) <span class="type">MASConstraint</span> *top;</div><div class="line">@property (nonatomic, strong, readonly) <span class="type">MASConstraint</span> *<span class="keyword">right</span>;</div><div class="line">@property (nonatomic, strong, readonly) <span class="type">MASConstraint</span> *bottom;</div><div class="line"></div><div class="line">- (id)initWithView:(<span class="type">MAS_VIEW</span> *)view;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>Maker å°†çº¦æŸå®šä¹‰ä¸ºå±æ€§ï¼Œæ˜¯æƒ³åˆ©ç”¨å±æ€§çš„ getter æ–¹æ³•ï¼Œé€šè¿‡ç‚¹è¯­æ³•çš„æ–¹å¼åˆ›å»ºçº¦æŸï¼Œå¦‚ <code>left</code> å±æ€§çš„ getter æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">@implementation <span class="type">MASConstraintMaker</span></div><div class="line"></div><div class="line">- (id)initWithView:(<span class="type">MAS_VIEW</span> *)view &#123;</div><div class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> <span class="keyword">init</span>];</div><div class="line">    <span class="keyword">if</span> (!<span class="keyword">self</span>) <span class="keyword">return</span> <span class="literal">nil</span>;</div><div class="line">    </div><div class="line">    <span class="keyword">self</span>.view = view;</div><div class="line">    <span class="keyword">self</span>.constraints = <span class="type">NSMutableArray</span>.new;</div><div class="line">    </div><div class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="type">MASConstraint</span> *)<span class="keyword">left</span> &#123;</div><div class="line">    <span class="keyword">return</span> [<span class="keyword">self</span> addConstraintWithLayoutAttribute:<span class="type">NSLayoutAttributeLeft</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="type">MASConstraint</span> *)top &#123;</div><div class="line">    <span class="keyword">return</span> [<span class="keyword">self</span> addConstraintWithLayoutAttribute:<span class="type">NSLayoutAttributeTop</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="type">MASConstraint</span> *)<span class="keyword">right</span> &#123;</div><div class="line">    <span class="keyword">return</span> [<span class="keyword">self</span> addConstraintWithLayoutAttribute:<span class="type">NSLayoutAttributeRight</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="type">MASConstraint</span> *)bottom &#123;</div><div class="line">    <span class="keyword">return</span> [<span class="keyword">self</span> addConstraintWithLayoutAttribute:<span class="type">NSLayoutAttributeBottom</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>ç»¼ä¸Šæ‰€è¿°ï¼Œçº¦æŸåˆ›å»ºè€… Maker é€šè¿‡ç‚¹è¯­æ³•ä¼šåˆ›å»ºå‡ºä¸€ä¸ªçº¦æŸå¯¹è±¡ <code>MASConstraint</code>ã€‚</p>
<p>å…³äº Maker çš„æ ¸å¿ƒæ–¹æ³• <code>constraint:addConstraintWithLayoutAttribute:</code>ï¼Œä¸»è¦ç”¨æ¥åˆ›å»ºçº¦æŸå¯¹è±¡ï¼Œä¸‹é¢ä»¥åºå·çš„æ–¹å¼æ¼”ç¤ºä»£ç çš„æ‰§è¡Œè¿‡ç¨‹ï¼š</p>
<ol>
<li>åˆ›å»ºå•ä¸ªçº¦æŸå¯¹è±¡ <code>MASViewConstraint</code>ï¼›</li>
<li>åˆ›å»ºçº¦æŸé›†åˆ <code>MASCompositeConstraint</code>ã€‚</li>
</ol>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line">@implementation <span class="type">MASConstraintMaker</span></div><div class="line"></div><div class="line">- (void)constraint:(<span class="type">MASConstraint</span> *)constraint shouldBeReplacedWithConstraint:(<span class="type">MASConstraint</span> *)replacementConstraint &#123;</div><div class="line">    <span class="type">NSUInteger</span> index = [<span class="keyword">self</span>.constraints indexOfObject:constraint];</div><div class="line">    <span class="type">NSAssert</span>(index != <span class="type">NSNotFound</span>, @<span class="string">"Could not find constraint %@"</span>, constraint);</div><div class="line">    [<span class="keyword">self</span>.constraints replaceObjectAtIndex:index withObject:replacementConstraint];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment"> åˆ›å»ºçº¦æŸå¯¹è±¡çš„å…¥å£ï¼Œå­ç±»ä¼šé€šè¿‡ä»£ç†è°ƒç”¨è¯¥æ–¹æ³•ï¼Œåˆ›å»ºæ–°çš„çº¦æŸå¯¹è±¡</span></div><div class="line"><span class="comment">*/</span></div><div class="line">- (<span class="type">MASConstraint</span> *)constraint:(<span class="type">MASConstraint</span> *)constraint addConstraintWithLayoutAttribute:(<span class="type">NSLayoutAttribute</span>)layoutAttribute &#123;</div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">    åˆ›å»ºçº¦æŸå±æ€§ å’Œ æ–°çš„çº¦æŸå¯¹è±¡</span></div><div class="line"><span class="comment">    */</span></div><div class="line">    <span class="type">MASViewAttribute</span> *viewAttribute = [[<span class="type">MASViewAttribute</span> alloc] initWithView:<span class="keyword">self</span>.view layoutAttribute:layoutAttribute];</div><div class="line">    <span class="type">MASViewConstraint</span> *newConstraint = [[<span class="type">MASViewConstraint</span> alloc] initWithFirstViewAttribute:viewAttribute];</div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">     constraint æ˜¯ MASViewConstraint ç±»å‹ä¼šè¯´æ˜ä¸¤ä»¶äº‹ï¼š</span></div><div class="line"><span class="comment">     1ã€constraint ä¸ä¸ºç©ºï¼šnewConstraint ä¸æ˜¯è§†å›¾çš„ç¬¬ä¸€ä¸ªçº¦æŸå¯¹è±¡ï¼›</span></div><div class="line"><span class="comment">     2ã€constraint ä¸æ˜¯ MASCompositeConstraint ç±»å‹ï¼šè¿˜æ²¡æœ‰åˆ›å»ºè¿‡çº¦æŸé›†åˆï¼ˆä¸€ä¸ªè§†å›¾åªä¼šåˆ›å»ºä¸€æ¬¡ï¼‰ã€‚</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">     å³éœ€è¦åˆ›å»ºä¸€ä¸ªçº¦æŸé›†åˆ</span></div><div class="line"><span class="comment">    */</span></div><div class="line">    <span class="keyword">if</span> ([constraint isKindOfClass:<span class="type">MASViewConstraint</span>.<span class="keyword">class</span>]) &#123;</div><div class="line">        <span class="comment">// 1ã€å°†ç¬¬ä¸€ä¸ªçº¦æŸå¯¹è±¡å’Œç¬¬äºŒä¸ªçº¦æŸå¯¹è±¡æ‰“åŒ…é›†åˆ</span></div><div class="line">        <span class="type">NSArray</span> *children = @[constraint, newConstraint];</div><div class="line">        <span class="type">MASCompositeConstraint</span> *compositeConstraint = [[<span class="type">MASCompositeConstraint</span> alloc] initWithChildren:children];</div><div class="line">        <span class="comment">// 2ã€è®¾ç½®ä»£ç†ï¼Œåˆ›å»ºç¬¬ä¸‰ä¸ªçº¦æŸå¯¹è±¡åŠæ›´å¤šçš„çº¦æŸå¯¹è±¡æ—¶ï¼Œé‡æ–°æ¥åˆ°è¿™ä¸ªæ–¹æ³•</span></div><div class="line">        compositeConstraint.delegate = <span class="keyword">self</span>;</div><div class="line">        <span class="comment">// 3ã€è®©çº¦æŸé›†åˆæ›¿æ¢ç¬¬ä¸€ä¸ªçº¦æŸå¯¹è±¡ï¼ˆçº¦æŸé›†åˆé‡Œå·²ç»ä¿å­˜äº†ç¬¬ä¸€ä¸ªçº¦æŸå¯¹è±¡ï¼‰</span></div><div class="line">        [<span class="keyword">self</span> constraint:constraint shouldBeReplacedWithConstraint:compositeConstraint];</div><div class="line">        <span class="comment">/*</span></div><div class="line"><span class="comment">        ğŸ“¢æ³¨æ„ï¼šè¿™é‡Œè¿”å›çš„æ˜¯ MASCompositeConstraintï¼Œå’Œé“¾å¼è°ƒç”¨æ¯æ¯ç›¸å…³</span></div><div class="line"><span class="comment">        */</span></div><div class="line">        <span class="keyword">return</span> compositeConstraint;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">    constraint ä¸ºç©ºè¯´æ˜ï¼š</span></div><div class="line"><span class="comment">    1ã€newConstraint æ˜¯è§†å›¾çš„ç¬¬ä¸€ä¸ªçº¦æŸå¯¹è±¡</span></div><div class="line"><span class="comment">    */</span></div><div class="line">    <span class="keyword">if</span> (!constraint) &#123;</div><div class="line">        <span class="comment">// è®¾ç½®ä»£ç†ï¼Œåˆ›å»ºç¬¬äºŒçº¦æŸå¯¹è±¡çš„æ—¶å€™ï¼Œé‡æ–°æ¥åˆ°è¿™ä¸ªæ–¹æ³•ï¼Œåˆ›å»ºçº¦æŸé›†åˆğŸ‘†</span></div><div class="line">        newConstraint.delegate = <span class="keyword">self</span>;</div><div class="line">        [<span class="keyword">self</span>.constraints addObject:newConstraint];</div><div class="line">    &#125;</div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">    ğŸ“¢æ³¨æ„ï¼šè¿™é‡Œè¿”å›çš„æ˜¯ MASViewConstraintï¼Œå’Œé“¾å¼è°ƒç”¨æ¯æ¯ç›¸å…³</span></div><div class="line"><span class="comment">    */</span></div><div class="line">    <span class="keyword">return</span> newConstraint;</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<h3 id="MASConstraint"><a href="#MASConstraint" class="headerlink" title="MASConstraint"></a>MASConstraint</h3><ul>
<li>è¿™ä¸€éƒ¨åˆ†ä¸»è¦å…³å¿ƒçš„æ˜¯çº¦æŸè‡ªèº«ï¼Œç®€ç§° Constraintã€‚</li>
</ul>
<p>ğŸ¤”æ€è€ƒï¼šçº¦æŸæ˜¯å¦ä¹Ÿæ˜¯å¯ä»¥ç‚¹çš„ï¼Œé€šè¿‡ç‚¹è¯­æ³•å¯ä»¥åˆ›é€ å‡ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>è¿™é‡Œçš„å®šä¹‰å’Œçº¦æŸåˆ›å»ºè€… Maker ç±»ä¼¼ï¼Œåªä¸è¿‡è¿™é‡Œæ²¡æœ‰å†™æˆå±æ€§ï¼ˆreadonlyï¼‰çš„æ–¹å¼ï¼Œè€Œæ˜¯ç›´æ¥å®ç°äº† getter æ–¹æ³•ã€‚</p>
<blockquote>
<p>çŒœæƒ³ï¼šè¿™æ ·å†™æ˜¯å› ä¸ºç”¨äº†é¢å‘å¯¹è±¡çš„å°è£…ï¼Œå±æ€§æ˜¯å¯¹è±¡çš„ç‰¹å¾ã€‚Maker æ˜¯å¯ä»¥æ‹¥æœ‰çº¦æŸç‰¹å¾çš„ï¼Œè€Œçº¦æŸè‡ªèº«ä¸åº”è¯¥å†æ‹¥æœ‰çº¦æŸç‰¹å¾ã€‚å¦‚â€œäººâ€å¯ä»¥æœ‰â€œå·¦æ‰‹â€å’Œâ€œå³æ‰‹â€ï¼Œè€Œâ€œæ‰‹â€è‡ªèº«ä¸å†æ‹¥æœ‰è¿™äº›ç‰¹å¾ã€‚</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">@interface <span class="type">MASConstraint</span> : <span class="type">NSObject</span></div><div class="line"></div><div class="line">- (<span class="type">MASConstraint</span> *)<span class="keyword">left</span>;</div><div class="line">- (<span class="type">MASConstraint</span> *)top;</div><div class="line">- (<span class="type">MASConstraint</span> *)<span class="keyword">right</span>;</div><div class="line">- (<span class="type">MASConstraint</span> *)bottom;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>getter æ–¹æ³•çš„å®ç°éƒ¨åˆ† å’Œ Maker æ˜¯å®Œå…¨ä¸€è‡´çš„ï¼Œæ¯•ç«Ÿæƒ³å®ç°çš„åŠŸèƒ½æ˜¯ä¸€æ ·çš„ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">- (<span class="type">MASConstraint</span> *)<span class="keyword">left</span> &#123;</div><div class="line">    <span class="keyword">return</span> [<span class="keyword">self</span> addConstraintWithLayoutAttribute:<span class="type">NSLayoutAttributeLeft</span>];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>MASConstraint</code> çº¦æŸæŠ½è±¡ç±»ï¼Œä¸ Maker ä¸€æ ·å¯ä»¥é€šè¿‡ç‚¹è¯­æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„çº¦æŸå¯¹è±¡ã€‚<code>MASConstraint</code> çœŸæ­£æ»¡è¶³äº†é“¾å¼ç¼–ç¨‹è¦æ±‚ï¼Œå³<strong>æ¯ä¸ªæ–¹éƒ½æœ‰è¿”å›å€¼ï¼Œè¿”å›å€¼ä¸ºå¯¹è±¡è‡ªèº«</strong>ã€‚åˆå› ä¸º <code>MASConstraint</code> æ˜¯ Maker çš„å±æ€§ï¼Œæ‰€ä»¥ Maker ä¹Ÿæ»¡è¶³äº†é“¾å¼ç¼–ç¨‹ã€‚è‡³æ­¤ï¼ŒMasonry ä¸­å¯ä»¥å®ç°é“¾å¼ç¼–ç¨‹çš„ç±»æœ‰ä¸¤ä¸ª <code>MASConstraint</code>ï¼ˆåŠå…¶å­ç±»ï¼‰ å’Œ <code>MASConstraintMaker</code>ã€‚</p>
<h3 id="MASViewConstraint"><a href="#MASViewConstraint" class="headerlink" title="MASViewConstraint"></a>MASViewConstraint</h3><p><code>MASViewConstraint</code> çº¦æŸç±»ï¼Œæ˜¯ <code>MASConstraint</code> çš„å­ç±»ï¼ŒMaker ç”Ÿæˆçš„çº¦æŸå¯¹è±¡å°±æ˜¯ <code>MASViewConstraint</code> ç±»å‹çš„ã€‚</p>
<p><code>MASViewConstraint</code> å¯¹æ ‡çš„æ˜¯ Autolayout ä¸­çš„ <code>NSLayoutConstraint</code>ï¼Œå‰è¾¹é€šè¿‡ <code>NSLayoutConstraint</code> çš„å®šä¹‰çœ‹å‡ºå®ƒæœ‰ 5 ä¸ªåŸºæœ¬æ¡ä»¶ï¼š</p>
<ol>
<li>ç¬¬ä¸€ä¸ªè§†å›¾ï¼›</li>
<li>ç¬¬ä¸€ä¸ªè§†å›¾çš„çº¦æŸå±æ€§ï¼ˆçº¦æŸæ–¹å‘ï¼šä¸Š/ä¸‹/å·¦/å³ç­‰ï¼‰ï¼›</li>
<li>ç¬¬äºŒä¸ªè§†å›¾ï¼›</li>
<li>ç¬¬äºŒä¸ªè§†å›¾çš„çº¦æŸå±æ€§ï¼ˆçº¦æŸæ–¹å‘ï¼šä¸Š/ä¸‹/å·¦/å³ç­‰ï¼‰ï¼›</li>
<li>çº¦æŸå…³ç³»ï¼ˆç­‰äº/å¤§äº/å°äºï¼‰ï¼›</li>
</ol>
<p>ä¸‹é¢æ˜¯ <code>MASViewConstraint</code> çš„å®šä¹‰ï¼Œå¯ä»¥çœ‹å‡ºï¼Œå®ƒåªéœ€è¦ä¸¤ä¸ªæ¡ä»¶ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">@interface <span class="type">MASViewConstraint</span> : <span class="type">MASConstraint</span> &lt;<span class="type">NSCopying</span>&gt;</div><div class="line"></div><div class="line">@property (nonatomic, strong, readonly) <span class="type">MASViewAttribute</span> *firstViewAttribute;</div><div class="line"></div><div class="line">@property (nonatomic, strong, readonly) <span class="type">MASViewAttribute</span> *secondViewAttribute;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>å…¶å®è¿˜æœ‰ä¸€ä¸ªæ¡ä»¶ï¼Œçº¦æŸå…³ç³»ï¼Œè¢«å®šä¹‰å­åœ¨äº† <code>MASViewConstraint.m</code> æ–‡ä»¶ã€‚ç»¼ä¸Šæ‰€è¿°ï¼Œå¯ä»¥æ€»ç»“å‡ºåˆ›å»ºä¸€ä¸ª <code>MASViewConstraint</code> å¯¹è±¡çš„åŸºæœ¬æ¡ä»¶æœ‰ä¸‰ä¸ªï¼š</p>
<ol>
<li>ç¬¬ä¸€ä¸ªè§†å›¾å’Œç¬¬ä¸€ä¸ªè§†å›¾çš„çº¦æŸå±æ€§ï¼›</li>
<li>ç¬¬äºŒä¸ªè§†å›¾å’Œç¬¬äºŒä¸ªè§†å›¾çš„çº¦æŸå±æ€§ï¼›</li>
<li>çº¦æŸå…³ç³»ã€‚</li>
</ol>
<p>å¯ä»¥çœ‹çš„å‡ºï¼Œä¸¤è€…çš„æ¡ä»¶å†…å®¹æœ¬è´¨æ˜¯ä¸€æ ·çš„ï¼Œåªä¸æ˜¯å®ç°æ–¹å¼ä¸åŒè€Œå·²ã€‚<code>MASViewConstraint</code> ä½¿ç”¨é¢å‘å¯¹è±¡çš„æ–¹å¼ï¼ŒæŠŠâ€œè§†å›¾â€å’Œâ€œè§†å›¾çš„çº¦æŸå±æ€§â€æ‰“åŒ…æˆå…ƒç»„çš„å½¢å¼è¿›è¡Œç®¡ç†ã€‚</p>
<p>ğŸ¤”æ€è€ƒï¼šæŠŠâ€œè§†å›¾â€å’Œâ€œè§†å›¾çš„çº¦æŸå±æ€§â€æ‰“åŒ…æˆå…ƒç»„çš„æ“ä½œå¦™åœ¨å“ªï¼Ÿ</p>
<h3 id="MASCompositeConstraint"><a href="#MASCompositeConstraint" class="headerlink" title="MASCompositeConstraint"></a>MASCompositeConstraint</h3><p><code>MASCompositeConstraint</code> çº¦æŸé›†åˆç±»ï¼Œå½“ä¸€ä¸ª Maker åˆ›å»ºäº†ä¸€ä¸ªä»¥ä¸Šçš„çº¦æŸå¯¹è±¡æ—¶ï¼Œå°±ä¼šåˆ›å»ºå‡ºçº¦æŸé›†åˆæ¥ç®¡ç†è¿™äº›çº¦æŸã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">@interface <span class="type">MASCompositeConstraint</span> : <span class="type">MASConstraint</span></div><div class="line"></div><div class="line">- (id)initWithChildren:(<span class="type">NSArray</span> *)children;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<h2 id="Masonryçº¦æŸå®ç°åŸç†"><a href="#Masonryçº¦æŸå®ç°åŸç†" class="headerlink" title="Masonryçº¦æŸå®ç°åŸç†"></a>Masonryçº¦æŸå®ç°åŸç†</h2><p><code>UIView</code> é€šè¿‡ <code>mas_makeConstraints</code> æ–¹æ³•ä¸ºè‡ªå·±æ·»åŠ çº¦æŸã€‚</p>
<h3 id="æ¡ˆä¾‹ä¸€"><a href="#æ¡ˆä¾‹ä¸€" class="headerlink" title="æ¡ˆä¾‹ä¸€"></a>æ¡ˆä¾‹ä¸€</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="type">UIView</span> *superview = <span class="keyword">self</span>.view;</div><div class="line"></div><div class="line"><span class="type">UIView</span> *view1 = [[<span class="type">UIView</span> alloc] <span class="keyword">init</span>];</div><div class="line">[superview addSubview:view1];</div><div class="line"></div><div class="line">[view1 mas_makeConstraints:^(<span class="type">MASConstraintMaker</span> *make) &#123;</div><div class="line">   make.top.equalTo(superview.mas_top);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<p><code>mas_makeConstraints</code> çš„å®ç°ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">@implementation <span class="type">MAS_VIEW</span> (<span class="type">MASAdditions</span>)</div><div class="line"></div><div class="line">- (<span class="type">NSArray</span> *)mas_makeConstraints:(void(^)(<span class="type">MASConstraintMaker</span> *))block &#123;</div><div class="line">    <span class="comment">// 1.è®¾ç½®ä¸æ”¯æŒ AutoresizingMask</span></div><div class="line">    <span class="keyword">self</span>.translatesAutoresizingMaskIntoConstraints = <span class="type">NO</span>;</div><div class="line">    <span class="comment">// 2.åˆå§‹åŒ–ä¸“å±çº¦æŸåˆ›é€ è€… Maker</span></div><div class="line">    <span class="type">MASConstraintMaker</span> *constraintMaker = [[<span class="type">MASConstraintMaker</span> alloc] initWithView:<span class="keyword">self</span>];</div><div class="line">    <span class="comment">// 3.æ”¶é›†çº¦æŸ</span></div><div class="line">    block(constraintMaker);</div><div class="line">    <span class="comment">// 4.æ·»åŠ çº¦æŸï¼ˆåº”ç”¨çº¦æŸï¼‰</span></div><div class="line">    <span class="keyword">return</span> [constraintMaker install];</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>è°ƒç”¨è¯¥æ–¹æ³•åšäº†å››ä»¶äº‹æƒ…ï¼š</p>
<ol>
<li>è®¾ç½®ä¸æ”¯æŒ AutoresizingMaskï¼›</li>
<li>åˆå§‹åŒ–<strong>ä¸“å±</strong>çº¦æŸåˆ›é€ è€… Makerï¼›</li>
<li>æ”¶é›†çº¦æŸï¼›</li>
<li>æ·»åŠ çº¦æŸï¼ˆåº”ç”¨çº¦æŸï¼‰ã€‚</li>
</ol>
<p>çº¦æŸçš„æ”¶é›†è¿‡ç¨‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[view1 mas_makeConstraints:^(<span class="type">MASConstraintMaker</span> *make) &#123;</div><div class="line">   make.top.equalTo(superview.mas_top).with.offset(padding.top);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<p>æ—¶åºå›¾</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">sequenceDiagram</div><div class="line">    participant View       as UIView</div><div class="line">    participant Addition   as View+MASAdditions</div><div class="line">    participant Maker      as MASConstraintMaker</div><div class="line">    participant Constraint as MASViewConstraint</div><div class="line">    </div><div class="line">    View       -&gt;&gt;  + Addition   : &quot;mas_makeConstraints:&quot;</div><div class="line">    activate View</div><div class="line"></div><div class="line">    Addition   -&gt;&gt;  + Maker      : &quot;åˆ›å»º Maker&quot;</div><div class="line">    Maker      --&gt;&gt; - Addition   : &quot;å®Œæˆ&quot;</div><div class="line"></div><div class="line">    Addition   -&gt;&gt;  + Maker      : &quot;æ·»åŠ â€œtopâ€çº¦æŸåˆ°çº¦æŸæ•°ç»„ constraints ä¸­ï¼ˆmake.topï¼‰&quot;</div><div class="line">    Maker      --&gt;&gt; - Addition   : &quot;è¿”å›çº¦æŸå¯¹è±¡ï¼ˆMASViewConstraintï¼‰&quot;</div><div class="line"></div><div class="line">    Addition      -&gt;&gt;  + Constraint : &quot;.equalTo(superview)&quot;</div><div class="line">    Constraint --&gt;&gt; - Addition      : &quot;å®Œæˆ&quot;</div><div class="line"></div><div class="line">    Addition   -&gt;&gt;  + Maker      : &quot;å¼•ç”¨çº¦æŸï¼ˆinstallï¼‰&quot;</div><div class="line">    Maker      --&gt;&gt; - Addition   : &quot;è¿”å›çº¦æŸé›†åˆï¼ˆconstraintsï¼‰&quot;</div><div class="line">    Addition   --&gt;&gt; - View       : &quot;è¿”å›çº¦æŸé›†åˆï¼ˆconstraintsï¼‰&quot;</div><div class="line">    deactivate View</div></pre></td></tr></table></figure>
<p>ç¬¬ä¸€æ­¥ <code>make.top</code>ï¼šMaker åˆ›å»º view çš„ top çº¦æŸå¯¹è±¡ï¼Œæ ¸å¿ƒæ–¹æ³• <code>constraint:addConstraintWithLayoutAttribute:</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">@implementation <span class="type">MASConstraintMaker</span></div><div class="line"></div><div class="line"><span class="comment">// 1.3</span></div><div class="line">- (<span class="type">MASConstraint</span> *)constraint:(<span class="type">MASConstraint</span> *)constraint addConstraintWithLayoutAttribute:(<span class="type">NSLayoutAttribute</span>)layoutAttribute &#123;</div><div class="line">    <span class="type">MASViewAttribute</span> *viewAttribute = [[<span class="type">MASViewAttribute</span> alloc] initWithView:<span class="keyword">self</span>.view layoutAttribute:layoutAttribute];</div><div class="line">    <span class="type">MASViewConstraint</span> *newConstraint = [[<span class="type">MASViewConstraint</span> alloc] initWithFirstViewAttribute:viewAttribute];</div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">    ä¸ºçº¦æŸè®¾ç½®ä»£ç†ï¼šå½“çº¦æŸé€šè¿‡ç‚¹è¯­æ³•åˆ›å»ºæ–°çš„çº¦æŸå¯¹è±¡æ—¶ï¼Œä¼šé€šè¿‡ä»£ç†å†æ¬¡æ¥åˆ°è¿™ä¸ªæ–¹æ³•è¿›è¡Œåˆ›å»ºçº¦æŸ</span></div><div class="line"><span class="comment">    */</span></div><div class="line">    newConstraint.delegate = <span class="keyword">self</span>;</div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">    å°†æ–°çš„çº¦æŸæ”¾æ”¶é›†åˆ°æ•°ç»„é‡Œï¼Œç­‰å¾…åº”ç”¨åˆ°viewä¸Š</span></div><div class="line"><span class="comment">    */</span></div><div class="line">    [<span class="keyword">self</span>.constraints addObject:newConstraint];</div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">    ğŸ“¢æ³¨æ„ï¼šè¿™é‡Œè¿”å›çš„æ˜¯ MASViewConstraint ç±»å‹ï¼Œå’Œæ¥ä¸‹æ¥ equal çš„è°ƒç”¨æœ‰å…³</span></div><div class="line"><span class="comment">    */</span></div><div class="line">    <span class="keyword">return</span> newConstraint;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 1.2</span></div><div class="line">- (<span class="type">MASConstraint</span> *)addConstraintWithLayoutAttribute:(<span class="type">NSLayoutAttribute</span>)layoutAttribute &#123;</div><div class="line">    <span class="keyword">return</span> [<span class="keyword">self</span> constraint:<span class="literal">nil</span> addConstraintWithLayoutAttribute:layoutAttribute];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 1.1</span></div><div class="line">- (<span class="type">MASConstraint</span> *)top &#123;</div><div class="line">    <span class="keyword">return</span> [<span class="keyword">self</span> addConstraintWithLayoutAttribute:<span class="type">NSLayoutAttributeTop</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>ç¬¬ä¸€æ­¥æ‰§è¡Œå®Œæˆåï¼Œç”Ÿæˆäº†ä¸€ä¸ªçº¦æŸå¯¹è±¡ <code>MASViewConstraint</code>ï¼Œç®€ç§° Constraintï¼ŒåŒæ—¶å®ƒå·²ç»æœ‰äº†ç¬¬ä¸€ä¸ªè§†å›¾å’Œå®ƒçš„çº¦æŸå±æ€§ï¼ˆ<code>NSLayoutAttributeTop</code>ï¼‰ã€‚</p>
<p>ğŸ¤”æ€è€ƒï¼š<code>make.top</code> åˆ›å»ºå‡ºæ¥çš„ <code>top</code> çº¦æŸå¯¹è±¡çš„ç±»å‹ä¸€å®šæ˜¯ <code>MASViewConstraint</code> çš„å—?</p>
<p>ç¬¬äºŒæ­¥ <code>make.top.equal</code>ï¼šè®¾ç½®ä¾èµ–å…³ç³»ï¼Œé¦–å…ˆæ¥åˆ°çº¦æŸæŠ½è±¡ç±» <code>MASConstraint</code> é‡Œ</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">@implementation <span class="type">MASConstraint</span></div><div class="line"></div><div class="line">- (<span class="type">MASConstraint</span> * (^)(id))equalTo &#123;</div><div class="line">    <span class="keyword">return</span> ^id(id attribute) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">self</span>.equalToWithRelation(attribute, <span class="type">NSLayoutRelationEqual</span>);</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>è¿™ä¸€æ­¥æœ‰ä¸¤ä¸ªå‚æ•°ï¼š</p>
<ol>
<li>attribute çº¦æŸå±æ€§ï¼ˆè§†å›¾å’Œè§†å›¾çš„çº¦æŸå±æ€§ï¼‰;</li>
<li>relation çº¦æŸå…³ç³»ï¼ˆ<code>NSLayoutRelationEqual</code>ï¼‰ã€‚</li>
</ol>
<p>å› ä¸ºä¸Šé¢ğŸ‘† <code>make.top</code> è¿”å›çš„æ˜¯ <code>MASViewConstraint</code> ç±»å‹ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥ä¼šè°ƒç”¨åˆ°å­ç±» <code>MASViewConstraint</code> å®ç°çš„ <code>equalToWithRelation</code> æ–¹æ³•é‡Œï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">@implementation <span class="type">MASViewConstraint</span></div><div class="line"></div><div class="line">- (<span class="type">MASConstraint</span> * (^)(id, <span class="type">NSLayoutRelation</span>))equalToWithRelation &#123;</div><div class="line">    <span class="keyword">return</span> ^id(id attribute, <span class="type">NSLayoutRelation</span> relation) &#123;</div><div class="line">          <span class="comment">/*</span></div><div class="line"><span class="comment">          1. è®¾ç½®çº¦æŸå…³ç³»</span></div><div class="line"><span class="comment">          2. è®¾ç½®ç¬¬äºŒä¸ªè§†å›¾çš„çº¦æŸå±æ€§</span></div><div class="line"><span class="comment">          */</span></div><div class="line">          <span class="keyword">self</span>.layoutRelation = relation;</div><div class="line">          <span class="keyword">self</span>.secondViewAttribute = attribute;</div><div class="line">          <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>ç¬¬äºŒæ­¥æ‰§è¡Œå®Œæˆåï¼ŒConstraint å…·å¤‡äº†å…¨éƒ¨åŸºæœ¬æ¡ä»¶ï¼š</p>
<ol>
<li><code>firstViewAttribute</code>ï¼ˆview1 çš„çº¦æŸå±æ€§ï¼‰ï¼›</li>
<li><code>secondViewAttribute</code>ï¼ˆview2 çš„çº¦æŸå±æ€§ï¼‰ï¼›</li>
<li>relationï¼ˆçº¦æŸå…³ç³»ï¼‰ã€‚</li>
</ol>
<h3 id="æ¡ˆä¾‹äºŒ"><a href="#æ¡ˆä¾‹äºŒ" class="headerlink" title="æ¡ˆä¾‹äºŒ"></a>æ¡ˆä¾‹äºŒ</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="type">UIView</span> *superview = <span class="keyword">self</span>.view;</div><div class="line"></div><div class="line"><span class="type">UIView</span> *view1 = [[<span class="type">UIView</span> alloc] <span class="keyword">init</span>];</div><div class="line">[superview addSubview:view1];</div><div class="line"></div><div class="line">[view1 mas_makeConstraints:^(<span class="type">MASConstraintMaker</span> *make) &#123;</div><div class="line">   make.top.<span class="keyword">left</span>.<span class="keyword">right</span>.bottom.equalTo(superview);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<p>æ—¶åºå›¾</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">sequenceDiagram</div><div class="line">    participant View       as UIView</div><div class="line">    participant Addition   as View+MASAdditions</div><div class="line">    participant Maker      as MASConstraintMaker</div><div class="line">    participant Composite as MASCompositeConstraint</div><div class="line">    participant Constraint as MASViewConstraint</div><div class="line">    </div><div class="line">    View       -&gt;&gt;  + Addition  : &quot;mas_makeConstraints:&quot;</div><div class="line">    activate View</div><div class="line">    </div><div class="line">    # 1. åˆ›å»º Maker</div><div class="line">    Addition   -&gt;&gt;  + Maker     : &quot;1. åˆ›å»º Maker&quot;</div><div class="line">    Maker      --&gt;&gt; - Addition  : &quot;å®Œæˆ&quot;</div><div class="line"></div><div class="line">    # 2. æ·»åŠ çº¦æŸ</div><div class="line">    Addition   -&gt;&gt;  + Maker     : &quot;2.1 æ·»åŠ â€œtopâ€çº¦æŸåˆ°çº¦æŸæ•°ç»„ constraints ä¸­ï¼ˆmake.topï¼‰&quot;</div><div class="line">    Maker --&gt;&gt; - Addition       : &quot;è¿”å›çº¦æŸå¯¹è±¡ï¼ˆMASViewConstraintï¼‰&quot;</div><div class="line">    </div><div class="line">    Addition -&gt;&gt;  + Constraint  : &quot;2.2 æ·»åŠ â€œLeftâ€çº¦æŸï¼ˆmake.top.leftï¼‰&quot;</div><div class="line">    Constraint  -&gt;&gt; + Composite : &quot;åˆ›å»ºçº¦æŸé›†åˆï¼Œ[Top, Left]&quot;</div><div class="line">    Composite  --&gt;&gt; - Constraint : &quot;æ›´æ–° constraints = [[Top, Left]]&quot;</div><div class="line">    Constraint  --&gt;&gt; - Addition : &quot;è¿”å›çº¦æŸé›†åˆï¼ˆMASCompositeConstraintï¼‰&quot;</div><div class="line">    </div><div class="line">    Addition   -&gt;&gt;  + Composite : &quot;2.3 æ·»åŠ â€œRightâ€çº¦æŸï¼ˆmake.top.left.rightï¼‰&quot;</div><div class="line">    Composite  -&gt;&gt; + Constraint : &quot;åˆ›å»ºçº¦æŸå¯¹è±¡&quot;</div><div class="line">    Constraint --&gt;&gt; - Composite : &quot;å°†çº¦æŸå¯¹è±¡æ”¾å…¥çº¦æŸé›†åˆ&quot;</div><div class="line">    Composite  --&gt;&gt; - Addition  : &quot;è¿”å›â€œMASCompositeConstraintâ€å¯¹è±¡ï¼ˆçº¦æŸé›†åˆï¼‰&quot;</div><div class="line"></div><div class="line">    Addition   -&gt;&gt;  + Composite : &quot;2.4 æ·»åŠ â€œRightâ€çº¦æŸï¼ˆmake.top.left.rightï¼‰&quot;</div><div class="line">    Composite  -&gt;&gt; + Constraint : &quot;åˆ›å»ºçº¦æŸå¯¹è±¡&quot;</div><div class="line">    Constraint --&gt;&gt; - Composite : &quot;å°†çº¦æŸå¯¹è±¡æ”¾å…¥çº¦æŸé›†åˆ&quot;</div><div class="line">    Composite  --&gt;&gt; - Addition  : &quot;è¿”å›â€œMASCompositeConstraintâ€å¯¹è±¡ï¼ˆçº¦æŸé›†åˆï¼‰&quot;</div><div class="line">    </div><div class="line">    Addition   -&gt;&gt;  + Composite : &quot;2.5 .equalTo(superview)&quot;</div><div class="line">    Composite  -&gt;&gt; + Constraint : &quot;éå†é›†åˆä¸­çš„çº¦æŸå¯¹è±¡.equalTo(superview)&quot;</div><div class="line">    Constraint --&gt;&gt; - Composite : &quot;å®Œæˆ&quot;</div><div class="line">    Composite  --&gt;&gt; - Addition  : &quot;å®Œæˆ&quot;</div><div class="line"></div><div class="line">    # 3. åº”ç”¨çº¦æŸ</div><div class="line">    Addition   -&gt;&gt;  + Maker      : &quot;3.1 install&quot;</div><div class="line">    Maker      -&gt;&gt;  + Composite  : &quot;3.2 install&quot;</div><div class="line">    Composite  -&gt;&gt;  + Constraint : &quot;3.3 éå†é›†åˆä¸­çš„çº¦æŸå¯¹è±¡ï¼Œæ‰§è¡Œ install&quot;</div><div class="line">    Constraint --&gt;&gt; - Composite  : &quot;å®Œæˆ&quot;</div><div class="line">    Composite  --&gt;&gt;  - Maker     : &quot;å®Œæˆ&quot;</div><div class="line">    Maker      --&gt;&gt; - Addition   : &quot;å®Œæˆï¼Œè¿”å› constraintsï¼ˆçº¦æŸé›†åˆï¼‰&quot;</div><div class="line">    Addition   --&gt;&gt; - View       : &quot;å®Œæˆï¼Œè¿”å› constraintsï¼ˆçº¦æŸé›†åˆï¼‰&quot;</div><div class="line">    deactivate View</div></pre></td></tr></table></figure>
<p>ç¬¬ä¸€æ­¥ <code>make.top</code>ï¼šåŒæ¡ˆä¾‹ä¸€ï¼Œ<code>make.top</code> è¿”å›çš„æ°¸è¿œæ˜¯ <code>MASViewConstraint</code>ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">@implementation <span class="type">MASConstraintMaker</span></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment"> è®°å½•è¯¥æ–¹æ³•è°ƒç”¨æ¬¡æ•°ï¼š1</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="comment">// 1.3</span></div><div class="line">- (<span class="type">MASConstraint</span> *)constraint:(<span class="type">MASConstraint</span> *)constraint addConstraintWithLayoutAttribute:(<span class="type">NSLayoutAttribute</span>)layoutAttribute &#123;</div><div class="line">    <span class="type">MASViewAttribute</span> *viewAttribute = [[<span class="type">MASViewAttribute</span> alloc] initWithView:<span class="keyword">self</span>.view layoutAttribute:layoutAttribute];</div><div class="line">    <span class="type">MASViewConstraint</span> *newConstraint = [[<span class="type">MASViewConstraint</span> alloc] initWithFirstViewAttribute:viewAttribute];</div><div class="line">    <span class="keyword">if</span> (!constraint) &#123;</div><div class="line">        <span class="comment">// 1.4</span></div><div class="line">        newConstraint.delegate = <span class="keyword">self</span>;</div><div class="line">        [<span class="keyword">self</span>.constraints addObject:newConstraint];</div><div class="line">    &#125;</div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">    ğŸ“¢æ³¨æ„ï¼šè¿”å›çš„æ˜¯ MASViewConstraint</span></div><div class="line"><span class="comment">    */</span></div><div class="line">    <span class="keyword">return</span> newConstraint;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 1.2</span></div><div class="line">- (<span class="type">MASConstraint</span> *)addConstraintWithLayoutAttribute:(<span class="type">NSLayoutAttribute</span>)layoutAttribute &#123;</div><div class="line">    <span class="keyword">return</span> [<span class="keyword">self</span> constraint:<span class="literal">nil</span> addConstraintWithLayoutAttribute:layoutAttribute];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 1.1</span></div><div class="line">- (<span class="type">MASConstraint</span> *)top &#123;</div><div class="line">    <span class="keyword">return</span> [<span class="keyword">self</span> addConstraintWithLayoutAttribute:<span class="type">NSLayoutAttributeTop</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>ç¬¬äºŒæ­¥ <code>make.top.left</code>ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">@implementation <span class="type">MASConstraint</span></div><div class="line"></div><div class="line"><span class="comment">// 2.1 æ¥åˆ°çˆ¶ç±»è°ƒç”¨åŸºç¡€æ–¹æ³•</span></div><div class="line">- (<span class="type">MASConstraint</span> *)<span class="keyword">left</span> &#123;</div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">    çˆ¶ç±»å¹¶æ²¡æœ‰å®ç°è¯¥æ–¹æ³•ï¼Œä¼šåˆ†å‘ç»™å­ç±»å®Œæˆï¼Œä¸¤ä¸ªå­ç±»ï¼Œè¯¥åˆ†ç»™è°å‘¢ï¼Ÿ</span></div><div class="line"><span class="comment">    */</span></div><div class="line">    <span class="keyword">return</span> [<span class="keyword">self</span> addConstraintWithLayoutAttribute:<span class="type">NSLayoutAttributeLeft</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>å› ä¸ºç¬¬ä¸€æ­¥ <code>make.top</code> è¿”å›çš„æ˜¯ <code>MASViewConstraint</code> ç±»å‹ï¼Œ<code>MASViewConstraint</code> ä½œä¸ºå­ç±»é‡å†™äº†çˆ¶ç±»æ–¹æ³• <code>addConstraintWithLayoutAttribute:</code>ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">@implementation <span class="type">MASViewConstraint</span></div><div class="line"></div><div class="line"><span class="comment">// 2.2 å­ç±»é‡å†™çˆ¶ç±»æ–¹æ³•</span></div><div class="line">- (<span class="type">MASConstraint</span> *)addConstraintWithLayoutAttribute:(<span class="type">NSLayoutAttribute</span>)layoutAttribute &#123;</div><div class="line">    <span class="type">NSAssert</span>(!<span class="keyword">self</span>.hasLayoutRelation, @<span class="string">"Attributes should be chained before defining the constraint relation"</span>);</div><div class="line"></div><div class="line">    <span class="comment">// self.delegate æ˜¯ Maker</span></div><div class="line">    <span class="keyword">return</span> [<span class="keyword">self</span>.delegate constraint:<span class="keyword">self</span> addConstraintWithLayoutAttribute:layoutAttribute];</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>é€šè¿‡ä»£ç†ï¼Œå†æ¬¡æ‰åˆ° Maker åˆ›å»ºçº¦æŸçš„æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">@implementation <span class="type">MASConstraintMaker</span></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment"> è®°å½•è¯¥æ–¹æ³•è°ƒç”¨æ¬¡æ•°ï¼š2</span></div><div class="line"><span class="comment"> */</span></div><div class="line">- (<span class="type">MASConstraint</span> *)constraint:(<span class="type">MASConstraint</span> *)constraint addConstraintWithLayoutAttribute:(<span class="type">NSLayoutAttribute</span>)layoutAttribute &#123;</div><div class="line">    <span class="type">MASViewAttribute</span> *viewAttribute = [[<span class="type">MASViewAttribute</span> alloc] initWithView:<span class="keyword">self</span>.view layoutAttribute:layoutAttribute];</div><div class="line">    <span class="type">MASViewConstraint</span> *newConstraint = [[<span class="type">MASViewConstraint</span> alloc] initWithFirstViewAttribute:viewAttribute];</div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">    trueï¼šæ­¤æ—¶çš„ constraint æ˜¯ç¬¬ä¸€æ­¥åˆ›å»ºçš„çº¦æŸå¯¹è±¡ MASViewConstraint</span></div><div class="line"><span class="comment">    */</span></div><div class="line">    <span class="keyword">if</span> ([constraint isKindOfClass:<span class="type">MASViewConstraint</span>.<span class="keyword">class</span>]) &#123;</div><div class="line">        <span class="comment">// 2.3 å¤§äºä¸€ä¸ªçº¦æŸå¯¹è±¡æ—¶ï¼Œåˆ›å»ºçº¦æŸé›†åˆè¿›è¡Œç®¡ç†</span></div><div class="line">        <span class="type">NSArray</span> *children = @[constraint, newConstraint];</div><div class="line">        <span class="type">MASCompositeConstraint</span> *compositeConstraint = [[<span class="type">MASCompositeConstraint</span> alloc] initWithChildren:children];</div><div class="line">        compositeConstraint.delegate = <span class="keyword">self</span>;</div><div class="line">        [<span class="keyword">self</span> constraint:constraint shouldBeReplacedWithConstraint:compositeConstraint];</div><div class="line">        <span class="comment">/*</span></div><div class="line"><span class="comment">        ğŸ“¢æ³¨æ„ï¼šè¿”å›çš„æ˜¯ MASCompositeConstraint</span></div><div class="line"><span class="comment">        */</span></div><div class="line">        <span class="keyword">return</span> compositeConstraint;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>ç¬¬ä¸‰æ­¥ <code>make.top.left.right</code>ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">@implementation <span class="type">MASConstraint</span></div><div class="line"></div><div class="line"><span class="comment">// 3.1 æ¥åˆ°çˆ¶ç±»è°ƒç”¨åŸºç¡€æ–¹æ³•</span></div><div class="line">- (<span class="type">MASConstraint</span> *)<span class="keyword">right</span> &#123;</div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">    çˆ¶ç±»å¹¶æ²¡æœ‰å®ç°è¯¥æ–¹æ³•ï¼Œä¼šåˆ†å‘ç»™å­ç±»å®Œæˆï¼Œä¸¤ä¸ªå­ç±»ï¼Œè¯¥åˆ†ç»™ç¡å‘¢ï¼Ÿ</span></div><div class="line"><span class="comment">    */</span></div><div class="line">    <span class="keyword">return</span> [<span class="keyword">self</span> addConstraintWithLayoutAttribute:<span class="type">NSLayoutAttributeRight</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>å› ä¸ºåœ¨ç¬¬äºŒæ­¥ä¸­ <code>make.top.left</code> è¿”å›çš„æ˜¯ MASCompositeConstraint ç±»å‹ï¼Œæ‰€ä»¥å°†ç”± MASCompositeConstraint æ¥æ‰§è¡Œæ¥ä¸‹æ¥çš„ä»»åŠ¡ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">@implementation <span class="type">MASCompositeConstraint</span></div><div class="line"></div><div class="line"><span class="comment">// 3.3 å­ç±»é‡å†™çˆ¶ç±»æ–¹æ³•ï¼Œåˆ›å»ºæ–°çš„çº¦æŸå¯¹è±¡</span></div><div class="line">- (<span class="type">MASConstraint</span> *)constraint:(<span class="type">MASConstraint</span> __unused *)constraint addConstraintWithLayoutAttribute:(<span class="type">NSLayoutAttribute</span>)layoutAttribute &#123;</div><div class="line">    id&lt;<span class="type">MASConstraintDelegate</span>&gt; strongDelegate = <span class="keyword">self</span>.delegate;</div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">    å› ä¸ºåˆ›å»ºçº¦æŸå¯¹è±¡çš„æ–¹æ³•å·²ç»æœ‰äº†ï¼Œæ²¡å¿…è¦å†å®ç°ä¸€éï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥è°ƒç”¨é‚£ä¸ªè´Ÿè´£åˆ›å»ºçº¦æŸå¯¹è±¡çš„æ–¹æ³•ã€‚</span></div><div class="line"><span class="comment">    */</span></div><div class="line">    <span class="type">MASConstraint</span> *newConstraint = [strongDelegate constraint:<span class="keyword">self</span> addConstraintWithLayoutAttribute:layoutAttribute];</div><div class="line">    newConstraint.delegate = <span class="keyword">self</span>;</div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">    æ”¶é›†åˆ°çº¦æŸé›†åˆé‡Œï¼Œç»Ÿä¸€ç®¡ç†</span></div><div class="line"><span class="comment">    */</span></div><div class="line">    [<span class="keyword">self</span>.childConstraints addObject:newConstraint];</div><div class="line">    <span class="keyword">return</span> newConstraint;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 3.2 æ¥åˆ°å­ç±»</span></div><div class="line">- (<span class="type">MASConstraint</span> *)addConstraintWithLayoutAttribute:(<span class="type">NSLayoutAttribute</span>)layoutAttribute &#123;</div><div class="line">    [<span class="keyword">self</span> constraint:<span class="keyword">self</span> addConstraintWithLayoutAttribute:layoutAttribute];</div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">    ğŸ“¢æ³¨æ„ï¼šè¿™é‡Œå°±è¿”å›äº†ï¼Œè¿”å›çš„æ˜¯ MASCompositeConstraint è‡ªèº«</span></div><div class="line"><span class="comment">    */</span></div><div class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>è´Ÿè´£åˆ›å»ºçº¦æŸå¯¹è±¡çš„æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">@implementation <span class="type">MASConstraintMaker</span></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment"> è®°å½•è¯¥æ–¹æ³•è°ƒç”¨æ¬¡æ•°ï¼š3</span></div><div class="line"><span class="comment"> */</span></div><div class="line">- (<span class="type">MASConstraint</span> *)constraint:(<span class="type">MASConstraint</span> *)constraint addConstraintWithLayoutAttribute:(<span class="type">NSLayoutAttribute</span>)layoutAttribute &#123;</div><div class="line">    <span class="type">MASViewAttribute</span> *viewAttribute = [[<span class="type">MASViewAttribute</span> alloc] initWithView:<span class="keyword">self</span>.view layoutAttribute:layoutAttribute];</div><div class="line">    <span class="type">MASViewConstraint</span> *newConstraint = [[<span class="type">MASViewConstraint</span> alloc] initWithFirstViewAttribute:viewAttribute];</div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">    å¦ï¼šconstraint æ˜¯ MASCompositeConstraint ç±»å‹</span></div><div class="line"><span class="comment">    */</span></div><div class="line">    <span class="keyword">if</span> ([constraint isKindOfClass:<span class="type">MASViewConstraint</span>.<span class="keyword">class</span>]) &#123;</div><div class="line">        <span class="comment">//replace with composite constraint</span></div><div class="line">        <span class="type">NSArray</span> *children = @[constraint, newConstraint];</div><div class="line">        <span class="type">MASCompositeConstraint</span> *compositeConstraint = [[<span class="type">MASCompositeConstraint</span> alloc] initWithChildren:children];</div><div class="line">        compositeConstraint.delegate = <span class="keyword">self</span>;</div><div class="line">        [<span class="keyword">self</span> constraint:constraint shouldBeReplacedWithConstraint:compositeConstraint];</div><div class="line">        <span class="keyword">return</span> compositeConstraint;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">    å¦ï¼šconstraint å·²ç»å­˜åœ¨</span></div><div class="line"><span class="comment">    */</span></div><div class="line">    <span class="keyword">if</span> (!constraint) &#123;</div><div class="line">        newConstraint.delegate = <span class="keyword">self</span>;</div><div class="line">        [<span class="keyword">self</span>.constraints addObject:newConstraint];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> newConstraint;</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>ç¬¬å››æ­¥ <code>make.top.left.right.bottom</code> å’Œç¬¬ä¸‰æ­¥ç›¸åŒ</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">@implementation <span class="type">MASConstraint</span></div><div class="line"><span class="comment">// 4.1 æ¥åˆ°çˆ¶ç±»è°ƒç”¨åŸºç¡€æ–¹æ³•</span></div><div class="line">- (<span class="type">MASConstraint</span> *)<span class="keyword">right</span> &#123;</div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">    çˆ¶ç±»å¹¶æ²¡æœ‰å®ç°è¯¥æ–¹æ³•ï¼Œä¼šåˆ†å‘ç»™å­ç±»å®Œæˆï¼Œä¸¤ä¸ªå­ç±»ï¼Œè¯¥åˆ†ç»™ç¡å‘¢ï¼Ÿ</span></div><div class="line"><span class="comment">    */</span></div><div class="line">    <span class="keyword">return</span> [<span class="keyword">self</span> addConstraintWithLayoutAttribute:<span class="type">NSLayoutAttributeRight</span>];</div><div class="line">&#125;</div><div class="line">@end</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">@implementation <span class="type">MASCompositeConstraint</span></div><div class="line"><span class="comment">// 4.3 å­ç±»é‡å†™çˆ¶ç±»æ–¹æ³•ï¼Œåˆ›å»ºæ–°çš„çº¦æŸå¯¹è±¡</span></div><div class="line">- (<span class="type">MASConstraint</span> *)constraint:(<span class="type">MASConstraint</span> __unused *)constraint addConstraintWithLayoutAttribute:(<span class="type">NSLayoutAttribute</span>)layoutAttribute &#123;</div><div class="line">    id&lt;<span class="type">MASConstraintDelegate</span>&gt; strongDelegate = <span class="keyword">self</span>.delegate;</div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">    å› ä¸ºåˆ›å»ºçº¦æŸå¯¹è±¡çš„æ–¹æ³•å·²ç»æœ‰äº†ï¼Œæ²¡å¿…è¦å†å®ç°ä¸€éï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥è°ƒç”¨é‚£ä¸ªè´Ÿè´£åˆ›å»ºçº¦æŸå¯¹è±¡çš„æ–¹æ³•ã€‚</span></div><div class="line"><span class="comment">    */</span></div><div class="line">    <span class="type">MASConstraint</span> *newConstraint = [strongDelegate constraint:<span class="keyword">self</span> addConstraintWithLayoutAttribute:layoutAttribute];</div><div class="line">    newConstraint.delegate = <span class="keyword">self</span>;</div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">    æ”¶é›†åˆ°çº¦æŸé›†åˆé‡Œï¼Œç»Ÿä¸€ç®¡ç†</span></div><div class="line"><span class="comment">    */</span></div><div class="line">    [<span class="keyword">self</span>.childConstraints addObject:newConstraint];</div><div class="line">    <span class="keyword">return</span> newConstraint;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 4.2 æ¥åˆ°å­ç±»</span></div><div class="line">- (<span class="type">MASConstraint</span> *)addConstraintWithLayoutAttribute:(<span class="type">NSLayoutAttribute</span>)layoutAttribute &#123;</div><div class="line">    [<span class="keyword">self</span> constraint:<span class="keyword">self</span> addConstraintWithLayoutAttribute:layoutAttribute];</div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">    ğŸ“¢æ³¨æ„ï¼šè¿™é‡Œå°±è¿”å›äº†ï¼Œè¿”å›çš„æ˜¯ MASCompositeConstraint è‡ªèº«</span></div><div class="line"><span class="comment">    */</span></div><div class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">&#125;</div><div class="line">@end</div></pre></td></tr></table></figure>
<p>ç¬¬äº”æ­¥ <code>.equalTo(superview)</code>ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">@implementation <span class="type">MASConstraint</span></div><div class="line">- (<span class="type">MASConstraint</span> * (^)(id))equalTo &#123;</div><div class="line">    <span class="keyword">return</span> ^id(id attribute) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">self</span>.equalToWithRelation(attribute, <span class="type">NSLayoutRelationEqual</span>);</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line">@end</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">@implementation <span class="type">MASCompositeConstraint</span></div><div class="line">- (<span class="type">MASConstraint</span> * (^)(id, <span class="type">NSLayoutRelation</span>))equalToWithRelation &#123;</div><div class="line">    <span class="keyword">return</span> ^id(id attr, <span class="type">NSLayoutRelation</span> relation) &#123;</div><div class="line">        <span class="keyword">for</span> (<span class="type">MASConstraint</span> *constraint <span class="keyword">in</span> <span class="keyword">self</span>.childConstraints.copy) &#123;</div><div class="line">            constraint.equalToWithRelation(attr, relation);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line">@end</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">@implementation <span class="type">MASViewConstraint</span></div><div class="line">- (<span class="type">MASConstraint</span> * (^)(id, <span class="type">NSLayoutRelation</span>))equalToWithRelation &#123;</div><div class="line">    <span class="keyword">return</span> ^id(id attribute, <span class="type">NSLayoutRelation</span> relation) &#123;</div><div class="line">        <span class="keyword">self</span>.layoutRelation = relation;</div><div class="line">        <span class="keyword">self</span>.secondViewAttribute = attribute;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line">@end</div></pre></td></tr></table></figure>
<p>ç¬¬å…­æ­¥ <code>install</code>ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">@implementation <span class="type">MASConstraintMaker</span></div><div class="line">- (<span class="type">NSArray</span> *)install &#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>.removeExisting) &#123;</div><div class="line">        <span class="type">NSArray</span> *installedConstraints = [<span class="type">MASViewConstraint</span> installedConstraintsForView:<span class="keyword">self</span>.view];</div><div class="line">        <span class="keyword">for</span> (<span class="type">MASConstraint</span> *constraint <span class="keyword">in</span> installedConstraints) &#123;</div><div class="line">            [constraint uninstall];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="type">NSArray</span> *constraints = <span class="keyword">self</span>.constraints.copy;</div><div class="line">    <span class="keyword">for</span> (<span class="type">MASConstraint</span> *constraint <span class="keyword">in</span> constraints) &#123;</div><div class="line">        constraint.updateExisting = <span class="keyword">self</span>.updateExisting;</div><div class="line">        [constraint install];</div><div class="line">    &#125;</div><div class="line">    [<span class="keyword">self</span>.constraints removeAllObjects];</div><div class="line">    <span class="keyword">return</span> constraints;</div><div class="line">&#125;</div><div class="line">@end</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">@implementation <span class="type">MASCompositeConstraint</span></div><div class="line">- (void)install &#123;</div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">    éå†åŠ è½½æ‰€æœ‰çº¦æŸå¯¹è±¡</span></div><div class="line"><span class="comment">    */</span></div><div class="line">    <span class="keyword">for</span> (<span class="type">MASConstraint</span> *constraint <span class="keyword">in</span> <span class="keyword">self</span>.childConstraints) &#123;</div><div class="line">        constraint.updateExisting = <span class="keyword">self</span>.updateExisting;</div><div class="line">        [constraint install];</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">@end</div></pre></td></tr></table></figure>
<h3 id="æ¡ˆä¾‹ä¸‰"><a href="#æ¡ˆä¾‹ä¸‰" class="headerlink" title="æ¡ˆä¾‹ä¸‰"></a>æ¡ˆä¾‹ä¸‰</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="type">UIView</span> *superview = <span class="keyword">self</span>.view;</div><div class="line"></div><div class="line"><span class="type">UIView</span> *view1 = [[<span class="type">UIView</span> alloc] <span class="keyword">init</span>];</div><div class="line">[superview addSubview:view1];</div><div class="line"></div><div class="line">[view1 mas_makeConstraints:^(<span class="type">MASConstraintMaker</span> *make) &#123;</div><div class="line">    make.top.equalTo(superview);</div><div class="line">    make.<span class="keyword">left</span>.equalTo(superview);</div><div class="line">    make..<span class="keyword">right</span>.bottom.equalTo(superview);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<p>æ—¶åºå›¾</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line">sequenceDiagram</div><div class="line">    participant View       as UIView</div><div class="line">    participant Addition   as View+MASAdditions</div><div class="line">    participant Maker      as MASConstraintMaker</div><div class="line">    participant Constraint as MASViewConstraint</div><div class="line">    participant Composite as MASCompositeConstraint</div><div class="line">    </div><div class="line">    View       -&gt;&gt;  + Addition  : &quot;mas_makeConstraints:&quot;</div><div class="line">    activate View</div><div class="line">    </div><div class="line">    # 1. åˆ›å»º Maker</div><div class="line">    Addition   -&gt;&gt;  + Maker     : &quot;1. åˆ›å»º Maker&quot;</div><div class="line">    Maker      --&gt;&gt; - Addition  : &quot;å®Œæˆ&quot;</div><div class="line"></div><div class="line">    # 2. æ·»åŠ çº¦æŸ</div><div class="line">    Addition -&gt;&gt;  + Maker        : &quot;2.1 æ·»åŠ â€œTopâ€çº¦æŸåˆ°çº¦æŸæ•°ç»„ constraints ä¸­ï¼ˆmake.topï¼‰&quot;</div><div class="line">    Maker    --&gt;&gt; - Addition     : &quot;è¿”å›çº¦æŸå¯¹è±¡ï¼ˆMASViewConstraintï¼‰&quot;</div><div class="line"></div><div class="line">    Addition   -&gt;&gt;  + Constraint : &quot;.equalTo(superview)&quot;</div><div class="line">    Constraint --&gt;&gt; - Addition   : &quot;å®Œæˆ&quot;</div><div class="line"></div><div class="line">    Addition   -&gt;&gt;  + Maker      : &quot;2.2 æ·»åŠ â€œLeftâ€çº¦æŸåˆ°çº¦æŸæ•°ç»„ constraints ä¸­ï¼ˆmake.leftï¼‰&quot;</div><div class="line">    Maker      --&gt;&gt; - Addition   : &quot;è¿”å›çº¦æŸå¯¹è±¡ï¼ˆMASViewConstraintï¼‰&quot;</div><div class="line"></div><div class="line">    Addition   -&gt;&gt;  + Constraint : &quot;.equalTo(superview)&quot;</div><div class="line">    Constraint --&gt;&gt; - Addition   : &quot;å®Œæˆ&quot;</div><div class="line">    </div><div class="line">    Addition   -&gt;&gt;  + Maker      : &quot;2.3 æ·»åŠ â€œRightâ€çº¦æŸåˆ°çº¦æŸæ•°ç»„ constraints ä¸­ï¼ˆmake.Rightï¼‰&quot;</div><div class="line">    Maker      --&gt;&gt; - Addition   : &quot;è¿”å›çº¦æŸå¯¹è±¡ï¼ˆMASViewConstraintï¼‰&quot;</div><div class="line"></div><div class="line">    Addition   -&gt;&gt;  + Constraint : &quot;2.4 æ·»åŠ â€œBottomâ€çº¦æŸï¼ˆmake.right.bottomï¼‰&quot;</div><div class="line">    Constraint -&gt;&gt;  + Composite  : &quot;åˆ›å»ºçº¦æŸé›†åˆï¼Œå°†çº¦æŸå¯¹è±¡æ”¾å…¥çº¦æŸé›†åˆ&quot;</div><div class="line">    Composite  --&gt;&gt; - Constraint : &quot;å®Œæˆ&quot;</div><div class="line">    Constraint --&gt;&gt; - Addition   : &quot;è¿”å›çº¦æŸé›†åˆï¼ˆMASCompositeConstraintï¼‰&quot;</div><div class="line">    </div><div class="line">    Addition   -&gt;&gt;  + Composite  : &quot;2.5 .equalTo(superview)&quot;</div><div class="line">    Composite  -&gt;&gt;  + Constraint : &quot;éå†é›†åˆä¸­çš„çº¦æŸå¯¹è±¡.equalTo(superview)&quot;</div><div class="line">    Constraint --&gt;&gt; - Composite  : &quot;å®Œæˆ&quot;</div><div class="line">    Composite  --&gt;&gt; - Addition   : &quot;å®Œæˆ&quot;</div><div class="line"></div><div class="line">    # 3. åº”ç”¨çº¦æŸ</div><div class="line">    Addition   -&gt;&gt;  + Maker      : &quot;3.1 éå†é›†åˆä¸­ Constraint å¯¹è±¡æ‰§è¡Œ install&quot;</div><div class="line">    Maker      -&gt;&gt;  + Constraint : &quot;3.2 Constraint å¯¹è±¡æ‰§è¡Œ install&quot;</div><div class="line">    Constraint  --&gt;&gt;  - Maker    : &quot;å®Œæˆ&quot;</div><div class="line">    Maker      -&gt;&gt;  + Composite  : &quot;3.3 â€œçº¦æŸé›†åˆ Compositeâ€å¯¹è±¡æ‰§è¡Œ install&quot;</div><div class="line">    Composite  -&gt;&gt;  + Constraint : &quot;3.3.1 éå†çº¦æŸé›†åˆä¸­çš„ Constraint å¯¹è±¡ï¼Œæ‰§è¡Œ install&quot;</div><div class="line">    Constraint --&gt;&gt; - Composite  : &quot;å®Œæˆ&quot;</div><div class="line">    Composite  --&gt;&gt;  - Maker     : &quot;å®Œæˆ&quot;</div><div class="line">    Maker      --&gt;&gt; - Addition   : &quot;å®Œæˆï¼Œè¿”å› constraintsï¼ˆçº¦æŸé›†åˆï¼‰&quot;</div><div class="line">    Addition   --&gt;&gt; - View       : &quot;å®Œæˆï¼Œè¿”å› constraintsï¼ˆçº¦æŸé›†åˆï¼‰&quot;</div><div class="line">    deactivate View</div></pre></td></tr></table></figure>
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Githubå¼€æºæ¡†æ¶/" rel="tag"># Githubå¼€æºæ¡†æ¶</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2023/05/04/Swift/é¢å‘å¯¹è±¡ç¼–ç¨‹/" rel="next" title="é¢å‘å¯¹è±¡ç¼–ç¨‹">
                <i class="fa fa-chevron-left"></i> é¢å‘å¯¹è±¡ç¼–ç¨‹
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2023/07/25/Githubå¼€æºæ¡†æ¶/Alamofire/" rel="prev" title="Alamofire">
                Alamofire <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="gitalk-container"></div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          
            <img class="site-author-image" itemprop="image"
              src="/images/myAvatar.gif"
              alt="Kevin" />
          
            <p class="site-author-name" itemprop="name">Kevin</p>
            <p class="site-description motion-element" itemprop="description"></p>
        </div>

        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
            
              <a href="/archives/">
            
                <span class="site-state-item-count">48</span>
                <span class="site-state-item-name">æ—¥å¿—</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/KevinYangGit" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>GitHub</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="mailto:yangqioffice@gmail.com" target="_blank" title="E-Mail">
                  
                    <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/_YangQI" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>Twitter</a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-block">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="https://www.cnblogs.com/mjios" title="Mäº†ä¸ªJ" target="_blank">Mäº†ä¸ªJ</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#é“¾å¼ç¼–ç¨‹"><span class="nav-number">1.</span> <span class="nav-text">é“¾å¼ç¼–ç¨‹</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ç‰¹ç‚¹ä¸€"><span class="nav-number">1.1.</span> <span class="nav-text">ç‰¹ç‚¹ä¸€</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç‰¹ç‚¹äºŒ"><span class="nav-number">1.2.</span> <span class="nav-text">ç‰¹ç‚¹äºŒ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç‰¹ç‚¹ä¸‰"><span class="nav-number">1.3.</span> <span class="nav-text">ç‰¹ç‚¹ä¸‰</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Masonryç®€ä»‹"><span class="nav-number">2.</span> <span class="nav-text">Masonryç®€ä»‹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Autolayout"><span class="nav-number">3.</span> <span class="nav-text">Autolayout</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#NSLayoutConstraint"><span class="nav-number">3.1.</span> <span class="nav-text">NSLayoutConstraint</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NSLayoutAttribute"><span class="nav-number">3.2.</span> <span class="nav-text">NSLayoutAttribute</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NSLayoutRelation"><span class="nav-number">3.3.</span> <span class="nav-text">NSLayoutRelation</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Masonryçš„UML"><span class="nav-number">4.</span> <span class="nav-text">Masonryçš„UML</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#View-MASAdditions"><span class="nav-number">4.1.</span> <span class="nav-text">View+MASAdditions</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MASViewAttribute"><span class="nav-number">4.2.</span> <span class="nav-text">MASViewAttribute</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MASConstraintMaker"><span class="nav-number">4.3.</span> <span class="nav-text">MASConstraintMaker</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MASConstraint"><span class="nav-number">4.4.</span> <span class="nav-text">MASConstraint</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MASViewConstraint"><span class="nav-number">4.5.</span> <span class="nav-text">MASViewConstraint</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MASCompositeConstraint"><span class="nav-number">4.6.</span> <span class="nav-text">MASCompositeConstraint</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Masonryçº¦æŸå®ç°åŸç†"><span class="nav-number">5.</span> <span class="nav-text">Masonryçº¦æŸå®ç°åŸç†</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#æ¡ˆä¾‹ä¸€"><span class="nav-number">5.1.</span> <span class="nav-text">æ¡ˆä¾‹ä¸€</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ¡ˆä¾‹äºŒ"><span class="nav-number">5.2.</span> <span class="nav-text">æ¡ˆä¾‹äºŒ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ¡ˆä¾‹ä¸‰"><span class="nav-number">5.3.</span> <span class="nav-text">æ¡ˆä¾‹ä¸‰</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 &mdash; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Kevin</span>

  
</div>


  <div class="powered-by">ç”± <a class="theme-link" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>

  <span class="post-meta-divider">|</span>

  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.2</div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>


  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  








  <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
  <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
  <script src="/js/src/md5.min.js"></script>
  <div id="gitalk-container"></div>
  <script type="text/javascript">
    var gitalk = new Gitalk({
      clientID: '82b6ced795961ee1fcca',
      clientSecret: '4a2f24a39c6fcd85813d80031c6e0262a65404f5',
      repo: 'KevinYangGit.github.io',
      owner: 'KevinYangGit',
      admin: ['KevinYangGit'],
      id: md5(location.pathname),
      distractionFreeMode: 'true'
    })
    gitalk.render('gitalk-container')
  </script>

  





  

  

  

  
  


  

  

</body>
</html>
