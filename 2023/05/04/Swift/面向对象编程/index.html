<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Swift," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="概述 枚举 属性 方法 下标 初始化和反初始化 继承 多态 扩展 协议 协议和扩展 面向协议编程">
<meta name="keywords" content="Swift">
<meta property="og:type" content="article">
<meta property="og:title" content="面向对象编程">
<meta property="og:url" content="http://yoursite.com/2023/05/04/Swift/面向对象编程/index.html">
<meta property="og:site_name" content="Kevin&#39;s  blog">
<meta property="og:description" content="概述 枚举 属性 方法 下标 初始化和反初始化 继承 多态 扩展 协议 协议和扩展 面向协议编程">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/2023/05/04/Swift/Swift/面向对象编程/01.png">
<meta property="og:image" content="http://yoursite.com/2023/05/04/Swift/Swift/面向对象编程/02.png">
<meta property="og:image" content="http://yoursite.com/2023/05/04/Swift/Swift/面向对象编程/03.png">
<meta property="og:image" content="http://yoursite.com/2023/05/04/Swift/Swift/面向对象编程/04.png">
<meta property="og:image" content="http://yoursite.com/2023/05/04/Swift/Swift/面向对象编程/09.png">
<meta property="og:image" content="http://yoursite.com/2023/05/04/Swift/Swift/面向对象编程/10.png">
<meta property="og:image" content="http://yoursite.com/2023/05/04/Swift/Swift/面向对象编程/05.png">
<meta property="og:image" content="http://yoursite.com/2023/05/04/Swift/Swift/面向对象编程/06.png">
<meta property="og:image" content="http://yoursite.com/2023/05/04/Swift/Swift/面向对象编程/07.png">
<meta property="og:image" content="http://yoursite.com/2023/05/04/Swift/Swift/面向对象编程/08.png">
<meta property="og:image" content="http://yoursite.com/2023/05/04/Swift/Swift/面向对象编程/11.png">
<meta property="og:image" content="http://yoursite.com/2023/05/04/Swift/Swift/面向对象编程/12.png">
<meta property="og:image" content="http://yoursite.com/2023/05/04/Swift/Swift/面向对象编程/15.png">
<meta property="og:image" content="http://yoursite.com/2023/05/04/Swift/Swift/面向对象编程/13.png">
<meta property="og:image" content="http://yoursite.com/2023/05/04/Swift/Swift/面向对象编程/14.png">
<meta property="og:image" content="http://yoursite.com/2023/05/04/Swift/Swift/面向对象编程/16.png">
<meta property="og:image" content="http://yoursite.com/2023/05/04/Swift/Swift/面向对象编程/17.png">
<meta property="og:image" content="http://yoursite.com/2023/05/04/Swift/Swift/面向对象编程/18.png">
<meta property="og:image" content="http://yoursite.com/2023/05/04/Swift/Swift/面向对象编程/19.png">
<meta property="og:image" content="http://yoursite.com/2023/05/04/Swift/Swift/面向对象编程/20.png">
<meta property="og:image" content="http://yoursite.com/2023/05/04/Swift/Swift/面向对象编程/21.png">
<meta property="og:image" content="http://yoursite.com/2023/05/04/Swift/Swift/面向对象编程/22.png">
<meta property="og:image" content="http://yoursite.com/2023/05/04/Swift/Swift/面向对象编程/23.png">
<meta property="og:image" content="http://yoursite.com/2023/05/04/Swift/Swift/面向对象编程/24.png">
<meta property="og:image" content="http://yoursite.com/2023/05/04/Swift/Swift/面向对象编程/25.png">
<meta property="og:updated_time" content="2023-08-17T09:40:05.384Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="面向对象编程">
<meta name="twitter:description" content="概述 枚举 属性 方法 下标 初始化和反初始化 继承 多态 扩展 协议 协议和扩展 面向协议编程">
<meta name="twitter:image" content="http://yoursite.com/2023/05/04/Swift/Swift/面向对象编程/01.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2023/05/04/Swift/面向对象编程/"/>





  <title>面向对象编程 | Kevin's  blog</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?a073c6e38282486853e19b272e9e7c34";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Kevin's  blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2023/05/04/Swift/面向对象编程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kevin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/myAvatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kevin's  blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">面向对象编程</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2023-05-04T10:41:19+08:00">
                2023-05-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <ul>
<li><a href="#概述">概述</a></li>
<li><a href="#枚举">枚举</a></li>
<li><a href="#属性">属性</a></li>
<li><a href="#方法">方法</a></li>
<li><a href="#下标">下标</a></li>
<li><a href="#初始化和反初始化">初始化和反初始化</a></li>
<li><a href="#继承">继承</a></li>
<li><a href="#多态">多态</a></li>
<li><a href="#扩展">扩展</a></li>
<li><a href="#协议">协议</a></li>
<li><a href="#协议和扩展">协议和扩展</a></li>
<li><a href="#面向协议编程">面向协议编程</a></li>
</ul>
<a id="more"></a>
<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>Swift 的类、结构体、枚举中都可以定义属性、方法、下标、构造体和嵌套类型。在 Swift 中，枚举和结构体是值类型，类是引用类型。从整体的功能上看 Swift 的枚举、结构体、类三者具有完全平等的地位。</p>
<h3 id="面向对象的三大特性"><a href="#面向对象的三大特性" class="headerlink" title="面向对象的三大特性"></a>面向对象的三大特性</h3><ol>
<li><strong>封装（Encapsulation）</strong>：隐藏类的实现细节，让使用者只能通过预定的方法来访问。</li>
<li><strong>继承（inheritance）</strong>：指子类从父类继承方法，使得子类具有父类相同的行为。通过继承创建的新类称为“子类”或“派生类”，被继承的类称为“基类”、“父类”或“超类”。继承的过程，就是从一般到特殊的过程。</li>
<li><strong>多态（polymorphism）</strong>：指同一个方法在不同的对象上有不同的实现方式。</li>
</ol>
<h3 id="基本单元"><a href="#基本单元" class="headerlink" title="基本单元"></a>基本单元</h3><ol>
<li>枚举（enum）</li>
<li>结构体（struct）</li>
<li>类（class）</li>
<li>协议（protocol）</li>
<li>扩展（extension）</li>
</ol>
<h3 id="类和结构体相似点"><a href="#类和结构体相似点" class="headerlink" title="类和结构体相似点"></a>类和结构体相似点</h3><ol>
<li><strong>属性</strong>：定义属性用来存储值；</li>
<li><strong>方法</strong>：定义方法用于提供功能；</li>
<li><strong>下标</strong>：定义下标脚本用来允许使用下标语法访问值；</li>
<li><strong>扩展</strong>：可以被扩展提供默认所没有的功能；</li>
<li><strong>协议</strong>：遵循协议来针对特定类型提供标准功能。</li>
<li><strong>初始化器</strong>：定义初始化器用于初始化状态；</li>
</ol>
<h3 id="类和结构体的不同点"><a href="#类和结构体的不同点" class="headerlink" title="类和结构体的不同点"></a>类和结构体的不同点</h3><ol>
<li><strong>继承</strong>：允许一个类继承另一个类的特征；</li>
<li><strong>类型转换</strong>：允许在运行时检查和解释一个类实例的类型；</li>
<li><strong>反初始化器</strong>：允许一个类实例释放所有被分配的资源；</li>
<li><strong>引用计数</strong>：允许不止一个对类实例的引用。</li>
</ol>
<h2 id="枚举"><a href="#枚举" class="headerlink" title="枚举"></a>枚举</h2><h3 id="枚举语法"><a href="#枚举语法" class="headerlink" title="枚举语法"></a>枚举语法</h3><p>用 <code>enum</code> 关键字来定义一个枚举，然后将所有的定义内容放在大括号<code>{}</code>中。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">CompassPoint</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> north</div><div class="line">    <span class="keyword">case</span> south</div><div class="line">    <span class="keyword">case</span> east</div><div class="line">    <span class="keyword">case</span> west</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>多个成员值可以出现在同一行中，用逗号隔开：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">CompassPoint</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> north, south, east, west</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>每个枚举都定义了一个全新的类型。枚举的名字需要首字母大写（例如：<code>CompassPoint</code>）。要给枚举类型起一个单数的名字，从而使得枚举能够通俗易懂、顾名思义。</p>
<h3 id="使用-Switch-语句来匹配枚举值"><a href="#使用-Switch-语句来匹配枚举值" class="headerlink" title="使用 Switch 语句来匹配枚举值"></a>使用 Switch 语句来匹配枚举值</h3><p>使用 <code>switch</code> 语句匹配每一个单独的枚举值：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">CompassPoint</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> north, south, east, west</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> directionToHead = <span class="type">CompassPoint</span>.south</div><div class="line"><span class="keyword">switch</span> directionToHead &#123;</div><div class="line"><span class="keyword">case</span> .north:</div><div class="line">    <span class="built_in">print</span>(<span class="string">"north"</span>)</div><div class="line"><span class="keyword">case</span> .south:</div><div class="line">    <span class="built_in">print</span>(<span class="string">"south"</span>)</div><div class="line"><span class="keyword">case</span> .east:</div><div class="line">    <span class="built_in">print</span>(<span class="string">"east"</span>)</div><div class="line"><span class="keyword">case</span> .west:</div><div class="line">    <span class="built_in">print</span>(<span class="string">"weat"</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Prints "south"</span></div></pre></td></tr></table></figure>
<h3 id="遍历枚举的-case"><a href="#遍历枚举的-case" class="headerlink" title="遍历枚举的 case"></a>遍历枚举的 case</h3><ol>
<li><code>CaseIterable</code>：通过在枚举名字后面写 <code>CaseIterable</code>，来允许枚举被遍历。</li>
<li><code>allCases</code>：Swift 的枚举暴露了一个集合 <code>allCases</code>，同字面义，该集合包含对应枚举类型的所有情况。</li>
</ol>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">CompassPoint</span>: <span class="title">CaseIterable</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> north</div><div class="line">    <span class="keyword">case</span> south</div><div class="line">    <span class="keyword">case</span> east</div><div class="line">    <span class="keyword">case</span> west</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">for</span> direction <span class="keyword">in</span> <span class="type">CompassPoint</span>.allCases &#123;</div><div class="line">    <span class="built_in">print</span>(direction)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">north</div><div class="line">south</div><div class="line">east</div><div class="line">west</div></pre></td></tr></table></figure>
<h3 id="关联值"><a href="#关联值" class="headerlink" title="关联值"></a>关联值</h3><p>可以定义枚举来存储任意类型的关联值，不同枚举成员关联值的类型可以不同。</p>
<p>定义一个枚举，支持条形码和二维码：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Barcode</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> upc(<span class="type">Int</span>, <span class="type">Int</span>, <span class="type">Int</span>, <span class="type">Int</span>)</div><div class="line">    <span class="keyword">case</span> qrCode(<span class="type">String</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> productBarCode = <span class="type">Barcode</span>.upc(<span class="number">8</span>, <span class="number">85909</span>, <span class="number">51226</span>, <span class="number">3</span>)</div><div class="line"><span class="built_in">print</span>(productBarCode)</div><div class="line"></div><div class="line">productBarCode = .qrCode(<span class="string">"ABCDEFGHIJKLMNOPQRSTUVWXYZ"</span>)</div><div class="line"><span class="built_in">print</span>(productBarCode)</div></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">upc(<span class="number">8</span>, <span class="number">85909</span>, <span class="number">51226</span>, <span class="number">3</span>)</div><div class="line">qrCode(<span class="string">"ABCDEFGHIJKLMNOPQRSTUVWXYZ"</span>)</div></pre></td></tr></table></figure>
<p><code>upc</code> 有四个关联值，都是 <code>Int</code> 类型；<code>qrCode</code> 有一个关联值，<code>String</code> 类型。</p>
<p>使用 <code>switch</code> <strong>匹配值</strong>：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">switch</span> productBarCode &#123;</div><div class="line"><span class="keyword">case</span> .upc(<span class="keyword">let</span> numberSystem, <span class="keyword">let</span> manufacturer, <span class="keyword">let</span> product, <span class="keyword">let</span> check):</div><div class="line">    <span class="built_in">print</span>(<span class="string">"UPC: <span class="subst">\(numberSystem)</span>, <span class="subst">\(manufacturer)</span>, <span class="subst">\(product)</span>, <span class="subst">\(check)</span>."</span>)</div><div class="line"><span class="keyword">case</span> .qrCode(<span class="keyword">let</span> productCode):</div><div class="line">    <span class="built_in">print</span>(<span class="string">"QR code: <span class="subst">\(productCode)</span>"</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Prints "QR code: ABCDEFGHIJKLMNOPQRSTUVWXYZ"</span></div></pre></td></tr></table></figure>
<h3 id="原始值"><a href="#原始值" class="headerlink" title="原始值"></a>原始值</h3><p>原始值：指枚举成员可以用相同类型的<strong>默认值</strong>预先填充。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">ASCIIControlCharacter</span>: <span class="title">Character</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> tab = <span class="string">"\t"</span></div><div class="line">    <span class="keyword">case</span> lineFeed = <span class="string">"\n"</span></div><div class="line">    <span class="keyword">case</span> carriageReturn = <span class="string">"\r"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="预设原始值"><a href="#预设原始值" class="headerlink" title="预设原始值"></a>预设原始值</h4><p>在操作存储整数或字符串原始值枚举的时候，因为Swift的枚举会自动分配值（在没有分配值时），所以不用显示的为每一个成员分配原始值。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Planet</span>: <span class="title">Int</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> mercury = <span class="number">1</span>, venus, earth, mars, jupiter, saturn, uranus, neptune</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">CompassPoint</span>: <span class="title">String</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> north, south, east, west</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>使用 <code>rawValue</code> 获取其值：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">print</span>(<span class="type">Planet</span>.earth.rawValue)</div><div class="line"><span class="comment">// Prints "3"</span></div><div class="line"></div><div class="line"><span class="built_in">print</span>(<span class="type">CompassPoint</span>.south.rawValue)</div><div class="line"><span class="comment">// Prints "south"</span></div></pre></td></tr></table></figure>
<p><code>.earth</code> 的原始值被自动分配成了 3，<code>.south</code> 的原始值被自动分配成了字符串“south”。</p>
<h4 id="从原始值初始化"><a href="#从原始值初始化" class="headerlink" title="从原始值初始化"></a>从原始值初始化</h4><p>枚举提供了一个默认初始化器，该初始化器可以接收一个形式参数 rawValue，返回一个枚举成员或者 nil。</p>
<p>使用初始化器创建一个枚举实例：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> possiblePlanet = <span class="type">Planet</span>(rawValue: <span class="number">7</span>)</div><div class="line"><span class="built_in">print</span>(possiblePlanet!)</div><div class="line"><span class="comment">// Prints "uranus"</span></div></pre></td></tr></table></figure>
<p>或者：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> positionToFind = <span class="number">11</span></div><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> somePlanet = <span class="type">Planet</span>(rawValue: positionToFind) &#123;</div><div class="line">    <span class="keyword">switch</span> somePlanet &#123;</div><div class="line">    <span class="keyword">case</span> .earth:</div><div class="line">        <span class="built_in">print</span>(<span class="string">"earth"</span>)</div><div class="line">    <span class="keyword">default</span>:</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Not a safe place for humans"</span>)</div><div class="line">    &#125;</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"There isn't a planet at position <span class="subst">\(positionToFind)</span>"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// Prints "There isn't a planet at position 11"</span></div></pre></td></tr></table></figure>
<h3 id="递归枚举（indirect）"><a href="#递归枚举（indirect）" class="headerlink" title="递归枚举（indirect）"></a>递归枚举（indirect）</h3><p>递归枚举：枚举成员的<strong>关联值是枚举</strong>。</p>
<p>因为编译器在操作递归枚举时必须插入间接寻址层，所以在声明枚举时需要使用 <code>indirect</code> 关键字来明确该枚举是递归枚举。</p>
<p>实现 <code>(1 + 2) * 3</code>，先算加法，再算乘法：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">indirect</span> <span class="class"><span class="keyword">enum</span> <span class="title">ArithmeticExpression</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> number(<span class="type">Int</span>)</div><div class="line">    <span class="keyword">case</span> addition(<span class="type">ArithmeticExpression</span>, <span class="type">ArithmeticExpression</span>)</div><div class="line">    <span class="keyword">case</span> multiplication(<span class="type">ArithmeticExpression</span>, <span class="type">ArithmeticExpression</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 执行函数</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">evaluate</span><span class="params">(<span class="number">_</span> expression: ArithmeticExpression)</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">    <span class="keyword">switch</span> expression &#123;</div><div class="line">    <span class="keyword">case</span> <span class="keyword">let</span> .number(value):</div><div class="line">        <span class="keyword">return</span> value</div><div class="line">    <span class="keyword">case</span> <span class="keyword">let</span> .addition(<span class="keyword">left</span>, <span class="keyword">right</span>):</div><div class="line">        <span class="keyword">return</span> evaluate(<span class="keyword">left</span>) + evaluate(<span class="keyword">right</span>)</div><div class="line">    <span class="keyword">case</span> <span class="keyword">let</span> .multiplication(<span class="keyword">left</span>, <span class="keyword">right</span>):</div><div class="line">        <span class="keyword">return</span> evaluate(<span class="keyword">left</span>) * evaluate(<span class="keyword">right</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// (1 + 2) * 3</span></div><div class="line"><span class="keyword">let</span> one = <span class="type">ArithmeticExpression</span>.number(<span class="number">1</span>)</div><div class="line"><span class="keyword">let</span> two = <span class="type">ArithmeticExpression</span>.number(<span class="number">2</span>)</div><div class="line"><span class="keyword">let</span> sum = <span class="type">ArithmeticExpression</span>.addition(one, two)</div><div class="line"><span class="keyword">let</span> product = <span class="type">ArithmeticExpression</span>.multiplication(sum, <span class="type">ArithmeticExpression</span>.number(<span class="number">3</span>))</div><div class="line"></div><div class="line"><span class="built_in">print</span>(evaluate(product))</div><div class="line"><span class="comment">// Prints "9"</span></div></pre></td></tr></table></figure>
<p>因为 <code>switch</code> 实现了所有 case，所以不用 <code>default</code> 字段。</p>
<h2 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h2><h3 id="存储属性"><a href="#存储属性" class="headerlink" title="存储属性"></a>存储属性</h3><p>存储属性是特定类和结构体实例一部分，可以是变量存储属性（var），也可以是常量存储属性（let）。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">DataManager</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> fileName = <span class="string">"data.text"</span></div><div class="line">    <span class="keyword">let</span> filePath: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>, path: <span class="type">String</span>) &#123;</div><div class="line">        fileName = name</div><div class="line">        filePath = path</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="常量结构体实例的存储属性"><a href="#常量结构体实例的存储属性" class="headerlink" title="常量结构体实例的存储属性"></a>常量结构体实例的存储属性</h4><p>如果创建了一个结构体的实例，并且把实例赋给常量，则不能修改该实例的属性，即使是声明为变量的属性。即<strong>常量结构体实例，不允许修改其属性</strong>。</p>
<p><img src="/2023/05/04/Swift/面向对象编程/../Swift/面向对象编程/01.png" alt="01.png"></p>
<h4 id="延迟存储属性"><a href="#延迟存储属性" class="headerlink" title="延迟存储属性"></a>延迟存储属性</h4><p>在声明属性时，通过在声明前面标注 <code>lazy</code> 修改语来表示一个延迟存储属性，即<strong>被 <code>lazy</code> 修饰符标记的属性</strong>。延迟存储属性的初始值会延迟到在其第一次使用时才进行计算。</p>
<p>延迟存储属性的线程安全问题：在延迟存储属性还没有被初始化时，同时被多个线程访问，则<strong>无法保证属性值只初始化一次</strong>。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">DataImporter</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> fileName = <span class="string">"data.text"</span></div><div class="line">    <span class="keyword">init</span>() &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"DataImporter inits"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">DataManager</span> </span>&#123;</div><div class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> importer = <span class="type">DataImporter</span>()</div><div class="line">    <span class="keyword">var</span> data = [<span class="type">String</span>]()</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> manager = <span class="type">DataManager</span>()</div><div class="line">manager.data.append(<span class="string">"some data"</span>)</div><div class="line">manager.data.append(<span class="string">"some more data"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"manager.data.append finish"</span>)</div><div class="line"><span class="built_in">print</span>(manager.importer.fileName)</div></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">manager.data.append finish</div><div class="line">DataImporter inits</div><div class="line">data.text</div></pre></td></tr></table></figure>
<p>“DataImporter inits” 是在执行完 <code>manager.data.append()</code>，直到调用 <code>print(manager.importer.fileName)</code> 之前才打印的。</p>
<h3 id="计算属性"><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h3><p>类、结构体和枚举也能够定义计算属性，与存储属性不同，<strong>计算属性不存储值</strong>。计算属性通过提供一个读取器和一个设置器，间接实现读取和修改其它的属性和值。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> x = <span class="number">0.0</span>, y = <span class="number">0.0</span></div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Size</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> width = <span class="number">0.0</span>, height = <span class="number">0.0</span></div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Rect</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> origin = <span class="type">Point</span>()</div><div class="line">    <span class="keyword">var</span> size = <span class="type">Size</span>()</div><div class="line">    <span class="keyword">var</span> center: <span class="type">Point</span> &#123;</div><div class="line">        <span class="keyword">get</span> &#123;</div><div class="line">            <span class="keyword">let</span> centerX = origin.x + (size.width / <span class="number">2</span>)</div><div class="line">            <span class="keyword">let</span> centerY = origin.y + (size.height / <span class="number">2</span>)</div><div class="line">            <span class="keyword">return</span> <span class="type">Point</span>(x: centerX, y: centerY)</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">set</span>(newCenter) &#123;</div><div class="line">            origin.x = newCenter.x - (size.width / <span class="number">2</span>)</div><div class="line">            origin.y = newCenter.y - (size.height / <span class="number">2</span>)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="简写-setter"><a href="#简写-setter" class="headerlink" title="简写 setter"></a>简写 setter</h4><p>计算属性的设置器有一个默认的名字 newValue，可以不用为设置器传入的值定义名字。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Rect</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> origin = <span class="type">Point</span>()</div><div class="line">    <span class="keyword">var</span> size = <span class="type">Size</span>()</div><div class="line">    <span class="keyword">var</span> center: <span class="type">Point</span> &#123;</div><div class="line">        <span class="keyword">get</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="type">Point</span>(x: origin.x + (size.width / <span class="number">2</span>), y: origin.y + (size.height / <span class="number">2</span>))</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">set</span> &#123;</div><div class="line">            origin.x = newValue.x - (size.width / <span class="number">2</span>)</div><div class="line">            origin.y = newValue.y - (size.height / <span class="number">2</span>)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="简写-getter"><a href="#简写-getter" class="headerlink" title="简写 getter"></a>简写 getter</h4><p>如果整个读取器 getter 的函数体是一个单一的表达式，则 getter 会隐式返回这个表达式。可以省略 return：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Rect</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> origin = <span class="type">Point</span>()</div><div class="line">    <span class="keyword">var</span> size = <span class="type">Size</span>()</div><div class="line">    <span class="keyword">var</span> center: <span class="type">Point</span> &#123;</div><div class="line">        <span class="keyword">get</span> &#123;</div><div class="line">            <span class="type">Point</span>(x: origin.x + (size.width / <span class="number">2</span>), y: origin.y + (size.height / <span class="number">2</span>))</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">set</span> &#123;</div><div class="line">            origin.x = newValue.x - (size.width / <span class="number">2</span>)</div><div class="line">            origin.y = newValue.y - (size.height / <span class="number">2</span>)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="只读计算属性"><a href="#只读计算属性" class="headerlink" title="只读计算属性"></a>只读计算属性</h4><p>只读计算属性：计算属性只有读取器，没有设置器。只读属性可以返回一个值，但是不能修改。可以通过点语法访问只读计算属性。</p>
<p>因为计算属性的值是不固定的，所以必须用 <code>var</code> 关键字定义计算属性为变量属性，包括只读计算属性。</p>
<p><code>let</code> 关键字只用于常量属性，明确属性在初始化后就不能更改。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Rect</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> origin = <span class="type">Point</span>()</div><div class="line">    <span class="keyword">var</span> size = <span class="type">Size</span>()</div><div class="line">    <span class="keyword">var</span> center: <span class="type">Point</span> &#123;</div><div class="line">        <span class="keyword">get</span> &#123;</div><div class="line">            <span class="type">Point</span>(x: origin.x + (size.width / <span class="number">2</span>), y: origin.y + (size.height / <span class="number">2</span>))</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>或者简写成：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Rect</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> origin = <span class="type">Point</span>()</div><div class="line">    <span class="keyword">var</span> size = <span class="type">Size</span>()</div><div class="line">    <span class="keyword">var</span> center: <span class="type">Point</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="type">Point</span>(x: origin.x + (size.width / <span class="number">2</span>), y: origin.y + (size.height / <span class="number">2</span>))</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="属性观察者"><a href="#属性观察者" class="headerlink" title="属性观察者"></a>属性观察者</h3><p><code>willSet</code> 会在一个新值<strong>被存储之前被调用</strong>。新的属性值会以常量形式参数传递，默认名字为 newValue，也可以自定义名字。<br><code>didSet</code> 会在一个新值<strong>被存储后被调用</strong>。旧的属性值会以常量形式参数传递，默认名字为 oldValue，也可以自定义名字。如果在属性的 <code>didSet</code> 里给该属性赋值，则会覆盖 <code>willSet</code> 里设置的值。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">StepCounter</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> totalSteps: <span class="type">Int</span> = <span class="number">0</span> &#123;</div><div class="line">        <span class="keyword">willSet</span>(newTotalSteps) &#123;</div><div class="line">            <span class="built_in">print</span>(<span class="string">"About to set totalSteps to <span class="subst">\(newTotalSteps)</span>"</span>)</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">didSet</span> &#123;</div><div class="line">            <span class="keyword">if</span> totalSteps &gt; oldValue &#123;</div><div class="line">                <span class="built_in">print</span>(<span class="string">"Added <span class="subst">\(totalSteps - oldValue)</span> steps"</span>)</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> stepCounter = <span class="type">StepCounter</span>()</div><div class="line">stepCounter.totalSteps = <span class="number">200</span></div><div class="line">stepCounter.totalSteps = <span class="number">300</span></div></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">About to set totalSteps to <span class="number">200</span></div><div class="line">Added <span class="number">200</span> steps</div><div class="line">About to set totalSteps to <span class="number">300</span></div><div class="line">Added <span class="number">100</span> steps</div></pre></td></tr></table></figure>
<h4 id="全局和局部变量"><a href="#全局和局部变量" class="headerlink" title="全局和局部变量"></a>全局和局部变量</h4><p>观察属性的能力同样对全局变量和局部变量有效。全局变量是定义在任何函数、方法、闭包或者类型环境之外的变量。局部变量是定义在函数、方法或者闭包环境之中的变量。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> <span class="built_in">count</span>: <span class="type">Int</span> = <span class="number">0</span> &#123;</div><div class="line">    <span class="keyword">willSet</span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"About to set count to <span class="subst">\(newValue)</span>"</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">didSet</span> &#123;</div><div class="line">        <span class="keyword">if</span> <span class="built_in">count</span> &gt; oldValue &#123;</div><div class="line">            <span class="built_in">print</span>(<span class="string">"Added <span class="subst">\(<span class="built_in">count</span> - oldValue)</span>"</span>)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">count</span> = <span class="number">10</span></div><div class="line"><span class="built_in">print</span>(<span class="built_in">count</span>)</div></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">About to set count to <span class="number">10</span></div><div class="line">Added <span class="number">10</span></div><div class="line"><span class="number">10</span></div></pre></td></tr></table></figure>
<h3 id="类型属性（static）"><a href="#类型属性（static）" class="headerlink" title="类型属性（static）"></a>类型属性（static）</h3><p>使用 <code>static</code> 关键字定义类型属性。<strong>类类型</strong>的计算属性，可以使用 <code>class</code> 关键字来允许子类重写父类的实现。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">var</span> storedTypeProperty = <span class="string">"Some value."</span></div><div class="line">    <span class="keyword">static</span> <span class="keyword">var</span> computedTypeProperty: <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">27</span></div><div class="line">    &#125;</div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">var</span> <span class="title">overrideableComputedTypeProperty</span>: <span class="title">Int</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">107</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><h3 id="实例方法"><a href="#实例方法" class="headerlink" title="实例方法"></a>实例方法</h3><p>实例方法是属于特定类实例、结构体实例或者枚举实例的函数。实例方法为实例提供功能性，可以提供访问和修改属性的方法，也可以提供与实例目的相关的功能。</p>
<p>定义一个<strong>类</strong>，在实例方法中修改<strong>类的属性</strong>：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> <span class="built_in">count</span> = <span class="number">0</span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">increment</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">count</span> += <span class="number">1</span></div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">increment</span><span class="params">(by amount: Int)</span></span> &#123;</div><div class="line">        <span class="built_in">count</span> += amount</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">reset</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">count</span> = <span class="number">0</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="隐含属性-self"><a href="#隐含属性-self" class="headerlink" title="隐含属性-self"></a>隐含属性-self</h4><p>每一个类的实例都隐含一个 <code>self</code> 属性，它代表实力本身，可以使用它来调用实例方法。</p>
<p>如果没有显示的写出 <code>self</code>，则在方法中调用属性或方法时，Swift 会假定调用的是当前实例中的属性或方法。</p>
<p>📢注意：当实例方法的形式参数名与某个实例属性名相同时，形式参数名具有优先权，可以使用 <code>self</code> 调用属性来区分形式参数名和属性名。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> x = <span class="number">0.0</span>, y = <span class="number">0.0</span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">isToTheRightOf</span><span class="params">(x: Double)</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">self</span>.x &gt; x</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> somePoint = <span class="type">Point</span>(x: <span class="number">2.0</span>, y: <span class="number">2.0</span>)</div><div class="line"><span class="keyword">if</span> somePoint.isToTheRightOf(x: <span class="number">1.0</span>) &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"This point is to the right of the line where x == 1.0"</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Prints "This point is to the right of the line where x == 1.0"</span></div></pre></td></tr></table></figure>
<h4 id="在实例方法中修改属性-mutating（异变方法）"><a href="#在实例方法中修改属性-mutating（异变方法）" class="headerlink" title="在实例方法中修改属性-mutating（异变方法）"></a>在实例方法中修改属性-mutating（异变方法）</h4><p>结构体和枚举是值类型，默认情况下，<strong>值类型属性不能被自身的实例方法修改</strong>。可以在 <code>func</code> 关键字前放一个 <code>mutating</code> 关键字来指定方法可以修改属性。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> x = <span class="number">0.0</span>, y = <span class="number">0.0</span></div><div class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">moveBy</span><span class="params">(x deltaX: Double, y deltaY: Double)</span></span> &#123;</div><div class="line">        x += deltaX</div><div class="line">        y += deltaY</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> somePoint = <span class="type">Point</span>(x: <span class="number">1.0</span>, y: <span class="number">1.0</span>)</div><div class="line">somePoint.moveBy(x: <span class="number">2.0</span>, y: <span class="number">3.0</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"The point is now at (<span class="subst">\(somePoint.x)</span>, <span class="subst">\(somePoint.y)</span>)"</span>)</div><div class="line"><span class="comment">// Prints "The point is now at (3.0, 4.0)"</span></div></pre></td></tr></table></figure>
<h4 id="在-mutating-方法中赋值给-self"><a href="#在-mutating-方法中赋值给-self" class="headerlink" title="在 mutating 方法中赋值给 self"></a>在 mutating 方法中赋值给 self</h4><p>结构体的异变方法可以指定整个实例给隐含的 <code>self</code> 属性。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> x = <span class="number">0.0</span>, y = <span class="number">0.0</span></div><div class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">moveBy</span><span class="params">(x deltaX: Double, y deltaY: Double)</span></span> &#123;</div><div class="line">        <span class="keyword">self</span> = <span class="type">Point</span>(x: x + deltaX, y: y + deltaY)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> somePoint = <span class="type">Point</span>(x: <span class="number">1.0</span>, y: <span class="number">1.0</span>)</div><div class="line">somePoint.moveBy(x: <span class="number">2.0</span>, y: <span class="number">3.0</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"The point is now at (<span class="subst">\(somePoint.x)</span>, <span class="subst">\(somePoint.y)</span>)"</span>)</div><div class="line"><span class="comment">// Prints "The point is now at (3.0, 4.0)"</span></div></pre></td></tr></table></figure>
<h4 id="枚举的-mutating-方法"><a href="#枚举的-mutating-方法" class="headerlink" title="枚举的 mutating 方法"></a>枚举的 mutating 方法</h4><p>枚举的异变方法可以设置隐含的 <code>self</code> 属性为相同枚举里的不同成员。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">TriStateSwitch</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> off, low, high</div><div class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">next</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">switch</span> <span class="keyword">self</span> &#123;</div><div class="line">        <span class="keyword">case</span> .off:</div><div class="line">            <span class="keyword">self</span> = .low</div><div class="line">        <span class="keyword">case</span> .low:</div><div class="line">            <span class="keyword">self</span> = .high</div><div class="line">        <span class="keyword">case</span> .high:</div><div class="line">            <span class="keyword">self</span> = .off</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> ovenLight = <span class="type">TriStateSwitch</span>.off</div><div class="line">ovenLight.next()</div><div class="line"><span class="built_in">print</span>(ovenLight)</div><div class="line"><span class="comment">// Prints "low"</span></div></pre></td></tr></table></figure>
<h3 id="类型方法（static）"><a href="#类型方法（static）" class="headerlink" title="类型方法（static）"></a>类型方法（static）</h3><p>通过在 <code>func</code> 关键字前面使用 <code>static</code> 关键字来明确一个类型方法。类同样可以使用 <code>class</code> 关键字来允许子类重写父类对类型方法的实现。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span> </span>&#123;</div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">someTypeMethod</span>() </span>&#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"someTypeMethod"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="type">SomeClass</span>.someTypeMethod()</div><div class="line"><span class="comment">// Prints "someTypeMethod"</span></div></pre></td></tr></table></figure>
<h2 id="下标"><a href="#下标" class="headerlink" title="下标"></a>下标</h2><p>类、结构体和枚举可以定义下标，它可以作为访问集合、列表或序列成员元素的快捷方式。</p>
<p>下标的作用：</p>
<ol>
<li><p>可以通过索引值来设置或检索值，而不用分别为设置或检索提供实例方法。</p>
</li>
<li><p>可以为一个类型定义多个下标，下标会根据传入的索引值的类型，选择合适的下标重载使用。</p>
</li>
<li><p>可以使用多个输入形参来定义下标，以满足自定义类型的需求。</p>
</li>
</ol>
<h3 id="下标语法（subscript）"><a href="#下标语法（subscript）" class="headerlink" title="下标语法（subscript）"></a>下标语法（subscript）</h3><p>使用关键字 <code>subscript</code> 定义下标。与实例方法相同，可以指定一个或多个输入形式参数和返回类型。与实例方法不同的是，下标可以是读写的，也可以是只读的。</p>
<p>下标脚本（<code>subscript</code>）允许通过在实例名后面的<strong>方括号内写一个或多个值</strong>，对该类的实例进行查询。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">TimesTable</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> multiplier: <span class="type">Int</span></div><div class="line">    <span class="keyword">subscript</span>(index: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">return</span> multiplier * index</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> threeTimesTable = <span class="type">TimesTable</span>(multiplier: <span class="number">3</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"six times three is <span class="subst">\(threeTimesTable[<span class="number">6</span>])</span>"</span>)</div><div class="line"><span class="comment">// Prints "six times three is 18"</span></div></pre></td></tr></table></figure>
<h3 id="下标参数"><a href="#下标参数" class="headerlink" title="下标参数"></a>下标参数</h3><ol>
<li>下标可以接收任意数量的输入形式参数，并且这些输入形式参数可以是任意类型；</li>
<li>下标可以返回任何类型；</li>
<li>下标可以使用变量形式参数（<code>var</code>）和可变实行参数（<code>...</code>），但是不能使用输入输出形式参数（<code>inout</code>），也不能提供默认形式参数。</li>
</ol>
<h3 id="实例下标"><a href="#实例下标" class="headerlink" title="实例下标"></a>实例下标</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 矩阵</span></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Matrix</span> </span>&#123;</div><div class="line">    <span class="comment">// 行，列</span></div><div class="line">    <span class="keyword">let</span> rows: <span class="type">Int</span>, columns: <span class="type">Int</span></div><div class="line">    <span class="comment">// 坐标</span></div><div class="line">    <span class="keyword">var</span> grid: [<span class="type">Double</span>]</div><div class="line">    <span class="keyword">init</span>(rows: <span class="type">Int</span>, columns: <span class="type">Int</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.rows = rows</div><div class="line">        <span class="keyword">self</span>.columns = columns</div><div class="line">        grid = <span class="type">Array</span>(repeating: <span class="number">0.0</span>, <span class="built_in">count</span>: rows * columns)</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">indexIsValid</span><span class="params">(row: Int, column: Int)</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">        <span class="keyword">return</span> row &gt;= <span class="number">0</span> &amp;&amp; row &lt;= rows &amp;&amp; columns &gt;= <span class="number">0</span> &amp;&amp; columns &lt;= columns</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">subscript</span>(row: <span class="type">Int</span>, column: <span class="type">Int</span>) -&gt; <span class="type">Double</span> &#123;</div><div class="line">        <span class="keyword">get</span> &#123;</div><div class="line">            <span class="built_in">assert</span>(indexIsValid(row: row, column: column), <span class="string">"Index out of range"</span>)</div><div class="line">            <span class="keyword">return</span> grid[(row * columns) + column]</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">set</span> &#123;</div><div class="line">            <span class="built_in">assert</span>(indexIsValid(row: row, column: column), <span class="string">"Index out of range"</span>)</div><div class="line">            grid[(row * columns) + column] = newValue</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> matrix = <span class="type">Matrix</span>(rows: <span class="number">2</span>, columns: <span class="number">2</span>)</div><div class="line">matrix[<span class="number">0</span>, <span class="number">1</span>] = <span class="number">1.5</span></div><div class="line">matrix[<span class="number">1</span>, <span class="number">0</span>] = <span class="number">3.2</span></div><div class="line"><span class="built_in">print</span>(matrix.grid)</div><div class="line"><span class="comment">// Prints "[0.0, 1.5, 3.2, 0.0]"</span></div></pre></td></tr></table></figure>
<p><img src="/2023/05/04/Swift/面向对象编程/../Swift/面向对象编程/02.png" alt="02.png"></p>
<h3 id="类型下标（static）"><a href="#类型下标（static）" class="headerlink" title="类型下标（static）"></a>类型下标（static）</h3><p>除了定义实例下标外，也可以定义类型本身的下标。在 <code>subscript</code> 关键字前加 <code>static</code> 关键字来标记类型下标。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Planet</span>: <span class="title">Int</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> mercury = <span class="number">1</span>, venus, earth, mars, jupiter, saturn, uranus, neptune</div><div class="line">    <span class="keyword">static</span> <span class="keyword">subscript</span>(n: <span class="type">Int</span>) -&gt; <span class="type">Planet</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="type">Planet</span>(rawValue: n)!</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> mars = <span class="type">Planet</span>[<span class="number">3</span>]</div><div class="line"><span class="built_in">print</span>(mars)</div><div class="line"><span class="comment">// Prints "earth"</span></div></pre></td></tr></table></figure>
<p>同样的，使用 <code>class</code> 关键字，可以允许子类重写父类的下标实现。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Planet</span>: <span class="title">Int</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> mercury = <span class="number">1</span>, venus, earth, mars, jupiter, saturn, uranus, neptune</div><div class="line">    <span class="keyword">static</span> <span class="keyword">subscript</span>(n: <span class="type">Int</span>) -&gt; <span class="type">Planet</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="type">Planet</span>(rawValue: n)!</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">PlanetClass</span> </span>&#123;</div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">subscript</span>(<span class="title">n</span>: <span class="title">Int</span>) -&gt; <span class="title">Planet</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="type">Planet</span>[n]</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubPlanetClass</span> </span>&#123;</div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">subscript</span>(<span class="title">n</span>: <span class="title">Int</span>) -&gt; <span class="title">Planet</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="type">Planet</span>[n + <span class="number">1</span>]</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">print</span>(<span class="type">PlanetClass</span>[<span class="number">3</span>])</div><div class="line"><span class="comment">// Prints "earth"</span></div><div class="line"><span class="built_in">print</span>(<span class="type">SubPlanetClass</span>[<span class="number">3</span>])</div><div class="line"><span class="comment">// Prints "mars"</span></div></pre></td></tr></table></figure>
<h2 id="初始化和反初始化"><a href="#初始化和反初始化" class="headerlink" title="初始化和反初始化"></a>初始化和反初始化</h2><h3 id="初始化器"><a href="#初始化器" class="headerlink" title="初始化器"></a>初始化器</h3><p>初始化器在创建特定类型的实例时被调用。</p>
<p>如下所示：在初始化器里给存储属性设置初始值：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 温度计</span></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Fahrenheit</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> temperature: <span class="type">Double</span></div><div class="line">    <span class="keyword">init</span>() &#123;</div><div class="line">        temperature = <span class="number">32.0</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> f = <span class="type">Fahrenheit</span>()</div><div class="line"><span class="built_in">print</span>(<span class="string">"The default temperature is <span class="subst">\(f.temperature)</span> Fahrenheit"</span>)</div><div class="line"><span class="comment">// Prints "The default temperature is 32.0 Fahrenheit"</span></div></pre></td></tr></table></figure>
<h3 id="默认的属性值"><a href="#默认的属性值" class="headerlink" title="默认的属性值"></a>默认的属性值</h3><p>存储属性的初始值，可以在初始化器设置，也可以<strong>在属性定义的时候设置</strong>。</p>
<p>如下所示，在存储属性定义的时候设置初始值：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Fahrenheit</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> temperature = <span class="number">32.0</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> f = <span class="type">Fahrenheit</span>()</div><div class="line"><span class="built_in">print</span>(<span class="string">"The default temperature is <span class="subst">\(f.temperature)</span> Fahrenheit"</span>)</div><div class="line"><span class="comment">// Prints "The default temperature is 32.0 Fahrenheit"</span></div></pre></td></tr></table></figure>
<h3 id="默认的初始化器"><a href="#默认的初始化器" class="headerlink" title="默认的初始化器"></a>默认的初始化器</h3><p>当结构体或类没有提供初始化器时，Swfit 会提供一个默认的初始化器。</p>
<p>没有提供初始化器的<strong>类</strong>，必须设置默认属性值：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ShoppingListItem</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span>?</div><div class="line">    <span class="keyword">var</span> quantity = <span class="number">1</span></div><div class="line">    <span class="keyword">var</span> purchased = <span class="literal">false</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> item = <span class="type">ShoppingListItem</span>()</div></pre></td></tr></table></figure>
<p>提供了初始化器的结构体或类，可以不设置默认属性值：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ShoppingListItem</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span>?</div><div class="line">    <span class="keyword">var</span> quantity: <span class="type">Int</span></div><div class="line">    <span class="keyword">var</span> purchased: <span class="type">Bool</span></div><div class="line">    <span class="keyword">init</span>() &#123;</div><div class="line">        quantity = <span class="number">1</span></div><div class="line">        purchased = <span class="literal">false</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> item = <span class="type">ShoppingListItem</span>()</div></pre></td></tr></table></figure>
<h3 id="自定义初始化"><a href="#自定义初始化" class="headerlink" title="自定义初始化"></a>自定义初始化</h3><p>可以通过为初始化器添加形式参数的方式，实现自定义类型和值的名称。初始化形式参数与函数的形式参数具有相同的功能和语法。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 摄氏度</span></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Celsius</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> temperatureInCelsius: <span class="type">Double</span></div><div class="line">    <span class="comment">// 华氏温度计的(冰点为32度，沸点为212度)</span></div><div class="line">    <span class="keyword">init</span>(fromFahrenheit fahrenheit: <span class="type">Double</span>) &#123;</div><div class="line">        temperatureInCelsius = (fahrenheit - <span class="number">32.0</span>) / <span class="number">1.8</span></div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 开(开尔文温标的计量单位，1开氏度相当于1摄氏度)</span></div><div class="line">    <span class="keyword">init</span>(fromKelvin kelvin: <span class="type">Double</span>) &#123;</div><div class="line">        temperatureInCelsius = kelvin - <span class="number">273.15</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">// 水的沸点</span></div><div class="line"><span class="keyword">let</span> boilingPointOfWater = <span class="type">Celsius</span>(fromFahrenheit: <span class="number">212.0</span>)</div><div class="line"><span class="comment">// 水的冰点</span></div><div class="line"><span class="keyword">let</span> freezingPointOfWater = <span class="type">Celsius</span>(fromKelvin: <span class="number">273.15</span>)</div><div class="line"></div><div class="line"><span class="built_in">print</span>(boilingPointOfWater.temperatureInCelsius)</div><div class="line"><span class="comment">// Prints "100.0"</span></div><div class="line"><span class="built_in">print</span>(freezingPointOfWater.temperatureInCelsius)</div><div class="line"><span class="comment">// Prints "0.0"</span></div></pre></td></tr></table></figure>
<h3 id="在初始化中分配常量属性"><a href="#在初始化中分配常量属性" class="headerlink" title="在初始化中分配常量属性"></a>在初始化中分配常量属性</h3><p>常量属性：赋值后不能修改。</p>
<p>在初始化结束前，要保证常量属性被设置了确定的值，可以在初始化的任意时刻设置。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SurveyQuestion</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> text: <span class="type">String</span></div><div class="line">    <span class="keyword">var</span> response: <span class="type">String</span>?</div><div class="line">    <span class="keyword">init</span>(text: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.text = text</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">ask</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(text)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> beetsQuestion = <span class="type">SurveyQuestion</span>(text: <span class="string">"How about beets?"</span>)</div><div class="line">beetsQuestion.ask()</div><div class="line"><span class="comment">// Prints "How about beets?"</span></div><div class="line">beetsQuestion.response = <span class="string">"I like beets."</span></div></pre></td></tr></table></figure>
<h3 id="结构体的成员初始化器"><a href="#结构体的成员初始化器" class="headerlink" title="结构体的成员初始化器"></a>结构体的成员初始化器</h3><p>如果结构体类型中没有定义自定义初始化器，系统会提供一个默认的成员初始化器。没有提供初始化器的<strong>类</strong>，必须设置默认属性值。但是<strong>结构体的</strong>成员初始化器允许存储属性没有默认值。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Size</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> width: <span class="type">Float</span>, height = <span class="number">0.0</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> twoByTwo = <span class="type">Size</span>(width: <span class="number">1.0</span>, height: <span class="number">1.0</span>)</div><div class="line"><span class="built_in">print</span>(twoByTwo)</div><div class="line"><span class="comment">// Prints "Size(width: 1.0, height: 1.0)"</span></div></pre></td></tr></table></figure>
<h3 id="值类型的初始化器委托"><a href="#值类型的初始化器委托" class="headerlink" title="值类型的初始化器委托"></a>值类型的初始化器委托</h3><p>初始化器委托：初始化器可以调用其他初始化器来执行部分实例的初始化。避免了多个初始化器里冗余代码。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Size</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> width = <span class="number">0.0</span>, height = <span class="number">0.0</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> x = <span class="number">0.0</span>, y = <span class="number">0.0</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Rect</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> origin = <span class="type">Point</span>()</div><div class="line">    <span class="keyword">var</span> size = <span class="type">Size</span>()</div><div class="line">    <span class="keyword">init</span>() &#123;</div><div class="line">        <span class="keyword">self</span>.<span class="keyword">init</span>(origin: <span class="type">Point</span>(x: <span class="number">0.0</span>, y: <span class="number">0.0</span>), size: <span class="type">Size</span>(width: <span class="number">2.0</span>, height: <span class="number">2.0</span>))</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 值类型的简单初始化器</span></div><div class="line">    <span class="keyword">init</span>(origin: <span class="type">Point</span>, size: <span class="type">Size</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.origin = origin</div><div class="line">        <span class="keyword">self</span>.size = size</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">init</span>(center: <span class="type">Point</span>, size: <span class="type">Size</span>) &#123;</div><div class="line">        <span class="keyword">let</span> originX = center.x - (size.width / <span class="number">2</span>)</div><div class="line">        <span class="keyword">let</span> originY = center.y - (size.height / <span class="number">2</span>)</div><div class="line">        <span class="keyword">self</span>.<span class="keyword">init</span>(origin: <span class="type">Point</span>(x: originX, y: originY), size: size)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> rect1 = <span class="type">Rect</span>()</div><div class="line"><span class="keyword">let</span> rect2 = <span class="type">Rect</span>(center: <span class="type">Point</span>(x: <span class="number">1.0</span>, y: <span class="number">1.0</span>), size: <span class="type">Size</span>(width: <span class="number">2.0</span>, height: <span class="number">2.0</span>))</div><div class="line"><span class="keyword">let</span> rect3 = <span class="type">Rect</span>(origin: <span class="type">Point</span>(x: <span class="number">0.0</span>, y: <span class="number">0.0</span>), size: <span class="type">Size</span>(width: <span class="number">2.0</span>, height: <span class="number">2.0</span>))</div><div class="line"><span class="built_in">print</span>(<span class="string">"rect1: <span class="subst">\(rect1.origin)</span>, <span class="subst">\(rect1.size)</span>"</span>)</div><div class="line"><span class="comment">// Prints "rect1: Point(x: 0.0, y: 0.0), Size(width: 2.0, height: 2.0)"</span></div><div class="line"><span class="built_in">print</span>(<span class="string">"rect2: <span class="subst">\(rect1.origin)</span>, <span class="subst">\(rect1.size)</span>"</span>)</div><div class="line"><span class="comment">// Prints "rect2: Point(x: 0.0, y: 0.0), Size(width: 2.0, height: 2.0)"</span></div><div class="line"><span class="built_in">print</span>(<span class="string">"rect3: <span class="subst">\(rect1.origin)</span>, <span class="subst">\(rect1.size)</span>"</span>)</div><div class="line"><span class="comment">// Prints "rect3: Point(x: 0.0, y: 0.0), Size(width: 2.0, height: 2.0)"</span></div></pre></td></tr></table></figure>
<h3 id="类的继承和初始化"><a href="#类的继承和初始化" class="headerlink" title="类的继承和初始化"></a>类的继承和初始化</h3><h3 id="指定初始化器和便捷初始化器（convenience）"><a href="#指定初始化器和便捷初始化器（convenience）" class="headerlink" title="指定初始化器和便捷初始化器（convenience）"></a>指定初始化器和便捷初始化器（convenience）</h3><p>用与<strong>值类型的简单初始化器</strong>相同的方式类写类的<strong>指定初始化器</strong>：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">init</span>(origin: <span class="type">Point</span>, size: <span class="type">Size</span>) &#123;</div><div class="line">    <span class="keyword">self</span>.origin = origin</div><div class="line">    <span class="keyword">self</span>.size = size</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>将 <code>convenience</code> 修饰符放到 <code>init</code> 关键字前定义<strong>便捷初始化器</strong>：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">convenience</span> <span class="keyword">init</span>() &#123;</div><div class="line">    <span class="keyword">self</span>.<span class="keyword">init</span>(origin: <span class="type">Point</span>(x: <span class="number">0.0</span>, y: <span class="number">0.0</span>), size: <span class="type">Size</span>(width: <span class="number">2.0</span>, height: <span class="number">2.0</span>))</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="/2023/05/04/Swift/面向对象编程/../Swift/面向对象编程/03.png" alt="03.png"></p>
<h3 id="类的初始化委托"><a href="#类的初始化委托" class="headerlink" title="类的初始化委托"></a>类的初始化委托</h3><ol>
<li>指定初始化<strong>必须</strong>从它的直系父类调用指定初始化器（子类必须要调用父类）。</li>
<li>便捷初始化器<strong>必须</strong>从相同的类里调用另一个初始化器（便捷初始化器或指定初始化器）。</li>
<li>便捷初始化器<strong>最终</strong>必须调用一个指定初始化器。</li>
</ol>
<p><img src="/2023/05/04/Swift/面向对象编程/../Swift/面向对象编程/04.png" alt="04.png"></p>
<h3 id="两段式初始化"><a href="#两段式初始化" class="headerlink" title="两段式初始化"></a>两段式初始化</h3><p>Swift 的类初始化是一个两段式过程：</p>
<ul>
<li>第一阶段：<strong>每一个</strong>存储属性被引入类并分配一个初始值。</li>
<li>第二阶段：每个类都可以在新的实例准备使用之前定制它的存储属性。</li>
</ul>
<h4 id="两段式初始化-阶段一"><a href="#两段式初始化-阶段一" class="headerlink" title="两段式初始化-阶段一"></a>两段式初始化-阶段一</h4><ol>
<li>指定初始化器或便捷初始化器在类中被<strong>调用</strong>；</li>
<li>为这个类的新实例<strong>分配内存</strong>，内存还没有被初始化；</li>
<li>这个类的指定初始化器确保所有由该类引入的存储属性都有一个值。现在这些<strong>存储属性的内存被初始化了</strong>；</li>
<li>指定初始化器上交<strong>父类的初始化器</strong>为其存储属性执行相同任务；</li>
<li>这个调用父类初始化器的过程将沿着<strong>初始化链</strong>一直向上进行，直到到达初始化器链的最顶部；</li>
<li>一旦达到初始化器的最顶部，在链顶部的类确保所有的存储属性都有一个值，此实例的内存被认为<strong>完全初始化</strong>了，此时第一阶段完成。</li>
</ol>
<p><img src="/2023/05/04/Swift/面向对象编程/../Swift/面向对象编程/09.png" alt="09.png"></p>
<h4 id="两段式初始化-阶段二"><a href="#两段式初始化-阶段二" class="headerlink" title="两段式初始化-阶段二"></a>两段式初始化-阶段二</h4><p>从顶部初始化器往下，初始化链中的每一个<strong>指定初始化器</strong>都有机会进一步定制实例。在第二阶段，初始化器能够访问 <code>self</code>，并且可以修改它的属性、调用它的实例方法等等。</p>
<p>最终，初始化链中任何<strong>便捷初始化器</strong>都有机会定制实例以及使用 <code>self</code>。</p>
<p><img src="/2023/05/04/Swift/面向对象编程/../Swift/面向对象编程/10.png" alt="10.png"></p>
<h3 id="安全检查"><a href="#安全检查" class="headerlink" title="安全检查"></a>安全检查</h3><p>1、指定初始化器必须保证在向上委托给父类初始化器之前，<strong>其所在的类引入的所有属性</strong>都要初始化完成。（子类必须先初始化自己的所有属性，再调用父类的初始化器）</p>
<p><img src="/2023/05/04/Swift/面向对象编程/../Swift/面向对象编程/05.png" alt="05.png"></p>
<p>2、指定初始化器必须先向上委托父类初始化器，然后才能为<strong>继承的属性</strong>设置新值，否则指定初始化器赋予的新值会被父类中的初始化器所覆盖。（<strong>子类必须先调用父类的初始化器，再初始化父类的属性</strong>）</p>
<p><img src="/2023/05/04/Swift/面向对象编程/../Swift/面向对象编程/06.png" alt="06.png"></p>
<p>3、便捷初始化器必须先委托同类中的其它初始化器，然后再为<strong>任意属性</strong>赋值，否则便捷初始化器赋予的新值会被自己类中其它指定初始化器所覆盖。</p>
<p><img src="/2023/05/04/Swift/面向对象编程/../Swift/面向对象编程/07.png" alt="07.png"></p>
<p>4、初始化器在第一阶段初始化完成之前，不能调用任何实例方法、不能读取任何实例属性的值，也不能引用 <code>self</code> 作为值。</p>
<p><img src="/2023/05/04/Swift/面向对象编程/../Swift/面向对象编程/08.png" alt="08.png"></p>
<p>正确的执行顺序：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>, age: <span class="type">Int</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.name = name;</div><div class="line">        <span class="keyword">self</span>.age = age</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">convenience</span> <span class="keyword">init</span>() &#123;</div><div class="line">        <span class="keyword">self</span>.<span class="keyword">init</span>(name: <span class="string">"[unnamed]"</span>, age: <span class="number">0</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span>: <span class="title">Person</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> salary: <span class="type">Int</span></div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>, age: <span class="type">Int</span>, salary: <span class="type">Int</span>) &#123;</div><div class="line">        <span class="comment">// 1、初始化自定义属性</span></div><div class="line">        <span class="keyword">self</span>.salary = salary</div><div class="line">        <span class="comment">// 2、委托父类初始化器</span></div><div class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(name: name, age: age)</div><div class="line">        <span class="comment">// 3、修改父类属性</span></div><div class="line">        <span class="keyword">self</span>.name = name + <span class="string">"老师"</span></div><div class="line">        <span class="comment">// 4、调用实例方法</span></div><div class="line">        <span class="keyword">self</span>.showInfo()</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">convenience</span> <span class="keyword">init</span>(name: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.<span class="keyword">init</span>(name: name, age: <span class="number">30</span>, salary: <span class="number">5000</span>)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">showInfo</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"teacher name <span class="subst">\(name)</span>, age <span class="subst">\(age)</span>, salary <span class="subst">\(salary)</span>"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> teacher = <span class="type">Teacher</span>(name: <span class="string">"kevin"</span>)</div><div class="line"><span class="comment">// Prints "teacher name kevin老师, age 30, salary 5000"</span></div></pre></td></tr></table></figure>
<h3 id="初始化器的继承和重写（override）"><a href="#初始化器的继承和重写（override）" class="headerlink" title="初始化器的继承和重写（override）"></a>初始化器的继承和重写（override）</h3><p>与 Object-C 中的子类不同，Swfit 的子类不会默认继承父类的初始化器。Swift 的这种机制防止父类的简单初始化器被一个更专用的子类继承，并被用来创建一个没有完全初始化或错误初始化的新实例的情况。<strong>只有在特定情况下才会继承父类的初始化器</strong>。</p>
<p>如果想自定义子类来实现一个或多个父类相同的初始化器，可以在子类中为初始化器提供定制的实现。如果提供的子类初始化器完全匹配父类指定初始化器，则可以重写父类的初始化器。<strong>通过在子类初始化器定义的前面写 <code>override</code> 修饰符，实现对该方法的重写。</strong>同默认初始化器一样，即使是自动提供的默认初始化器也可以重写。</p>
<h3 id="初始化器的自动继承"><a href="#初始化器的自动继承" class="headerlink" title="初始化器的自动继承"></a>初始化器的自动继承</h3><p>规则1：如果子类没有定义任何指定初始化器，它会自动继承父类所有的<strong>指定初始化器</strong>。</p>
<p>规则2：如果子类提供了所有父类指定初始化器的实现——要么是通过规则1继承来的，要么通过在定义中提供自定义实现的——那么它自动继承父类所有的<strong>便捷初始化器</strong>。</p>
<h3 id="可失败初始化器（init-init-）"><a href="#可失败初始化器（init-init-）" class="headerlink" title="可失败初始化器（init?/init!）"></a>可失败初始化器（init?/init!）</h3><p>类、结构体或枚举的可失败初始化器引用场景：</p>
<ol>
<li>初始化传入无效的形式参数值；</li>
<li>缺少某种外部所需的资源；</li>
<li>其他阻止初始化的情况。</li>
</ol>
<p>定义方式：</p>
<ol>
<li><p>通过在 <code>init</code> 关键字后面添加问号（<code>init?</code>）的方式来定义一个可失败初始化器以创建一个合适类型的可选项实例。</p>
</li>
<li><p>通过在 <code>init</code> 关键字后面添加惊叹号（<code>init!</code>）的方式来定义一个可失败初始化器以创建一个<strong>隐式展开</strong>具有合适类型的可选项实例。</p>
</li>
</ol>
<h3 id="必要初始化器（required）"><a href="#必要初始化器（required）" class="headerlink" title="必要初始化器（required）"></a>必要初始化器（required）</h3><p>在类的初始化器前添加 <code>required</code> 修饰符来表明所有该类的子类都必须实现该初始化器。</p>
<h3 id="反初始化（deinit）"><a href="#反初始化（deinit）" class="headerlink" title="反初始化（deinit）"></a>反初始化（deinit）</h3><p>在类的<strong>实例被释放</strong>的时候，反初始化器就会立即被调用。使用 <code>deinit</code> 关键字来写反初始化器，同写初始化器要用 <code>init</code> 关键字一样。反初始化器只在类类型中有效。</p>
<p>反初始化器的调用时机：</p>
<ol>
<li>反初始化器会在实例被释放之前自动被调用。</li>
<li>不能自行调用反初始化器。</li>
<li>父类的反初始化器可以被子类继承，并且子类的反初始化器实现结束之后父类的反初始化器会被调用。</li>
<li>父类的反初始化器总会被调用，就算子类没有反初始化器。</li>
</ol>
<p>每个类当中只能有一个反初始化器。反初始化器不接收任何形式参数，并且不需要写圆括号。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">deinit</span> &#123;</div><div class="line">    <span class="comment">// perform the deinitialization</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><h3 id="定义基类"><a href="#定义基类" class="headerlink" title="定义基类"></a>定义基类</h3><p>Swift 类不会从一个通用基类继承，<strong>任何不从另一个类继承的类都是所谓的基类</strong>。如果没有指定特定父类的类都会以基类的形式创建。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/// 定义一个交通工具类</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Vehicle</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> currentSpeed = <span class="number">0.0</span></div><div class="line">    <span class="keyword">var</span> description: <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"traveling at <span class="subst">\(currentSpeed)</span> miles per hour"</span></div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">makeNoise</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="comment">// to do</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="子类"><a href="#子类" class="headerlink" title="子类"></a>子类</h3><p><strong>子类是基于现有类创建新类的行为</strong>。子类从现有的类继承了一些特征，可以重新定义继承来的特征，也可以为子类添加新的特征。为了表明子类有父类，要把子类写在父类的前面，用冒号分隔（<code>subClass : superClass</code>）。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/// 定义一个自行车类，继承自交通工具类</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bicycle</span> : <span class="title">Vehicle</span> </span>&#123;</div><div class="line">    <span class="comment">// 自定义新的属性，是否有车筐</span></div><div class="line">    <span class="keyword">var</span> hasBasket = <span class="literal">false</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> bicycle = <span class="type">Bicycle</span>()</div><div class="line">bicycle.hasBasket = <span class="literal">true</span></div><div class="line">bicycle.currentSpeed = <span class="number">15.0</span></div><div class="line"><span class="built_in">print</span>(<span class="string">"Bicycle: <span class="subst">\(bicycle.description)</span>"</span>)</div><div class="line"><span class="comment">// Prints "Bicycle: traveling at 15.0 miles per hour"</span></div></pre></td></tr></table></figure>
<h3 id="重写（override）"><a href="#重写（override）" class="headerlink" title="重写（override）"></a>重写（override）</h3><p>重写：子类可以提供自己的实例方法、类型方法、实例属性、类型属性或下标脚本的自定义实现，否则子类将会从父类继承。</p>
<p>如果想要重写而不是继承一个特征，需要在重写定义前面加上 <code>override</code> 关键字，表明提供一个重写，而不是额外提供一个相同的定义。额外提供一个相同的定义可能导致意想不到的行为，并且任何没有使用 <code>override</code> 关键字的重写都会在编译时报错。</p>
<h3 id="访问父类的方法、属性和下标脚本"><a href="#访问父类的方法、属性和下标脚本" class="headerlink" title="访问父类的方法、属性和下标脚本"></a>访问父类的方法、属性和下标脚本</h3><p>可以通过使用 <code>super</code> 前缀访问父类的方法、属性或下标脚本。</p>
<ol>
<li>一个命名为 <code>somoeMethod()</code> 的重写方法可以通过 <code>super.someMethod()</code> 在重写方法的实现中调用父类版本的 <code>someMethod()</code> 方法。</li>
<li>一个命名为 <code>someProperty</code> 的重写属性可以通过 <code>super.someProperty</code> 在重写的 getter 或 setter 实现中访问父类版本的 <code>someProperty</code> 属性。</li>
<li>一个命名为 <code>someIndex</code> 的重写下标脚本可以通过 <code>super[someIndex]</code> 在重写的下标脚本实现中访问父类版本中相同的下标脚本。</li>
</ol>
<h3 id="重写方法"><a href="#重写方法" class="headerlink" title="重写方法"></a>重写方法</h3><p>在子类中重写一个继承的实例方法或类型方法来提供定制的或替代的方法实现。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Vehicle</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> currentSpeed = <span class="number">0.0</span></div><div class="line">    <span class="keyword">var</span> description: <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"traveling at <span class="subst">\(currentSpeed)</span> miles per hour"</span></div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">makeNoise</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="comment">// to do</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/// 定义一个火车类，继承自交通工具类</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Train</span>: <span class="title">Vehicle</span> </span>&#123;</div><div class="line">    <span class="comment">// 重写发声方法</span></div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">makeNoise</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"火车鸣笛~"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> train = <span class="type">Train</span>()</div><div class="line">train.makeNoise()</div><div class="line"><span class="comment">// Prints "火车鸣笛~"</span></div></pre></td></tr></table></figure>
<h3 id="重写属性的-getter-和-setter"><a href="#重写属性的-getter-和-setter" class="headerlink" title="重写属性的 getter 和 setter"></a>重写属性的 getter 和 setter</h3><p>可以提供一个自定义的 <code>getter</code> 或 <code>setter</code> 方法来重写任意继承的属性（存储属性或计算属性）。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span>: <span class="title">Vehicle</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> gear = <span class="number">1</span></div><div class="line">    <span class="keyword">override</span> <span class="keyword">var</span> description: <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.description + <span class="string">" in gear <span class="subst">\(gear)</span>"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> car = <span class="type">Car</span>()</div><div class="line">car.currentSpeed = <span class="number">25.0</span></div><div class="line">car.gear = <span class="number">3</span></div><div class="line"><span class="built_in">print</span>(<span class="string">"Car: <span class="subst">\(car.description)</span>"</span>)</div><div class="line"><span class="comment">// Prints "Car: traveling at 25.0 miles per hour in gear 3"</span></div></pre></td></tr></table></figure>
<h3 id="重写属性的观察器"><a href="#重写属性的观察器" class="headerlink" title="重写属性的观察器"></a>重写属性的观察器</h3><p>可以使用属性重写来为继承的属性添加属性观察器（<code>willSet</code>、<code>didSet</code>）。</p>
<p>注意：</p>
<ol>
<li>因为常量存储属性（<code>let</code>）和只读的计算属性（<code>readonly</code>）不支持改变，所以不能提供 <code>willSet</code> 和 <code>didSet</code> 来监听值的改变（它们不会变）。</li>
<li>不能为同一个属性同时提供重写的 <code>setter</code> 和重写的属性观察器。自定义的 <code>setter</code> 就可以实现监听值的改变。</li>
</ol>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">AutomaticCar</span>: <span class="title">Car</span> </span>&#123;</div><div class="line">    <span class="keyword">override</span> <span class="keyword">var</span> currentSpeed: <span class="type">Double</span> &#123;</div><div class="line">        <span class="keyword">didSet</span> &#123;</div><div class="line">            gear = <span class="type">Int</span>(currentSpeed / <span class="number">10.0</span>) + <span class="number">1</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> automaticCar = <span class="type">AutomaticCar</span>()</div><div class="line">automaticCar.currentSpeed = <span class="number">35.0</span></div><div class="line"><span class="built_in">print</span>(<span class="string">"AutomaticCar: <span class="subst">\(automaticCar.description)</span>"</span>)</div><div class="line"><span class="comment">// Prints "AutomaticCar: traveling at 35.0 miles per hour in gear 4"</span></div></pre></td></tr></table></figure>
<h3 id="组织重写（final）"><a href="#组织重写（final）" class="headerlink" title="组织重写（final）"></a>组织重写（final）</h3><p>通过在方法、属性或者下标甲苯的关键字前写 <code>final</code> 修饰符，来阻止其被重写（如：<code>final var</code>，<code>final func</code>，<code>final class func</code>，<code>final subscript</code>）。</p>
<h2 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h2><p>多态是面向对象三大特性之一，指同一个方法在不同的对象上有不同的实现方式。</p>
<h3 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MediaItem</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.name = name</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Movie</span>: <span class="title">MediaItem</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> director: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>, director: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.director = director</div><div class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(name: name)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Song</span>: <span class="title">MediaItem</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> artist: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>, artist: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.artist = artist</div><div class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(name: name)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> library = [</div><div class="line">    <span class="type">Movie</span>(name: <span class="string">"Casablanca"</span>, director: <span class="string">"Michael Curtiz"</span>),</div><div class="line">    <span class="type">Song</span>(name: <span class="string">"Blue Suede Shoes"</span>, artist: <span class="string">"Elvis Presley"</span>),</div><div class="line">    <span class="type">Movie</span>(name: <span class="string">"Citizen Kane"</span>, director: <span class="string">"Orson Welles"</span>),</div><div class="line">    <span class="type">Song</span>(name: <span class="string">"The One And Only"</span>, artist: <span class="string">"Chesney Hawkes"</span>),</div><div class="line">    <span class="type">Song</span>(name: <span class="string">"Never Gonna Give You Up"</span>, artist: <span class="string">"Rick Astley"</span>)</div><div class="line">]</div><div class="line"></div><div class="line"><span class="built_in">print</span>(type(of: library))</div><div class="line"><span class="comment">// Prints "Array&lt;MediaItem&gt;"</span></div><div class="line"></div><div class="line"><span class="keyword">let</span> library1 = [</div><div class="line">    <span class="type">Movie</span>(name: <span class="string">"Casablanca"</span>, director: <span class="string">"Michael Curtiz"</span>)</div><div class="line">]</div><div class="line"><span class="built_in">print</span>(type(of: library1))</div><div class="line"><span class="comment">// Prints "Array&lt;Movie&gt;"</span></div><div class="line"></div><div class="line"><span class="keyword">let</span> library2 = [</div><div class="line">    <span class="type">Song</span>(name: <span class="string">"Blue Suede Shoes"</span>, artist: <span class="string">"Elvis Presley"</span>)</div><div class="line">]</div><div class="line"><span class="built_in">print</span>(type(of: library2))</div><div class="line"><span class="comment">// Prints "Array&lt;Song&gt;"</span></div></pre></td></tr></table></figure>
<h3 id="类型检查（is）"><a href="#类型检查（is）" class="headerlink" title="类型检查（is）"></a>类型检查（is）</h3><p>使用类型检查操作符<code>is</code>来检查<strong>一个实例是否属于一个特定的子类</strong>，如果实例是该子类类型，类型检查操作符返回 true，否则返回 false。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MediaItem</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.name = name</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Movie</span>: <span class="title">MediaItem</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> director: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>, director: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.director = director</div><div class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(name: name)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Song</span>: <span class="title">MediaItem</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> artist: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>, artist: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.artist = artist</div><div class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(name: name)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> library = [</div><div class="line">    <span class="type">Movie</span>(name: <span class="string">"Casablanca"</span>, director: <span class="string">"Michael Curtiz"</span>),</div><div class="line">    <span class="type">Song</span>(name: <span class="string">"Blue Suede Shoes"</span>, artist: <span class="string">"Elvis Presley"</span>),</div><div class="line">    <span class="type">Movie</span>(name: <span class="string">"Citizen Kane"</span>, director: <span class="string">"Orson Welles"</span>),</div><div class="line">    <span class="type">Song</span>(name: <span class="string">"The One And Only"</span>, artist: <span class="string">"Chesney Hawkes"</span>),</div><div class="line">    <span class="type">Song</span>(name: <span class="string">"Never Gonna Give You Up"</span>, artist: <span class="string">"Rick Astley"</span>)</div><div class="line">]</div><div class="line"></div><div class="line"><span class="built_in">print</span>(type(of: library))</div><div class="line"></div><div class="line"><span class="keyword">for</span> item <span class="keyword">in</span> library &#123;</div><div class="line">    <span class="keyword">if</span> item <span class="keyword">is</span> <span class="type">Song</span> &#123;</div><div class="line">        <span class="built_in">print</span>(item.name)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Array</span>&lt;MediaItem&gt;</div><div class="line">Blue Suede Shoes</div><div class="line">The One And Only</div><div class="line">Never Gonna Give You Up</div></pre></td></tr></table></figure>
<h3 id="向下类型转换（as-as-）"><a href="#向下类型转换（as-as-）" class="headerlink" title="向下类型转换（as?/as!）"></a>向下类型转换（as?/as!）</h3><p>某个<strong>类类型</strong>的常量或变量可能实际上引用自一个子类的实例，可以使用类型转换操作符<code>as?</code>或<code>as!</code>将它向下类型转换至其子类类型。因为向下类型转换可能失败，所以类型转换操作符有两个不同的形式<code>as?</code>和<code>as!</code>。</p>
<ol>
<li><code>as?</code>，条件形式，返回一个将要向下类型转换的值的可选项。</li>
<li><code>as!</code>，强制形式，将向下类型转换和<strong>强制展开</strong>结合为一个步骤。</li>
</ol>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MediaItem</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.name = name</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Movie</span>: <span class="title">MediaItem</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> director: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>, director: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.director = director</div><div class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(name: name)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Song</span>: <span class="title">MediaItem</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> artist: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>, artist: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.artist = artist</div><div class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(name: name)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> library = [</div><div class="line">    <span class="type">Movie</span>(name: <span class="string">"Casablanca"</span>, director: <span class="string">"Michael Curtiz"</span>),</div><div class="line">    <span class="type">Song</span>(name: <span class="string">"Blue Suede Shoes"</span>, artist: <span class="string">"Elvis Presley"</span>),</div><div class="line">    <span class="type">Movie</span>(name: <span class="string">"Citizen Kane"</span>, director: <span class="string">"Orson Welles"</span>),</div><div class="line">    <span class="type">Song</span>(name: <span class="string">"The One And Only"</span>, artist: <span class="string">"Chesney Hawkes"</span>),</div><div class="line">    <span class="type">Song</span>(name: <span class="string">"Never Gonna Give You Up"</span>, artist: <span class="string">"Rick Astley"</span>)</div><div class="line">]</div><div class="line"></div><div class="line"><span class="built_in">print</span>(type(of: library))</div><div class="line"></div><div class="line"><span class="keyword">for</span> item <span class="keyword">in</span> library &#123;</div><div class="line">    <span class="keyword">if</span> <span class="keyword">let</span> song = item <span class="keyword">as</span>? <span class="type">Song</span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Song: <span class="subst">\(song.name)</span>"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Array</span>&lt;MediaItem&gt;</div><div class="line">Song: Blue Suede Shoes</div><div class="line">Song: The One And Only</div><div class="line">Song: Never Gonna Give You Up</div></pre></td></tr></table></figure>
<h3 id="不确定类型-Any-和-AnyObject"><a href="#不确定类型-Any-和-AnyObject" class="headerlink" title="不确定类型 Any 和 AnyObject"></a>不确定类型 Any 和 AnyObject</h3><p>Swift 为不确定的类型提供了两种特殊的类型别名：</p>
<ol>
<li><code>AnyObject</code>：表示<strong>任何类类型</strong>的实例。</li>
<li><code>Any</code>：表示<strong>任何类型</strong>，包括函数类型。</li>
</ol>
<h3 id="嵌套类型"><a href="#嵌套类型" class="headerlink" title="嵌套类型"></a>嵌套类型</h3><p>Swift 中的类、结构体和枚举可以进行嵌套，即<strong>在某一个类型的内部定义类型</strong>，嵌套类型能够访问它外部的成员。</p>
<p>这种类型嵌套在 Java 中称为内部类，在 C# 中称为嵌套类。</p>
<p>嵌套类</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> body = <span class="type">Body</span>() </div><div class="line">    </div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Body</span> </span>&#123;</div><div class="line">        <span class="keyword">var</span> height = <span class="number">175</span></div><div class="line">        <span class="keyword">var</span> weight = <span class="number">80</span></div><div class="line">        <span class="function"><span class="keyword">func</span> <span class="title">profile</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="string">"Height: <span class="subst">\(<span class="keyword">self</span>.height)</span>, Weight: <span class="subst">\(<span class="keyword">self</span>.weight)</span>"</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> p = <span class="type">Person</span>()</div><div class="line"><span class="built_in">print</span>(p.body.profile())</div><div class="line"><span class="comment">// Prints "Height: 175, Weight: 80"</span></div></pre></td></tr></table></figure>
<p>嵌套结构体</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Shapes</span> </span>&#123;</div><div class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Line</span> </span>&#123;</div><div class="line">        <span class="keyword">var</span> x = <span class="number">0</span></div><div class="line">        <span class="keyword">var</span> y = <span class="number">0</span></div><div class="line">        <span class="keyword">var</span> length = <span class="number">0</span></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Rectangle</span> </span>&#123;</div><div class="line">        <span class="keyword">var</span> x = <span class="number">0</span></div><div class="line">        <span class="keyword">var</span> y = <span class="number">0</span></div><div class="line">        <span class="keyword">var</span> width = <span class="number">0</span></div><div class="line">        <span class="keyword">var</span> height = <span class="number">0</span></div><div class="line">        <span class="keyword">var</span> area = <span class="number">0</span></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Circle</span> </span>&#123;</div><div class="line">        <span class="keyword">let</span> pi = <span class="number">3.1415926</span></div><div class="line">        <span class="keyword">var</span> radius = <span class="number">0.0</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> <span class="built_in">c</span> = <span class="type">Shapes</span>.<span class="type">Circle</span>()</div><div class="line"><span class="built_in">c</span>.radius = <span class="number">45.0</span></div></pre></td></tr></table></figure>
<h2 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h2><p>扩展为现有的类、结构体、枚举类型或协议添加了新功能，包括为无访问权限的源代码扩展类型的能力（逆向建模）。</p>
<p>扩展和 Object-C 中的 category 类似，与 Object-C 的分类不同的是 Swift 的扩展没有名字。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 扩展：让 Person 实现 Hashable 协议</span></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Person</span> : <span class="title">Hashable</span> </span>&#123;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="扩展（extension）的能力"><a href="#扩展（extension）的能力" class="headerlink" title="扩展（extension）的能力"></a>扩展（extension）的能力</h3><ol>
<li>添加计算实例属性和计算类型属性；</li>
<li>定义实例方法和类型方法；</li>
<li>提供新初始化器；</li>
<li>定义下标；</li>
<li>定义和使用新内嵌类型；</li>
<li>使现有的类型遵循某些以。</li>
<li><strong>扩展可以向一个类型添加新的方法，但是不能重写已有的方法。</strong></li>
</ol>
<h4 id="扩展的能力-计算属性"><a href="#扩展的能力-计算属性" class="headerlink" title="扩展的能力-计算属性"></a>扩展的能力-计算属性</h4><ul>
<li>扩展可以向已有的类型添加计算实例属性和计算类型属性。</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Double</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> km: <span class="type">Double</span> &#123; <span class="keyword">return</span> <span class="keyword">self</span> * <span class="number">1_000.0</span> &#125;</div><div class="line">    <span class="keyword">var</span> m: <span class="type">Double</span> &#123; <span class="keyword">return</span> <span class="keyword">self</span> &#125;</div><div class="line">    <span class="keyword">var</span> cm: <span class="type">Double</span> &#123; <span class="keyword">return</span> <span class="keyword">self</span> / <span class="number">100.0</span> &#125;</div><div class="line">    <span class="keyword">var</span> mm: <span class="type">Double</span> &#123; <span class="keyword">return</span> <span class="keyword">self</span> / <span class="number">1_000.0</span> &#125;</div><div class="line">    <span class="keyword">var</span> ft: <span class="type">Double</span> &#123; <span class="keyword">return</span> <span class="keyword">self</span> / <span class="number">3.28084</span> &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> oneInch = <span class="number">25.4</span>.mm</div><div class="line"><span class="built_in">print</span>(<span class="string">"One inch is <span class="subst">\(oneInch)</span> meters"</span>)</div><div class="line"><span class="keyword">let</span> threeFeet = <span class="number">3</span>.ft</div><div class="line"><span class="built_in">print</span>(<span class="string">"Three feet is <span class="subst">\(threeFeet)</span> meters"</span>)</div></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="type">One</span> inch <span class="keyword">is</span> <span class="number">0.0254</span> meters</div><div class="line"><span class="type">Three</span> feet <span class="keyword">is</span> <span class="number">0.914399970739201</span> meters</div></pre></td></tr></table></figure>
<h4 id="扩展的能力-初始化器"><a href="#扩展的能力-初始化器" class="headerlink" title="扩展的能力-初始化器"></a>扩展的能力-初始化器</h4><ul>
<li>扩展可以向已有的类型添加新的初始化器。</li>
</ul>
<p>通过扩展可以使初始化器接收自定义类型作为形式参数，也可以提供该类型原始实现中未包含的额外初始化选项。</p>
<p>扩展能为类添加新的<strong>便捷初始化器</strong>，但是不能添指定初始化或反初始化器。<strong>指定初始化器和反初始化器必须由原来类的实现提供</strong>。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Size</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> width = <span class="number">0.0</span>, height = <span class="number">0.0</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> x = <span class="number">0.0</span>, y = <span class="number">0.0</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Rect</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> origin = <span class="type">Point</span>()</div><div class="line">    <span class="keyword">var</span> size = <span class="type">Size</span>()</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Rect</span> </span>&#123;</div><div class="line">    <span class="keyword">init</span>(center: <span class="type">Point</span>, size: <span class="type">Size</span>) &#123;</div><div class="line">        <span class="keyword">let</span> originX = center.x - (size.width / <span class="number">2</span>)</div><div class="line">        <span class="keyword">let</span> originY = center.y - (size.height / <span class="number">2</span>)</div><div class="line">        <span class="keyword">self</span>.<span class="keyword">init</span>(origin: <span class="type">Point</span>(x: originX, y: originY), size: size)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> centerRect = <span class="type">Rect</span>(center: <span class="type">Point</span>(x: <span class="number">4.0</span>, y: <span class="number">4.0</span>), size: <span class="type">Size</span>(width: <span class="number">3.0</span>, height: <span class="number">3.0</span>))</div><div class="line"><span class="built_in">print</span>(centerRect.origin)</div><div class="line"><span class="comment">// Prints "Point(x: 2.5, y: 2.5)"</span></div></pre></td></tr></table></figure>
<h4 id="扩展的能力-方法"><a href="#扩展的能力-方法" class="headerlink" title="扩展的能力-方法"></a>扩展的能力-方法</h4><p>扩展可以为已有的类型添加新的实例方法和类型方法。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Int</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">repetitions</span><span class="params">(task: <span class="params">()</span></span></span> -&gt; <span class="type">Void</span>) &#123;</div><div class="line">        <span class="keyword">for</span> <span class="number">_</span> <span class="keyword">in</span> <span class="number">0</span>..&lt;<span class="keyword">self</span> &#123;</div><div class="line">            task()</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="number">2</span>.repetitions &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Hello!"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>打印结果：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Hello!</div><div class="line">Hello!</div></pre></td></tr></table></figure>
<h4 id="扩展的能力-mutating方法"><a href="#扩展的能力-mutating方法" class="headerlink" title="扩展的能力-mutating方法"></a>扩展的能力-mutating方法</h4><p>扩展的实例方法仍可以修改（异变）实例本身。</p>
<p>结构体和枚举类型方法在修改 self 或本身的属性时必须标记实例方法为 <code>mutating</code>，和原本实现的一遍方法一样。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Int</span> </span>&#123;</div><div class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">sequare</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">self</span> = <span class="keyword">self</span> * <span class="keyword">self</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> someInt = <span class="number">3</span></div><div class="line">someInt.sequare()</div><div class="line"><span class="built_in">print</span>(someInt)</div><div class="line"><span class="comment">// Prints "9"</span></div></pre></td></tr></table></figure>
<h4 id="扩展的能力-下标"><a href="#扩展的能力-下标" class="headerlink" title="扩展的能力-下标"></a>扩展的能力-下标</h4><p>扩展能为已有的类型添加新的下标。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Int</span> </span>&#123;</div><div class="line">    <span class="keyword">subscript</span>(digitIndex: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">var</span> decimalBase = <span class="number">1</span></div><div class="line">        <span class="keyword">for</span> <span class="number">_</span> <span class="keyword">in</span> <span class="number">0</span>..&lt;digitIndex &#123;</div><div class="line">            decimalBase *= <span class="number">10</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> (<span class="keyword">self</span> / decimalBase) % <span class="number">10</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="built_in">print</span>(<span class="number">746381295</span>[<span class="number">0</span>])</div><div class="line"><span class="comment">// Prints "5"</span></div><div class="line"><span class="built_in">print</span>(<span class="number">746381295</span>[<span class="number">1</span>])</div><div class="line"><span class="comment">// Prints "9"</span></div><div class="line"><span class="built_in">print</span>(<span class="number">746381295</span>[<span class="number">2</span>])</div><div class="line"><span class="comment">// Prints "2"</span></div><div class="line"><span class="built_in">print</span>(<span class="number">746381295</span>[<span class="number">8</span>])</div><div class="line"><span class="comment">// Prints "7"</span></div></pre></td></tr></table></figure>
<h4 id="扩展的能力-添加内嵌类型"><a href="#扩展的能力-添加内嵌类型" class="headerlink" title="扩展的能力-添加内嵌类型"></a>扩展的能力-添加内嵌类型</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Int</span> </span>&#123;</div><div class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">Kind</span> </span>&#123;</div><div class="line">        <span class="keyword">case</span> negative, zero, positive</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> kind: <span class="type">Kind</span> &#123;</div><div class="line">        <span class="keyword">switch</span> <span class="keyword">self</span> &#123;</div><div class="line">        <span class="keyword">case</span> <span class="number">0</span>:</div><div class="line">            <span class="keyword">return</span> .zero</div><div class="line">        <span class="keyword">case</span> <span class="keyword">let</span> x <span class="keyword">where</span> x &gt; <span class="number">0</span>:</div><div class="line">            <span class="keyword">return</span> .positive</div><div class="line">        <span class="keyword">default</span>:</div><div class="line">            <span class="keyword">return</span> .negative</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">print</span>(<span class="number">0</span>.kind)</div><div class="line"><span class="comment">// Prints "zero"</span></div><div class="line"><span class="built_in">print</span>(<span class="number">100</span>.kind)</div><div class="line"><span class="comment">// Prints "positive"</span></div><div class="line"><span class="built_in">print</span>((<span class="number">0</span>-<span class="number">1</span>).kind)</div><div class="line"><span class="comment">// Prints "negative"</span></div></pre></td></tr></table></figure>
<h2 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h2><h3 id="协议的语法"><a href="#协议的语法" class="headerlink" title="协议的语法"></a>协议的语法</h3><p>自定义类型声明时，<strong>将协议名放在类型名的冒号之后</strong>来表示该类型采纳一个特定的协议，多个协议可以用逗号分开列出。若一个类拥有父类，将这个父类名放在其采纳的协议名<strong>之前</strong>，并用逗号分隔。</p>
<p><img src="/2023/05/04/Swift/面向对象编程/../Swift/面向对象编程/11.png" alt="10"></p>
<h3 id="属性要求"><a href="#属性要求" class="headerlink" title="属性要求"></a>属性要求</h3><p>协议可以要求所有遵循该协议的类型，提供特定名字和类型的实例属性或类型属性。协议并不会具体说明属性时存储型属性还是计算型属性，它只具体要求——<strong>属性有特定的名称和类型</strong>。</p>
<p>协议同时要求——<strong>一个属性必须明确是可读的或可读可写</strong>：</p>
<ol>
<li><p>若协议要求一个属性为可读可写的，那么该属性不能用常量储存属性或只读计算属性来满足。</p>
</li>
<li><p>若协议要求一个属性为可读的，那么任何种类的属性都能满足这个要求。</p>
</li>
</ol>
<p>读写计算属性和只读计算属性：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">SomeProtocol</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> mustBeSettable: <span class="type">Int</span> &#123; <span class="keyword">get</span> <span class="keyword">set</span> &#125;</div><div class="line">    <span class="keyword">var</span> doesNotNeedToBeSettable: <span class="type">Int</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>制度计算属性：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">FullyNamed</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> fullName: <span class="type">String</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span>: <span class="title">FullyNamed</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> fullName: <span class="type">String</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> john = <span class="type">Person</span>(fullName: <span class="string">"John Appleseed"</span>)</div><div class="line"><span class="comment">// Prints "John Appleseed"</span></div></pre></td></tr></table></figure>
<p>只读计算属性</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Starship</span>: <span class="title">FullyNamed</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> <span class="keyword">prefix</span>: <span class="type">String</span>?</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>, <span class="keyword">prefix</span>: <span class="type">String</span>? = <span class="literal">nil</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.name = name</div><div class="line">        <span class="keyword">self</span>.<span class="keyword">prefix</span> = <span class="keyword">prefix</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> fullName: <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">return</span> (<span class="keyword">prefix</span> != <span class="literal">nil</span> ? <span class="keyword">prefix</span>! + <span class="string">" "</span> : <span class="string">""</span>) + name</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> ncc1701 = <span class="type">Starship</span>(name: <span class="string">"Enterprise"</span>, <span class="keyword">prefix</span>: <span class="string">"USS"</span>)</div><div class="line"><span class="built_in">print</span>(ncc1701.fullName)</div><div class="line"><span class="comment">// Prints "USS Enterprise"</span></div></pre></td></tr></table></figure>
<p>在协议中定义<strong>类型属性</strong>时在前面添加 <code>static</code> 关键字。当类的实现使用 <code>class</code> 或 <code>static</code> 关键字前缀声明类型属性要求时，这个规则仍然适用。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">AnotherProtocol</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">var</span> someTypeProperty: <span class="type">Int</span> &#123; <span class="keyword">get</span> <span class="keyword">set</span> &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="方法要求"><a href="#方法要求" class="headerlink" title="方法要求"></a>方法要求</h3><p>协议可以要求采纳的类型<strong>实现指定的实例方法和类方法</strong>。</p>
<ol>
<li>这些方法作为协议定义的一部分，书写方式与正常实例和类方法的方式完全相同，但是不需要大括号和方法的主题；</li>
<li>允许方法拥有参数，与正常的方法使用同样的规则；</li>
<li>方法参数不能定义默认值。</li>
</ol>
<p>在类实现时，类型方法要求使用 <code>class</code> 或 <code>static</code> 作为关键字前缀，协议中同样适用。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">AnotherProtocol</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">someMethod</span><span class="params">(element: String)</span></span></div><div class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">anotherMethod</span><span class="params">(element: Int)</span></span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="mutating-方法要求"><a href="#mutating-方法要求" class="headerlink" title="mutating 方法要求"></a>mutating 方法要求</h3><p>对于协议里定义的实例方法，如果想要异变采用了该协议的类型实例，就要在方法的定义当中使用 <code>mutating</code> 关键字。这允许结构体和枚举类型能采用相应协议并满足方法要求。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">MoveProtocol</span> </span>&#123;</div><div class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">moveBy</span><span class="params">(x deltaX: Int, y deltaY: Int)</span></span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span>: <span class="title">MoveProtocol</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> x = <span class="number">0</span>, y = <span class="number">0</span></div><div class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">moveBy</span><span class="params">(x deltaX: Int, y deltaY: Int)</span></span> &#123;</div><div class="line">        <span class="keyword">self</span> = <span class="type">Point</span>(x: x + deltaX, y: y + deltaY)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> p = <span class="type">Point</span>(x: <span class="number">1</span>, y: <span class="number">1</span>)</div><div class="line">p.moveBy(x: <span class="number">1</span>, y: <span class="number">1</span>)</div><div class="line"><span class="built_in">print</span>(p)</div><div class="line"><span class="comment">// Prints "Point(x: 2, y: 2)"</span></div></pre></td></tr></table></figure>
<h3 id="初始化器要求"><a href="#初始化器要求" class="headerlink" title="初始化器要求"></a>初始化器要求</h3><p>协议可以要求遵循协议的类型实现指定的初始化器。</p>
<p>协议在定义初始化器时和一般的初始化器一样，只用将初始化器写在协议的定义当中，只是不用写大括号（初始化的实体）。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">SomeProtocol</span> </span>&#123;</div><div class="line">    <span class="keyword">init</span>(someParameter: <span class="type">Int</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="初始化器要求的类实现"><a href="#初始化器要求的类实现" class="headerlink" title="初始化器要求的类实现"></a>初始化器要求的类实现</h3><p>一、如果想让遵循协议的类满足协议的初始化器要求，在实现协议指定的初始化器或便捷初始化器时，必须使用 <code>required</code> 关键字修饰初始化器的实现。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">SomeProtocol</span> </span>&#123;</div><div class="line">    <span class="keyword">init</span>(someParameter: <span class="type">Int</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span>: <span class="title">SomeProtocol</span> </span>&#123;</div><div class="line">    <span class="keyword">required</span> <span class="keyword">init</span>(someParameter: <span class="type">Int</span>) &#123;</div><div class="line">        <span class="comment">// initializer implementation goes here</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如果遵循了协议，且实现了协议指定的初始化器，没有使用 <code>required</code> 关键字，则会报错：</p>
<p><img src="/2023/05/04/Swift/面向对象编程/../Swift/面向对象编程/12.png" alt="12"></p>
<p>二、如果一个子类重写了父类指定的初始化器，并且遵循协议实现了初始化器要求，那么就要为这个初始化器的实现添加 <code>required</code> 和 <code>override</code> 两个修饰符。</p>
<p><img src="/2023/05/04/Swift/面向对象编程/../Swift/面向对象编程/15.png" alt="15"></p>
<p>如果重写了方法，没有加 <code>override</code> 关键字，则会报错：</p>
<p><img src="/2023/05/04/Swift/面向对象编程/../Swift/面向对象编程/13.png" alt="13"></p>
<p>如果遵循了协议实现了初始化器要求，没有加 <code>required</code> 关键字，则会报错：</p>
<p><img src="/2023/05/04/Swift/面向对象编程/../Swift/面向对象编程/14.png" alt="14"></p>
<h3 id="将协议作为类型"><a href="#将协议作为类型" class="headerlink" title="将协议作为类型"></a>将协议作为类型</h3><ol>
<li>在函数、方法或者初始化器里作为形式参数类型或者返回类型；</li>
<li>作为常量、变量或者属性的类型；</li>
<li>作为数组、字典或者其他存储器的元素的类型。</li>
</ol>
<h3 id="协议继承"><a href="#协议继承" class="headerlink" title="协议继承"></a>协议继承</h3><p>协议可以继承一个或者多个其他协议，并且可以在继承的基础之上添加更多要求。协议继承的语法与类继承的语法相似，只不过可以选择列出<strong>多个继承的协议</strong>，使用逗号分隔。</p>
<p><img src="/2023/05/04/Swift/面向对象编程/../Swift/面向对象编程/16.png" alt="16"></p>
<h3 id="类专用的协议（AnyObject）"><a href="#类专用的协议（AnyObject）" class="headerlink" title="类专用的协议（AnyObject）"></a>类专用的协议（AnyObject）</h3><p>通过添加 <code>AnyObject</code> 关键字到协议的继承列表，可以<strong>限制协议只能被类类型采纳</strong>，并且不是结构体或者枚举。</p>
<p><img src="/2023/05/04/Swift/面向对象编程/../Swift/面向对象编程/17.png" alt="17"></p>
<h3 id="协议组合（-amp-）"><a href="#协议组合（-amp-）" class="headerlink" title="协议组合（&amp;）"></a>协议组合（&amp;）</h3><p>可以使用协议组合来复合多个协议到一个要求里。协议组合不定义任何新的协议类型。</p>
<p>协议组合使用 <code>SomeProtocol &amp; AnotherProtocol</code> 的形式。可以列举任意数量的协议，用和符号<code>&amp;</code>连接，使用逗号<code>,</code>分隔。除了协议列表，协议组合也能包含类类型，这允许标明一个需要的父类。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Named</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Aged</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> age: <span class="type">Int</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span>: <span class="title">Named</span>, <span class="title">Aged</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">wishHappyBirthday</span><span class="params">(to celebrator: Named &amp; Aged)</span></span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Happy birthday, <span class="subst">\(celebrator.name)</span>, you'er <span class="subst">\(celebrator.age)</span>"</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> birthdayPerson = <span class="type">Person</span>(name: <span class="string">"kevin"</span>, age: <span class="number">18</span>)</div><div class="line">wishHappyBirthday(to: birthdayPerson)</div><div class="line"><span class="comment">// Prints "Happy birthday, kevin, you'er 18"</span></div></pre></td></tr></table></figure>
<h3 id="可选协议要求（optional）"><a href="#可选协议要求（optional）" class="headerlink" title="可选协议要求（optional）"></a>可选协议要求（optional）</h3><p>可以给协议定义可选要求，这些要求不需要强制遵循协议的类型实现。</p>
<p>可选要求使用 <code>optional</code> 修饰符作为前缀放在协议的定义中。</p>
<p>可选要求允许 Object-C 操作，协议和可选要求必须使用 <code>@objc</code> 标志标记，注意 <code>@objc</code> 协议只能被继承自 Object-C 类或其他 <code>@objc</code> 类采纳，他们不能被结构体或者枚举采纳。</p>
<h2 id="协议和扩展"><a href="#协议和扩展" class="headerlink" title="协议和扩展"></a>协议和扩展</h2><h3 id="在扩展里添加协议遵循"><a href="#在扩展里添加协议遵循" class="headerlink" title="在扩展里添加协议遵循"></a>在扩展里添加协议遵循</h3><p>可以通过扩展为一个已经存在的类型<strong>采纳</strong>和<strong>遵循</strong>一个新的协议，即使无法访问现有类型的源代码也能实现。</p>
<p>扩展可以添加新的属性、方法和小标到已经存在的类型，并且因此允许添加协议需要的任何<strong>要求</strong>。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">TextRepresentable</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> desc: <span class="type">String</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Person</span>: <span class="title">TextRepresentable</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> desc: <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"name <span class="subst">\(name)</span> age <span class="subst">\(age)</span>"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> p = <span class="type">Person</span>(name: <span class="string">"zhangsan"</span>, age: <span class="number">35</span>)</div><div class="line"><span class="built_in">print</span>(p.desc)</div><div class="line"><span class="comment">// Prints "name zhangsan age 35"</span></div></pre></td></tr></table></figure>
<h3 id="有条件的遵循协议"><a href="#有条件的遵循协议" class="headerlink" title="有条件的遵循协议"></a>有条件的遵循协议</h3><p>泛型类型可能<strong>只在某些情况下</strong>满足一个协议的要求，比如当类型的泛型形式参数也遵循对应协议时。</p>
<p>可以通过在扩展类型时列出限制让泛型类型<strong>有条件地遵循某协议</strong>，即在采纳协议的名字后面写泛型 <code>where</code> 分句。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">TextRepresentable</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> desc: <span class="type">String</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Person</span>: <span class="title">TextRepresentable</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> desc: <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"name <span class="subst">\(name)</span> age <span class="subst">\(age)</span>"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Array</span>: <span class="title">TextRepresentable</span> <span class="title">where</span> <span class="title">Element</span>: <span class="title">TextRepresentable</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> desc: <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">let</span> itemDesc = <span class="keyword">self</span>.<span class="built_in">map</span>&#123; $<span class="number">0</span>.desc &#125;</div><div class="line">        <span class="keyword">return</span> itemDesc.joined(separator: <span class="string">","</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> array = [<span class="type">Person</span>(name: <span class="string">"zhangsan"</span>, age: <span class="number">20</span>), <span class="type">Person</span>(name: <span class="string">"lis"</span>, age: <span class="number">30</span>)];</div><div class="line"><span class="built_in">print</span>(array.desc)</div><div class="line"><span class="comment">// Prints "name zhangsan age 20,name lis age 30"</span></div></pre></td></tr></table></figure>
<p>如果参数没有遵循 协议：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">TextRepresentable</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> desc: <span class="type">String</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Array</span>: <span class="title">TextRepresentable</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> desc: <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">var</span> temp = <span class="string">""</span></div><div class="line">        <span class="keyword">for</span> element <span class="keyword">in</span> <span class="keyword">self</span> &#123;</div><div class="line">            <span class="keyword">if</span> <span class="keyword">let</span> p = element <span class="keyword">as</span>? <span class="type">Person</span> &#123;</div><div class="line">                <span class="keyword">if</span> temp.<span class="built_in">count</span> &gt; <span class="number">0</span> &#123;</div><div class="line">                    temp += <span class="string">","</span></div><div class="line">                &#125;</div><div class="line">                temp += <span class="string">"name <span class="subst">\(p.name)</span> age <span class="subst">\(p.age)</span>"</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> temp</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> array = [<span class="type">Person</span>(name: <span class="string">"zhangsan"</span>, age: <span class="number">20</span>), <span class="type">Person</span>(name: <span class="string">"lis"</span>, age: <span class="number">30</span>)];</div><div class="line"><span class="built_in">print</span>(array.desc)</div><div class="line"><span class="comment">// Prints "name zhangsan age 20,name lis age 30"</span></div></pre></td></tr></table></figure>
<p>通过对比可见，有效的遵循协议可以更好的简化代码和逻辑。</p>
<h3 id="使用扩展声明采纳协议"><a href="#使用扩展声明采纳协议" class="headerlink" title="使用扩展声明采纳协议"></a>使用扩展声明采纳协议</h3><p>如果一个类型已经<strong>遵循</strong>了协议的所有<strong>要求</strong>，但是还没有声明该属性<strong>采纳</strong>了这个协议，则可以通过一个空的扩展来让该类型<strong>采纳</strong>这个协议。👇</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Hamster 已经遵循了 TextRepresentable 协议的需求，但是还没有声明“采纳了 TextRepresentable 协议”</span></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Hamster</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">var</span> desc: <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"A hamster named <span class="subst">\(name)</span>"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 通过一个空的扩展让 Hamster 采纳 TextRepresentable 协议</span></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Hamster</span>: <span class="title">TextRepresentable</span> </span>&#123;&#125;</div></pre></td></tr></table></figure>
<h3 id="协议扩展"><a href="#协议扩展" class="headerlink" title="协议扩展"></a>协议扩展</h3><p>协议可以通过扩展来提供方法和属性的实现，来实现<strong>遵循协议类型</strong>，这就允许在协议自身定义行为，而不是在每一个遵循的类里或者全局函数里定义行为。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Named</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Aged</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> age: <span class="type">Int</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">TextRepresentable</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> desc: <span class="type">String</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span>: <span class="title">Named</span>, <span class="title">Aged</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Person</span>: <span class="title">TextRepresentable</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> desc: <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"name <span class="subst">\(name)</span> age <span class="subst">\(age)</span>"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Aged</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">moreThan35</span><span class="params">()</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">        <span class="keyword">return</span> age &gt;= <span class="number">35</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> p = <span class="type">Person</span>(name: <span class="string">"zhangsan"</span>, age: <span class="number">35</span>)</div><div class="line"><span class="built_in">print</span>(p.moreThan35())</div><div class="line"><span class="comment">// Print "true"</span></div></pre></td></tr></table></figure>
<h3 id="给协议提供默认实现"><a href="#给协议提供默认实现" class="headerlink" title="给协议提供默认实现"></a>给协议提供默认实现</h3><p>可以使用协议扩展来给协议的任一方法或者计算属性要求提供默认实现：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Named</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Aged</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> age: <span class="type">Int</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">TextRepresentable</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> desc: <span class="type">String</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">TextRepresentable</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> desc: <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"name and age"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span>: <span class="title">Named</span>, <span class="title">Aged</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Person</span>: <span class="title">TextRepresentable</span> </span>&#123;</div><div class="line"><span class="comment">//    var desc: String &#123;</span></div><div class="line"><span class="comment">//        return "name \(name) age \(age)"</span></div><div class="line"><span class="comment">//    &#125;</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Aged</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">moreThan35</span><span class="params">()</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">        <span class="keyword">return</span> age &gt;= <span class="number">35</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> p = <span class="type">Person</span>(name: <span class="string">"zhangsan"</span>, age: <span class="number">35</span>)</div><div class="line"><span class="built_in">print</span>(p.desc)</div><div class="line"><span class="comment">// Prints "name and age"</span></div></pre></td></tr></table></figure>
<p>如果<strong>遵循类型</strong>（<code>Person</code>）给这个协议（<code>TextRepresentable</code>）的<strong>要求</strong>（<code>var desc(): String { get }</code>）提供了自己的实现，那么该实现会替代扩展中提供的默认实现：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Named</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Aged</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> age: <span class="type">Int</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">TextRepresentable</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> desc: <span class="type">String</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">TextRepresentable</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> desc: <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"name and age"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span>: <span class="title">Named</span>, <span class="title">Aged</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Person</span>: <span class="title">TextRepresentable</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> desc: <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"name <span class="subst">\(name)</span> age <span class="subst">\(age)</span>"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Aged</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">moreThan35</span><span class="params">()</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">        <span class="keyword">return</span> age &gt;= <span class="number">35</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> p = <span class="type">Person</span>(name: <span class="string">"zhangsan"</span>, age: <span class="number">35</span>)</div><div class="line"><span class="built_in">print</span>(p.desc)</div><div class="line"><span class="comment">// Prints "name zhangsan age 35"</span></div></pre></td></tr></table></figure>
<h3 id="给协议扩展添加限制"><a href="#给协议扩展添加限制" class="headerlink" title="给协议扩展添加限制"></a>给协议扩展添加限制</h3><p>通过扩展可以为类型添加方法和属性，也可以在添加这些方法和属性时设定限制。在扩展协议名字后边使用 <code>where</code> 分句来写这些限制。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Named</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Aged</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> age: <span class="type">Int</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">TextRepresentable</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> desc: <span class="type">String</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span>: <span class="title">Named</span>, <span class="title">Aged</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Person</span>: <span class="title">TextRepresentable</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> desc: <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"name <span class="subst">\(name)</span> age <span class="subst">\(age)</span>"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Collection</span> <span class="title">where</span> <span class="title">Iterator</span>.<span class="title">Element</span>: <span class="title">TextRepresentable</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> desc: <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">let</span> itemDesc = <span class="keyword">self</span>.<span class="built_in">map</span>&#123; $<span class="number">0</span>.desc &#125;</div><div class="line">        <span class="keyword">return</span> itemDesc.joined(separator: <span class="string">","</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> collection = [<span class="type">Person</span>(name: <span class="string">"zhangsan"</span>, age: <span class="number">20</span>), <span class="type">Person</span>(name: <span class="string">"lis"</span>, age: <span class="number">30</span>)];</div><div class="line"><span class="built_in">print</span>(collection.desc)</div><div class="line"><span class="comment">// Prints "name zhangsan age 20,name lis age 30"</span></div></pre></td></tr></table></figure>
<p>如果 Collection 中包含没有采纳 <code>TextRepresentable</code> 协议的对象，则不能使用扩展里提供的 <code>desc()</code> 方法：</p>
<p><img src="/2023/05/04/Swift/面向对象编程/../Swift/面向对象编程/18.png" alt="18"></p>
<h2 id="面向协议编程"><a href="#面向协议编程" class="headerlink" title="面向协议编程"></a>面向协议编程</h2><h3 id="OOP（面向对象编程）"><a href="#OOP（面向对象编程）" class="headerlink" title="OOP（面向对象编程）"></a>OOP（面向对象编程）</h3><p>OOP（Object Oriented Programming）即面向对象程序设计，是以建立模型体现出来的抽象思维过程和面向对象的方法。</p>
<p>几乎所有的编程语言都支持OOP，Java、Ruby等语言的设计理念中几乎将一切事物都看做对象，对象即中心、对象即真理。</p>
<blockquote>
<p>面向对象三要素：</p>
<ol>
<li>封装<br>将事物抽象为类，把对外接口暴露，将实现和内部数据隐藏。</li>
<li>继承<br>可以使用现有类的所有功能，并在无序重新编写原来的类的情况下对这些功能进行扩展。<br><1> 通过继承创建的类称为“子类”或“派生类”。<br><2> 被继承的类称为“基类”、“父类”或“超类”。<br><3> 继承的过程，被称为从一般到特殊的过程。<br><4> 一个子类只能有一个基类，可以通过<strong>多级继承</strong>来实现多重继承。（在某些 OOP 语言中，一个子类可以继承多个基类。）</4></3></2></1></li>
<li>多态<br>允许将子类类型的指针赋值给父类类型的指针。</li>
</ol>
</blockquote>
<p>OOP 的缺陷：</p>
<ol>
<li><p>继承机制要求在开始之前就能设计好整个程序的框架、结构、事物间的连接关系。这要求开发者必须有很好的分类设计能力，将不同的属性和方法分配到合适的层次里面去。设计清晰明了的继承体系总是很难的。（<strong>C++标准库不是面向对象的</strong>）</p>
</li>
<li><p>结构天生对改动有抵抗特性。这也是为什么 OOP 领域中所有程序员都对重构讳莫如深，有些框架到最后代码量几句膨胀变得难以维护从而失控。（<strong>修改行为比修改结构体简单</strong>）</p>
</li>
<li><p>继承机制带来的另一个问题是：很多语言都不提供多继承，我们不得不在父类塞入更多的内容，子类中会存在无用的父类属性和方法，而这些冗余代码给子类带来的一定的风险，而且对于层级很深的代码结构体来说 Bug 修复将会成为难题。（<strong>组合优于继承</strong>）</p>
</li>
<li><p><strong>对象</strong>（Class，引用类型）的状态不是编码的好友，相反是编码的敌人。对象固有的状态在分享和传递过程中很难追踪调试，尤其在并行程序编码中问题就更加明显，很难查找对象在哪一个并行线程发生了改变。OOP 所带来的可变、不确定、复杂等特征完全与并行编程中倡导的小型化、核心化、高效化完全背离。在并行编程中，值类型的优势更加明显，一个值在传递后，不会因为传递出去的值的变化而变化，即并行线程间修改的值都是独立的。（<strong>值类型优于引用类型</strong>）</p>
</li>
</ol>
<h3 id="POP（面向协议编程）"><a href="#POP（面向协议编程）" class="headerlink" title="POP（面向协议编程）"></a>POP（面向协议编程）</h3><p>Protocol oriented programming。</p>
<p>协议为方法、属性等定义了蓝图，然后类、结构体或枚举可以采用该协议。</p>
<p>在 Objective-C 中数组的实现遵循的是 OOP 编程范式。可变数组 <code>NSMutableArray</code> 继承自 <code>NSArray</code>，<code>NSArray</code> 继承自 <code>NSObject</code>。同时<code>NSArray</code> 采纳了 <code>NSCopying</code>、<code>NSFastEnumeration</code>、<code>NSMutableCopying</code>、<code>NSSecureCoding</code> 等协议。</p>
<p><img src="/2023/05/04/Swift/面向对象编程/../Swift/面向对象编程/19.png" alt="19"></p>
<p>在 Swift 中数组的实现遵循的是 POP 编程范式。<code>Array</code> 没有继承自任何类，而是遵循了一系列的协议，不同的协议定义了不同功能的蓝图。</p>
<p><img src="/2023/05/04/Swift/面向对象编程/../Swift/面向对象编程/20.png" alt="20"></p>
<h3 id="OOP-vs-POP"><a href="#OOP-vs-POP" class="headerlink" title="OOP vs POP"></a>OOP vs POP</h3><p><strong>OOP 关心对象是什么，POP 关心对象做什么。</strong></p>
<h4 id="OOP-关心对象是什么"><a href="#OOP-关心对象是什么" class="headerlink" title="OOP 关心对象是什么"></a>OOP 关心对象是什么</h4><p>采用 OOP 实现不同种类的运动员：</p>
<p>首页不同种类的运动员统称为运动员，运动员都是人，所以有以下方案</p>
<p>1、定义人类，一个有名字、年龄和说话等基本能力的人类：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Human</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></div><div class="line">    </div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>, age: <span class="type">Int</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.name = name</div><div class="line">        <span class="keyword">self</span>.age = age</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">sayHi</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"say Hi"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>2、定义运动员，一个人类运动员（继承自“人类”），他可以自定义自我介绍的内容：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Athlete</span>: <span class="title">Human</span> </span>&#123;</div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">sayHi</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Hi, I'm <span class="subst">\(name)</span>"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>3、定义田径运动员、游泳运动员，他们统称为运动员（继承自“运动员”），并可以定义属于自己的特有的能力：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Runner</span>: <span class="title">Athlete</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">run</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"run"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Swimmer</span>: <span class="title">Athlete</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">swim</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"swim"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>🤔<strong>思考</strong>：如果既是田径运动员，又是游泳运动员？</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">RunnerAndSwimmer</span>: <span class="title">Athlete</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">run</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"run"</span>)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">swim</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"swim"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>直接定义一个“田径游泳”运动员，这个命名真的很 OC。</p>
<p>如果还是篮球运动员A，则可以写成 “RunnerAndSwimmerAndBasketballPlayer”，而且还可以一直 and 下去，“RunnerAndSwimmerAndBasketballPlayerAnd…”。</p>
<p>即：“田径” + “游泳” + “篮球”</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">RunnerAndSwimmerAndBasketballPlayer</span>: <span class="title">Athlete</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">run</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"run"</span>)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">swim</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"swim"</span>)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">playBasketball</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"play basketball"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如果这时有一个运动员B，相对于第一个除了不是“田径”运动员外其他的都是，则需要定义一个类，类名可以写成 “SwimmerAndBasketballPlayer”。</p>
<p>即：“游泳” + “篮球”</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SwimmerAndBasketballPlayer</span>: <span class="title">Athlete</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">swim</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"swim"</span>)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">playBasketball</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"play basketball"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>运动员C：“田径” + “篮球”</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">RunnerAndBasketballPlayer</span>: <span class="title">Athlete</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">run</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"run"</span>)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">playBasketball</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"play basketball"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>4、定义裁判，裁判肯定是一个人类</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Referee</span>: <span class="title">Human</span> </span>&#123;</div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">sayHi</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Hi, I'm <span class="subst">\(name)</span>"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>🤔<strong>思考</strong>：如果既是运动员，又是裁判？</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Referee</span>: <span class="title">Athlete</span> </span>&#123;</div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">sayHi</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Hi, I'm <span class="subst">\(name)</span>"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>让裁判继承自运动员，来表明这个裁判也是属于运动员这一类里的。显示生活中虽然裁判有可能是从运动员发展来的，但是这里显然裁判和运动员是两个职业，并没有从属关系。</p>
<h4 id="POP-关心对象做什么"><a href="#POP-关心对象做什么" class="headerlink" title="POP 关心对象做什么"></a>POP 关心对象做什么</h4><p>1、定义人类应该具备的基本属性，田径运动员的基本属性，游泳运动员的基本属性：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Human</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span> &#123; <span class="keyword">get</span> <span class="keyword">set</span> &#125;</div><div class="line">    <span class="keyword">var</span> age: <span class="type">Int</span> &#123; <span class="keyword">get</span> <span class="keyword">set</span> &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">sayHi</span><span class="params">()</span></span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Runnalbe</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">run</span><span class="params">()</span></span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Swimming</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">swim</span><span class="params">()</span></span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>2、田径运动员：“人类” + “田径”</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Runner</span>: <span class="title">Human</span>, <span class="title">Runnalbe</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name = <span class="string">"zhangsan"</span></div><div class="line">    <span class="keyword">var</span> age = <span class="number">35</span></div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">sayHi</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Hi, I'm <span class="subst">\(name)</span>"</span>)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">run</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"run"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>3、游泳运动员：“人类” + “游泳”</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Swimmer</span>: <span class="title">Human</span>, <span class="title">Swimming</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name = <span class="string">"lisi"</span></div><div class="line">    <span class="keyword">var</span> age = <span class="number">18</span></div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">sayHi</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Hi, I'm <span class="subst">\(name)</span>"</span>)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">swim</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"swim"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>4、运动健将：“人类” + “田径” + “游泳”</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">AllAroundAthlete</span>: <span class="title">Human</span>, <span class="title">Runnalbe</span>, <span class="title">Swimming</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">"wangwu"</span></div><div class="line">    <span class="keyword">var</span> age: <span class="type">Int</span> = <span class="number">25</span></div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">sayHi</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Hi, I'm <span class="subst">\(name)</span>"</span>)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">run</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"run"</span>)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">swim</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"swim"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="POP"><a href="#POP" class="headerlink" title="POP"></a>POP</h3><p>Objective-C 的UIKit框架部分继承结构图👇：</p>
<p><img src="/2023/05/04/Swift/面向对象编程/../Swift/面向对象编程/21.png" alt="21"></p>
<h4 id="《怪物城堡-Monster-Castle》"><a href="#《怪物城堡-Monster-Castle》" class="headerlink" title="《怪物城堡 Monster Castle》"></a>《怪物城堡 Monster Castle》</h4><p>开发一款塔防游戏《怪物城堡 Monster Castle》。</p>
<p>使用 OOP 开发，游戏中的角色：</p>
<ol>
<li>主要分为两类角色 <code>Castle</code> 和 <code>Monster</code>；</li>
<li><code>Castle</code> 包括电脑玩家 <code>AI Player</code> 和真实玩家 <code>Human Player</code>；</li>
<li><code>Monster</code> 包括三种怪物 <code>Munch Monster</code>、<code>Quirk Monster</code> 和 <code>Zap Monster</code>。</li>
</ol>
<p><img src="/2023/05/04/Swift/面向对象编程/../Swift/面向对象编程/22.png" alt="22"></p>
<p>游戏中的能力：</p>
<ol>
<li><code>Castle</code> 和 <code>Zap Monster</code> 有射击的能力。</li>
</ol>
<p><img src="/2023/05/04/Swift/面向对象编程/../Swift/面向对象编程/23.png" alt="23"></p>
<p>通过封装一个 Shooting Helper 类来实现射击的能力，则 Castle 和 Zap Monster 通过 Shooting Helper 来进行射击。</p>
<p>虽然一个专门负责射击的类可以实现需求，但是无法从 Castle 和 Zap Monster 的<strong>定义</strong>里面看出他们是拥有射击的能力的，只有去<strong>内部实现</strong>里查找 Shooting Helper 的存在，才能知道这两个角色是有射击能力的，而另外两个 Munch Monster 和 Quirk Monster 是没有设计能力的。</p>
<hr>
<p>如果使用 POP 开发，则不再关心角色的分类，所有的角色都是 <code>GameObject</code> 的子类，它们的不同点在于他们拥有的能力不同。</p>
<p>游戏中的角色：<code>AI Player</code>（电脑玩家）、<code>Human Player</code>（真实玩家）、<code>Munch Monster</code>（蒙奇怪物）、<code>Quirk Monster</code>（魁克怪物）、<code>Zap Monster</code>（扎普怪物）。<br>游戏中的能力：<code>Gun Trait</code>（强制特性）、<code>Render Trait</code>（渲染特性）、<code>Movement Trait</code>（运动特性）、<code>Health Trait</code>（血条）、<code>AI Trait</code></p>
<p><img src="/2023/05/04/Swift/面向对象编程/../Swift/面向对象编程/24.png" alt="24"></p>
<p>则代码中角色的形成，完全由他所拥有的能力提现出来：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">AIPlayer</span>: <span class="title">GameObject</span>, <span class="title">AITrait</span>, <span class="title">GunTrait</span>, <span class="title">RenderTrait</span>, <span class="title">HealthTrait</span> </span>&#123;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ZapMonster</span>: <span class="title">GameObject</span>, <span class="title">GunTrait</span>, <span class="title">RenderTrait</span>, <span class="title">HealthTrait</span>, <span class="title">MovementTrait</span> </span>&#123;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h4 id="POP-设计一个登录功能"><a href="#POP-设计一个登录功能" class="headerlink" title="POP - 设计一个登录功能"></a>POP - 设计一个登录功能</h4><p><img src="/2023/05/04/Swift/面向对象编程/../Swift/面向对象编程/25.png" alt="25"></p>
<p>首先是使用 OOP 实现：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginViewController</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">isUsernameValid</span><span class="params">(username: String)</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">isPasswordValid</span><span class="params">(password: String)</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="meta">@IBAction</span> <span class="function"><span class="keyword">func</span> <span class="title">loginButtonPressed</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">if</span> isUsernameValid(username: usernameTextField.text!) &amp;&amp;</div><div class="line">           isPasswordValid(password: passwordTextField.text!) &#123;</div><div class="line">           <span class="comment">// proceed with login</span></div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">           <span class="comment">// show alert</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>对验证方法进一步封装：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">UsernameValidator</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">isUsernameValid</span><span class="params">(username: String)</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">PasswordValidator</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">isPasswordValid</span><span class="params">(password: String)</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginViewController</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> usernameValidator = <span class="type">UsernameValidator</span>()</div><div class="line">    <span class="keyword">let</span> passwordValidator = <span class="type">PasswordValidator</span>()</div><div class="line">    </div><div class="line">    <span class="meta">@IBAction</span> <span class="function"><span class="keyword">func</span> <span class="title">loginButtonPressed</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">if</span> usernameValidator.isUsernameValid(username: usernameTextField.text!) &amp;&amp;</div><div class="line">           passwordValidator.isPasswordValid(password: passwordTextField.text!) &#123;</div><div class="line">           <span class="comment">// proceed with login</span></div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">           <span class="comment">// show alert</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>使用 POP 实现：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">ValidatesUsername</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">isUsernameValid</span><span class="params">(username: String)</span></span> -&gt; <span class="type">Bool</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">ValidatesUsername</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">isUsernameValid</span><span class="params">(username: String)</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">        <span class="keyword">if</span> <span class="comment">/* username too short */</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="comment">/* username has invalid characters */</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">ValidetesPassword</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">isPasswordValid</span><span class="params">(password: String)</span></span> -&gt; <span class="type">Bool</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">ValidetesPassword</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">isPasswordValid</span><span class="params">(password: String)</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginViewController</span>: <span class="title">UIViewController</span>, <span class="title">ValidatesUsername</span>, <span class="title">ValidetesPassword</span> </span>&#123;</div><div class="line">    <span class="meta">@IBAction</span> <span class="function"><span class="keyword">func</span> <span class="title">loginButtonPressed</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">if</span> isUsernameValid(username: usernameTextField.text!) &amp;&amp;</div><div class="line">           isPasswordValid(password: passwordTextField.text!) &#123;</div><div class="line">            <span class="comment">// proceed with login</span></div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="comment">// show alert</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Swift/" rel="tag"># Swift</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2023/03/15/Swift/函数和闭包/" rel="next" title="函数和闭包">
                <i class="fa fa-chevron-left"></i> 函数和闭包
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2023/06/22/Github开源框架/Masonry/" rel="prev" title="Masonry">
                Masonry <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="gitalk-container"></div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          
            <img class="site-author-image" itemprop="image"
              src="/images/myAvatar.gif"
              alt="Kevin" />
          
            <p class="site-author-name" itemprop="name">Kevin</p>
            <p class="site-description motion-element" itemprop="description"></p>
        </div>

        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
            
              <a href="/archives/">
            
                <span class="site-state-item-count">48</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/KevinYangGit" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>GitHub</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="mailto:yangqioffice@gmail.com" target="_blank" title="E-Mail">
                  
                    <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/_YangQI" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>Twitter</a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-block">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="https://www.cnblogs.com/mjios" title="M了个J" target="_blank">M了个J</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#概述"><span class="nav-number">1.</span> <span class="nav-text">概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#面向对象的三大特性"><span class="nav-number">1.1.</span> <span class="nav-text">面向对象的三大特性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#基本单元"><span class="nav-number">1.2.</span> <span class="nav-text">基本单元</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类和结构体相似点"><span class="nav-number">1.3.</span> <span class="nav-text">类和结构体相似点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类和结构体的不同点"><span class="nav-number">1.4.</span> <span class="nav-text">类和结构体的不同点</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#枚举"><span class="nav-number">2.</span> <span class="nav-text">枚举</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#枚举语法"><span class="nav-number">2.1.</span> <span class="nav-text">枚举语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用-Switch-语句来匹配枚举值"><span class="nav-number">2.2.</span> <span class="nav-text">使用 Switch 语句来匹配枚举值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#遍历枚举的-case"><span class="nav-number">2.3.</span> <span class="nav-text">遍历枚举的 case</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#关联值"><span class="nav-number">2.4.</span> <span class="nav-text">关联值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#原始值"><span class="nav-number">2.5.</span> <span class="nav-text">原始值</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#预设原始值"><span class="nav-number">2.5.1.</span> <span class="nav-text">预设原始值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#从原始值初始化"><span class="nav-number">2.5.2.</span> <span class="nav-text">从原始值初始化</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#递归枚举（indirect）"><span class="nav-number">2.6.</span> <span class="nav-text">递归枚举（indirect）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#属性"><span class="nav-number">3.</span> <span class="nav-text">属性</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#存储属性"><span class="nav-number">3.1.</span> <span class="nav-text">存储属性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#常量结构体实例的存储属性"><span class="nav-number">3.1.1.</span> <span class="nav-text">常量结构体实例的存储属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#延迟存储属性"><span class="nav-number">3.1.2.</span> <span class="nav-text">延迟存储属性</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#计算属性"><span class="nav-number">3.2.</span> <span class="nav-text">计算属性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#简写-setter"><span class="nav-number">3.2.1.</span> <span class="nav-text">简写 setter</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#简写-getter"><span class="nav-number">3.2.2.</span> <span class="nav-text">简写 getter</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#只读计算属性"><span class="nav-number">3.2.3.</span> <span class="nav-text">只读计算属性</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#属性观察者"><span class="nav-number">3.3.</span> <span class="nav-text">属性观察者</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#全局和局部变量"><span class="nav-number">3.3.1.</span> <span class="nav-text">全局和局部变量</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类型属性（static）"><span class="nav-number">3.4.</span> <span class="nav-text">类型属性（static）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#方法"><span class="nav-number">4.</span> <span class="nav-text">方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#实例方法"><span class="nav-number">4.1.</span> <span class="nav-text">实例方法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#隐含属性-self"><span class="nav-number">4.1.1.</span> <span class="nav-text">隐含属性-self</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#在实例方法中修改属性-mutating（异变方法）"><span class="nav-number">4.1.2.</span> <span class="nav-text">在实例方法中修改属性-mutating（异变方法）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#在-mutating-方法中赋值给-self"><span class="nav-number">4.1.3.</span> <span class="nav-text">在 mutating 方法中赋值给 self</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#枚举的-mutating-方法"><span class="nav-number">4.1.4.</span> <span class="nav-text">枚举的 mutating 方法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类型方法（static）"><span class="nav-number">4.2.</span> <span class="nav-text">类型方法（static）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#下标"><span class="nav-number">5.</span> <span class="nav-text">下标</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#下标语法（subscript）"><span class="nav-number">5.1.</span> <span class="nav-text">下标语法（subscript）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#下标参数"><span class="nav-number">5.2.</span> <span class="nav-text">下标参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实例下标"><span class="nav-number">5.3.</span> <span class="nav-text">实例下标</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类型下标（static）"><span class="nav-number">5.4.</span> <span class="nav-text">类型下标（static）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#初始化和反初始化"><span class="nav-number">6.</span> <span class="nav-text">初始化和反初始化</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#初始化器"><span class="nav-number">6.1.</span> <span class="nav-text">初始化器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#默认的属性值"><span class="nav-number">6.2.</span> <span class="nav-text">默认的属性值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#默认的初始化器"><span class="nav-number">6.3.</span> <span class="nav-text">默认的初始化器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#自定义初始化"><span class="nav-number">6.4.</span> <span class="nav-text">自定义初始化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#在初始化中分配常量属性"><span class="nav-number">6.5.</span> <span class="nav-text">在初始化中分配常量属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#结构体的成员初始化器"><span class="nav-number">6.6.</span> <span class="nav-text">结构体的成员初始化器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#值类型的初始化器委托"><span class="nav-number">6.7.</span> <span class="nav-text">值类型的初始化器委托</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类的继承和初始化"><span class="nav-number">6.8.</span> <span class="nav-text">类的继承和初始化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#指定初始化器和便捷初始化器（convenience）"><span class="nav-number">6.9.</span> <span class="nav-text">指定初始化器和便捷初始化器（convenience）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类的初始化委托"><span class="nav-number">6.10.</span> <span class="nav-text">类的初始化委托</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#两段式初始化"><span class="nav-number">6.11.</span> <span class="nav-text">两段式初始化</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#两段式初始化-阶段一"><span class="nav-number">6.11.1.</span> <span class="nav-text">两段式初始化-阶段一</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#两段式初始化-阶段二"><span class="nav-number">6.11.2.</span> <span class="nav-text">两段式初始化-阶段二</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#安全检查"><span class="nav-number">6.12.</span> <span class="nav-text">安全检查</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#初始化器的继承和重写（override）"><span class="nav-number">6.13.</span> <span class="nav-text">初始化器的继承和重写（override）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#初始化器的自动继承"><span class="nav-number">6.14.</span> <span class="nav-text">初始化器的自动继承</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#可失败初始化器（init-init-）"><span class="nav-number">6.15.</span> <span class="nav-text">可失败初始化器（init?/init!）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#必要初始化器（required）"><span class="nav-number">6.16.</span> <span class="nav-text">必要初始化器（required）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#反初始化（deinit）"><span class="nav-number">6.17.</span> <span class="nav-text">反初始化（deinit）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#继承"><span class="nav-number">7.</span> <span class="nav-text">继承</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#定义基类"><span class="nav-number">7.1.</span> <span class="nav-text">定义基类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#子类"><span class="nav-number">7.2.</span> <span class="nav-text">子类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#重写（override）"><span class="nav-number">7.3.</span> <span class="nav-text">重写（override）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#访问父类的方法、属性和下标脚本"><span class="nav-number">7.4.</span> <span class="nav-text">访问父类的方法、属性和下标脚本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#重写方法"><span class="nav-number">7.5.</span> <span class="nav-text">重写方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#重写属性的-getter-和-setter"><span class="nav-number">7.6.</span> <span class="nav-text">重写属性的 getter 和 setter</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#重写属性的观察器"><span class="nav-number">7.7.</span> <span class="nav-text">重写属性的观察器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#组织重写（final）"><span class="nav-number">7.8.</span> <span class="nav-text">组织重写（final）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#多态"><span class="nav-number">8.</span> <span class="nav-text">多态</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#类型"><span class="nav-number">8.1.</span> <span class="nav-text">类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类型检查（is）"><span class="nav-number">8.2.</span> <span class="nav-text">类型检查（is）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#向下类型转换（as-as-）"><span class="nav-number">8.3.</span> <span class="nav-text">向下类型转换（as?/as!）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#不确定类型-Any-和-AnyObject"><span class="nav-number">8.4.</span> <span class="nav-text">不确定类型 Any 和 AnyObject</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#嵌套类型"><span class="nav-number">8.5.</span> <span class="nav-text">嵌套类型</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#扩展"><span class="nav-number">9.</span> <span class="nav-text">扩展</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#扩展（extension）的能力"><span class="nav-number">9.1.</span> <span class="nav-text">扩展（extension）的能力</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#扩展的能力-计算属性"><span class="nav-number">9.1.1.</span> <span class="nav-text">扩展的能力-计算属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#扩展的能力-初始化器"><span class="nav-number">9.1.2.</span> <span class="nav-text">扩展的能力-初始化器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#扩展的能力-方法"><span class="nav-number">9.1.3.</span> <span class="nav-text">扩展的能力-方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#扩展的能力-mutating方法"><span class="nav-number">9.1.4.</span> <span class="nav-text">扩展的能力-mutating方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#扩展的能力-下标"><span class="nav-number">9.1.5.</span> <span class="nav-text">扩展的能力-下标</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#扩展的能力-添加内嵌类型"><span class="nav-number">9.1.6.</span> <span class="nav-text">扩展的能力-添加内嵌类型</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#协议"><span class="nav-number">10.</span> <span class="nav-text">协议</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#协议的语法"><span class="nav-number">10.1.</span> <span class="nav-text">协议的语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#属性要求"><span class="nav-number">10.2.</span> <span class="nav-text">属性要求</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#方法要求"><span class="nav-number">10.3.</span> <span class="nav-text">方法要求</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mutating-方法要求"><span class="nav-number">10.4.</span> <span class="nav-text">mutating 方法要求</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#初始化器要求"><span class="nav-number">10.5.</span> <span class="nav-text">初始化器要求</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#初始化器要求的类实现"><span class="nav-number">10.6.</span> <span class="nav-text">初始化器要求的类实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#将协议作为类型"><span class="nav-number">10.7.</span> <span class="nav-text">将协议作为类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#协议继承"><span class="nav-number">10.8.</span> <span class="nav-text">协议继承</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类专用的协议（AnyObject）"><span class="nav-number">10.9.</span> <span class="nav-text">类专用的协议（AnyObject）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#协议组合（-amp-）"><span class="nav-number">10.10.</span> <span class="nav-text">协议组合（&）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#可选协议要求（optional）"><span class="nav-number">10.11.</span> <span class="nav-text">可选协议要求（optional）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#协议和扩展"><span class="nav-number">11.</span> <span class="nav-text">协议和扩展</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#在扩展里添加协议遵循"><span class="nav-number">11.1.</span> <span class="nav-text">在扩展里添加协议遵循</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#有条件的遵循协议"><span class="nav-number">11.2.</span> <span class="nav-text">有条件的遵循协议</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用扩展声明采纳协议"><span class="nav-number">11.3.</span> <span class="nav-text">使用扩展声明采纳协议</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#协议扩展"><span class="nav-number">11.4.</span> <span class="nav-text">协议扩展</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#给协议提供默认实现"><span class="nav-number">11.5.</span> <span class="nav-text">给协议提供默认实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#给协议扩展添加限制"><span class="nav-number">11.6.</span> <span class="nav-text">给协议扩展添加限制</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#面向协议编程"><span class="nav-number">12.</span> <span class="nav-text">面向协议编程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#OOP（面向对象编程）"><span class="nav-number">12.1.</span> <span class="nav-text">OOP（面向对象编程）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#POP（面向协议编程）"><span class="nav-number">12.2.</span> <span class="nav-text">POP（面向协议编程）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#OOP-vs-POP"><span class="nav-number">12.3.</span> <span class="nav-text">OOP vs POP</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#OOP-关心对象是什么"><span class="nav-number">12.3.1.</span> <span class="nav-text">OOP 关心对象是什么</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#POP-关心对象做什么"><span class="nav-number">12.3.2.</span> <span class="nav-text">POP 关心对象做什么</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#POP"><span class="nav-number">12.4.</span> <span class="nav-text">POP</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#《怪物城堡-Monster-Castle》"><span class="nav-number">12.4.1.</span> <span class="nav-text">《怪物城堡 Monster Castle》</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#POP-设计一个登录功能"><span class="nav-number">12.4.2.</span> <span class="nav-text">POP - 设计一个登录功能</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 &mdash; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Kevin</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动</div>

  <span class="post-meta-divider">|</span>

  <div class="theme-info">主题 &mdash; <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.2</div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>


  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  








  <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
  <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
  <script src="/js/src/md5.min.js"></script>
  <div id="gitalk-container"></div>
  <script type="text/javascript">
    var gitalk = new Gitalk({
      clientID: '82b6ced795961ee1fcca',
      clientSecret: '4a2f24a39c6fcd85813d80031c6e0262a65404f5',
      repo: 'KevinYangGit.github.io',
      owner: 'KevinYangGit',
      admin: ['KevinYangGit'],
      id: md5(location.pathname),
      distractionFreeMode: 'true'
    })
    gitalk.render('gitalk-container')
  </script>

  





  

  

  

  
  


  

  

</body>
</html>
